[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "netatmo-thermostat",
    "section": "",
    "text": "This file will become your README and also the index of your documentation.",
    "crumbs": [
      "netatmo-thermostat"
    ]
  },
  {
    "objectID": "index.html#developer-guide",
    "href": "index.html#developer-guide",
    "title": "netatmo-thermostat",
    "section": "Developer Guide",
    "text": "Developer Guide\nIf you are new to using nbdev here are some useful pointers to get you started.\n\nInstall netatmo_thermostat in Development mode\n# make sure netatmo_thermostat package is installed in development mode\n$ pip install -e .\n\n# make changes under nbs/ directory\n# ...\n\n# compile to have changes apply to netatmo_thermostat\n$ nbdev_prepare",
    "crumbs": [
      "netatmo-thermostat"
    ]
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "netatmo-thermostat",
    "section": "Usage",
    "text": "Usage\n\nInstallation\nInstall latest from the GitHub repository:\n$ pip install git+https://github.com/kafkasl/netatmo-thermostat.git\nor from conda\n$ conda install -c kafkasl netatmo_thermostat\nor from pypi\n$ pip install netatmo_thermostat\n\n\nDocumentation\nDocumentation can be found hosted on this GitHub repositoryâ€™s pages. Additionally you can find package manager specific guidelines on conda and pypi respectively.",
    "crumbs": [
      "netatmo-thermostat"
    ]
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "netatmo-thermostat",
    "section": "How to use",
    "text": "How to use\nFill me in please! Donâ€™t forget code examples:\n\n1+1\n\n2",
    "crumbs": [
      "netatmo-thermostat"
    ]
  },
  {
    "objectID": "core.html",
    "href": "core.html",
    "title": "netatmo-energy",
    "section": "",
    "text": "from fasthtml.jupyter import *\n\nfrom fastcore.utils import *\nimport fastcore.all as fc, matplotlib.pyplot as plt, collections\nfrom fastcore.xtras import dict2obj\n\nfrom httpx import get as xget, post as xpost\nfrom fasthtml.common import *\nfrom monsterui.core import *\n\nfrom dotenv import load_dotenv\n\nfrom base64 import b64decode\nfrom ipykernel_helper import get_md\nfrom IPython.display import Image, display\nload_dotenv()\n\nTrue\nHi solveit! I am Pol, and I am working with you today! Iâ€™m an experienced Python coder and I enjoy learning new things. When writing code for me, please follow fast.ai coding style: avoid comments; place single line if/loop/etc constructs on the same line; use concise variable names where appropriate. Follow the style you will see in my messages, as we work on this dialogue together. Are you ready?",
    "crumbs": [
      "netatmo-energy"
    ]
  },
  {
    "objectID": "core.html#zyte-api",
    "href": "core.html#zyte-api",
    "title": "netatmo-energy",
    "section": "Zyte API",
    "text": "Zyte API\n\ndef fetch_page(\n    url:str, # URL to fetch,\n    browser_html:bool=True, # Use a browser to reunder js page?\n    as_md:bool=False, # Convert HTML to markdown?\n    screenshot:bool=False, # Also return a screenshot?\n    timeout:int=15, # fetch timeout in seconds\n):\n    \"Fetch a page\"\n    api_key=os.getenv('ZYTE_API_KEY')\n    r = xpost(\"https://api.zyte.com/v1/extract\", auth=(api_key, \"\"), json=dict(url=url, browserHtml=browser_html, screenshot=screenshot), timeout=timeout)\n    r.raise_for_status()\n    rj = r.json()\n    if rj['statusCode'] != 200: raise Exception(f\"Status {rj['statusCode']} for {url}\")\n    html = get_md(rj['browserHtml']) if as_md else rj['browserHtml']\n    img = Image(data=b64decode(rj['screenshot'])) if screenshot and 'screenshot' in rj else None\n    return (html, img) if screenshot else html\n\n\nhtml, img = fetch_page('https://dev.netatmo.com/apidocumentation/energy', screenshot=True)\n\n\nhtml[:500]\n\n'&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;\\n    &lt;meta data-n-head=\"ssr\" charset=\"utf-8\"&gt;&lt;meta data-n-head=\"ssr\" name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;&lt;meta data-n-head=\"ssr\" data-hid=\"description\" name=\"description\" content=\"We want to create a smarter home. With Netatmo connect, creative people can imagine solutions to make users\\' life easier.\\n                Netatmo products are ready to communicate with all Apps and services to fit your vision of what makes a home smarter.\"&gt;&lt;meta data'\n\n\n\nimg",
    "crumbs": [
      "netatmo-energy"
    ]
  },
  {
    "objectID": "core.html#thermostat-class",
    "href": "core.html#thermostat-class",
    "title": "netatmo-energy",
    "section": "Thermostat Class",
    "text": "Thermostat Class\nEnergy API endpoints for Netatmo thermostat:\n\n\n\nMethod\nEndpoint\nDescription\n\n\n\n\nGET\n/homesdata\nRetrieve userâ€™s homes and topology\n\n\nGET\n/homestatus\nGet current status of home and devices\n\n\nGET\n/getroommeasure\nRetrieve room data history (for graphs)\n\n\nPOST\n/setroomthermpoint\nControl heating of a room\n\n\nPOST\n/setthermmode\nControl home heating system\n\n\nGET\n/getmeasure\nRetrieve boiler historical data\n\n\nPOST\n/createnewhomeschedule\nCreate thermostat weekly schedule\n\n\nPOST\n/synchomeschedule\nModify thermostat weekly schedule\n\n\nPOST\n/switchhomeschedule\nApply a specific schedule\n\n\n\nBase domain is api.netatmo.com (theyâ€™re retiring api.netatmo.net on Sept 8, 2025).\n\n\nThermostat\n\n Thermostat (client_id=None, client_secret=None, access_token=None,\n             refresh_token=None)\n\nInitialize self. See help(type(self)) for accurate signature.\n\nt = Thermostat()\nt.client_id[:10]  # quick check\n\n'6952046932'\n\n\n\nr = t._refresh()\nlist(r)\n\n['access_token', 'refresh_token', 'expires_in', 'expire_in', 'scope']\n\n\n\nfrom dialoghelper.core import *\n\n# tool_info()\n\nTools available from dialoghelper: &[curr_dialog, msg_idx, add_html, find_msg_id, find_msgs, read_msg, del_msg, add_msg, update_msg, msg_insert_line, msg_str_replace, msg_strs_replace, msg_replace_lines]\n\n\nHomes data\n\n\n\nThermostat.homesdata\n\n Thermostat.homesdata ()\n\n\nr = t.homesdata()\nhome_id = r.homes[0].id\nhome_id\n\n'693572355b98bfc2a009b174'\n\n\n\nr.homes[0].schedules\n\n(#1) [{'timetable': [{'zone_id': 1, 'm_offset': 0}, {'zone_id': 0, 'm_offset': 480}, {'zone_id': 1, 'm_offset': 1440}, {'zone_id': 0, 'm_offset': 1920}, {'zone_id': 1, 'm_offset': 2880}, {'zone_id': 0, 'm_offset': 3360}, {'zone_id': 1, 'm_offset': 4320}, {'zone_id': 0, 'm_offset': 4800}, {'zone_id': 1, 'm_offset': 5760}, {'zone_id': 0, 'm_offset': 6240}, {'zone_id': 1, 'm_offset': 7200}, {'zone_id': 0, 'm_offset': 7740}, {'zone_id': 1, 'm_offset': 8640}, {'zone_id': 0, 'm_offset': 9180}], 'zones': [{'name': 'Night', 'id': 1, 'type': 1, 'rooms_temp': [{'room_id': '3352988001', 'temp': 21}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 21}]}, {'name': 'Comfort', 'id': 0, 'type': 0, 'rooms_temp': [{'room_id': '3352988001', 'temp': 21}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 21}]}, {'name': 'Comfort +', 'id': 3, 'type': 8, 'rooms_temp': [{'room_id': '3352988001', 'temp': 22}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 22}]}, {'name': 'Eco', 'id': 4, 'type': 5, 'rooms_temp': [{'room_id': '3352988001', 'temp': 19}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 19}]}], 'name': 'Temperature schedule', 'default': False, 'away_temp': 17, 'hg_temp': 7, 'id': '693572355b98bfc2a009b175', 'type': 'therm', 'selected': True}]\n\n\nWe can see one schedule called â€œTemperature scheduleâ€ with:\nZones (temperature presets): - Night (id 1): 21Â°C - Comfort (id 0): 21Â°C\n- Comfort + (id 3): 22Â°C - Eco (id 4): 19Â°C\nTimetable - m_offset is minutes from Monday 00:00: - 0 = Mon 00:00 â†’ zone 1 (Night) - 480 = Mon 08:00 â†’ zone 0 (Comfort) - 1440 = Tue 00:00 â†’ zone 1 (Night) - etc.\nSpecial temps: - away_temp: 17Â°C - hg_temp: 7Â°C (frost guard)\nSo it switches between Night and Comfort zones each day at midnight and 8am\n\n\nHome status\n\n\n\nThermostat.homestatus\n\n Thermostat.homestatus (home_id)\n\n\nst = t.homestatus(home_id=home_id)\nroom = st.home.rooms[0]\nroom\n\n{ 'anticipating': False,\n  'heating_power_request': 0,\n  'id': '3352988001',\n  'open_window': False,\n  'reachable': True,\n  'therm_measured_temperature': 18.6,\n  'therm_setpoint_mode': 'off',\n  'therm_setpoint_start_time': 1767067816,\n  'therm_setpoint_temperature': 0}\n\n\nletâ€™s do them all in order, first only getroommeasuer\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01HunczNpfbgMrcgkYhKt9EF\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"content\": \"### Getroommeasure\"\n    }\n  },\n  \"result\": \"'_5dcdeea5'\"\n}\n\n\n{\n  \"id\": \"toolu_01Un5xyQRYNUejKCYZCTnrYc\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"@patch\\ndef getroommeasure(self:Thermostat, home_id, room_id, scale='1hour', type='temperature', begin=None, end=None):\\n    return self._request('getroommeasure', data=fc.dict_filter(\\n        {'home_id': home_id, 'room_id': room_id, 'scale': scale, 'type': type, 'date_begin': begin, 'date_end': end}))\"\n    }\n  },\n  \"result\": \"'_3eb95a1f'\"\n}\n\n\n{\n  \"id\": \"toolu_01VuX3fqR4a6YEAmdjv4oDWT\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"t.getroommeasure(home_id, room.id)\"\n    }\n  },\n  \"result\": \"'_50cb2c7a'\"\n}\n\nDone! Iâ€™ve added the getroommeasure method. Run those cells and let me know what you get back â€” the type param can be 'temperature' or 'sp_temperature' (setpoint), and scale can be '30min', '1hour', '3hours', '1day', '1week', '1month'.\n\n\n\nGet room measure\n\n\n\nThermostat.getroommeasure\n\n Thermostat.getroommeasure (home_id:str, room_id:str, scale:str='1hour',\n                            type:str='temperature', begin:int=None,\n                            end:int=None)\n\nRetrieve room temperature history\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nhome_id\nstr\n\nHome ID\n\n\nroom_id\nstr\n\nRoom ID\n\n\nscale\nstr\n1hour\nTime scale: 30min, 1hour, 3hours, 1day, 1week, 1month\n\n\ntype\nstr\ntemperature\nData type: temperature or sp_temperature\n\n\nbegin\nint\nNone\nStart timestamp\n\n\nend\nint\nNone\nEnd timestamp\n\n\n\n\nr = t.getroommeasure(home_id, room.id)\nlist(r)\n\n[{'beg_time': 1765110600,\n  'step_time': 3600,\n  'value': (#544) [[22.2],[22.2],[22.1],[22],[22.1],[22.3],[22.9],[22.7],[22.3],[22],[22],[21.9],[21.3],[21.1],[21],[21],[21],[21.1],[21.3],[21.7]...]}]\n\n\nletâ€™s do a super minimal plot of the data\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nplt.plot(r[0]['value'])\n\nplt.plot([v[0] for v in r[0]['value']])\n\n\n\n\n\n\n\n\namazing! letâ€™s do the next endpoint\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01Rn74vzg44TKw4nVfbhD6hg\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"content\": \"### setroomthermpoint\"\n    }\n  },\n  \"result\": \"'_f48d7b2e'\"\n}\n\n\n{\n  \"id\": \"toolu_01SSUKm8ojetBtSx4g3cJXcB\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"@patch\\ndef setroomthermpoint(self:Thermostat,\\n    home_id:str,   # Home ID\\n    room_id:str,   # Room ID\\n    mode:str,      # Mode: manual, home, or schedule\\n    temp:float=None,      # Target temperature (for manual mode)\\n    endtime:int=None,     # End timestamp (for manual mode)\\n):\\n    \\\"Set room temperature setpoint\\\"\\n    d = {'home_id': home_id, 'room_id': room_id, 'mode': mode}\\n    if temp: d['temp'] = temp\\n    if endtime: d['endtime'] = endtime\\n    return self._request('setroomthermpoint', data=d)\"\n    }\n  },\n  \"result\": \"'_f2a8da99'\"\n}\n\n\n{\n  \"id\": \"toolu_014hxrqjtoCkPhe39bHg6yr8\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"# Example: set room to 20\\u00b0C for 1 hour\\n# t.setroomthermpoint(home_id, room.id, mode='manual', temp=20, endtime=int(time.time())+3600)\"\n    }\n  },\n  \"result\": \"'_f1dd2356'\"\n}\n\nDone! I commented out the example since it would actually change your thermostat. Run the first cell to add the method, then you can test it when ready. Next up is setthermmode?\nmaybe letâ€™s first get the therm point so then we can actually set and unset it to make sure this works\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nYou already have the setpoint from homestatus â€” check room:\nroom.therm_setpoint_temperature, room.therm_setpoint_mode\nThat will show current temp and mode. Then you can set it, call homestatus again, and verify it changed.\n\n\n\nSet room therm point\n\n\n\nThermostat.room_temperatures\n\n Thermostat.room_temperatures (home_id:str)\n\nNicer way to get a list of the temperatures of all room in the home\n\n\n\nThermostat.setroomthermpoint\n\n Thermostat.setroomthermpoint (home_id:str, room_id:str, mode:str,\n                               temp:float=None, endtime:int=None)\n\nSet room temperature setpoint\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nhome_id\nstr\n\nHome ID\n\n\nroom_id\nstr\n\nRoom ID\n\n\nmode\nstr\n\nMode: manual, home, or schedule\n\n\ntemp\nfloat\nNone\nTarget temperature (for manual mode)\n\n\nendtime\nint\nNone\nEnd timestamp (for manual mode)\n\n\n\n\n# let's check the thermp point before setting it\n\nt.room_temperatures(home_id)\n\n[{'room_id': '3352988001',\n  'temperature': 18.6,\n  'setpoint': 0,\n  'setpoint_mode': 'off'}]\n\n\n\n# Example: set room to 20Â°C for 1 hour\nt.setroomthermpoint(home_id, room.id, mode='manual', temp=20, endtime=int(time())+3600)\n\n{'status': 'ok', 'time_server': 1767067846}\n\n\n\nt.room_temperatures(home_id)\n\n[{'room_id': '3352988001',\n  'temperature': 18.6,\n  'setpoint': 20,\n  'setpoint_mode': 'manual'}]\n\n\nWe can see the thermostat was turned on, letâ€™s turn it off again below\n\nt.setroomthermpoint(home_id, room.id, mode='off')\n\n{'status': 'ok', 'time_server': 1767067847}\n\n\n\nt.room_temperatures(home_id)\n\n[{'room_id': '3352988001',\n  'temperature': 18.6,\n  'setpoint': 0,\n  'setpoint_mode': 'off'}]\n\n\namazing! letâ€™s do another method\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01XDjLFWZHzxkWjqjH6jk2zx\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"content\": \"### setthermmode\"\n    }\n  },\n  \"result\": \"'_be102f56'\"\n}\n\n\n{\n  \"id\": \"toolu_017ts9PKjZtrtTrBa548vWcr\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"@patch\\ndef setthermmode(self:Thermostat,\\n    home_id:str,   # Home ID\\n    mode:str,      # Mode: schedule, away, hg (frost guard)\\n    endtime:int=None,  # End timestamp (for away/hg modes)\\n):\\n    \\\"Set home thermostat mode\\\"\\n    d = {'home_id': home_id, 'mode': mode}\\n    if endtime: d['endtime'] = endtime\\n    return self._request('setthermmode', data=d)\"\n    }\n  },\n  \"result\": \"'_e51c0227'\"\n}\n\n\n{\n  \"id\": \"toolu_01GemP1TdjJUNwwGxTtBJ22q\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"msg_type\": \"code\",\n      \"content\": \"# t.setthermmode(home_id, mode='schedule')\"\n    }\n  },\n  \"result\": \"'_ce3bf4ca'\"\n}\n\nDone! Modes are schedule (follow weekly schedule), away (away mode), and hg (frost guard/minimum temp). Next is getmeasure for boiler history?\n\n\n\nSet therm mode\n\n\n\nThermostat.setthermmode\n\n Thermostat.setthermmode (home_id:str, mode:str, endtime:int=None)\n\nSet home thermostat mode\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nhome_id\nstr\n\nHome ID\n\n\nmode\nstr\n\nMode: schedule (weekly program), away (reduced temp), hg (frost guard ~7Â°C)\n\n\nendtime\nint\nNone\nEnd timestamp (for away/hg modes)\n\n\n\nI think it would be good to document a bit more the schedule modes, should we add the info after the markdown header? or in the method docstring or docments? wdyt?\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nIâ€™d suggest in the docments (the parameter comments) since thatâ€™s where you already have the pattern and it keeps info close to the code. Something like:\nmode:str,      # Mode: schedule (weekly), away (reduced temp), hg (frost guard ~7Â°C)\nOr if you want more detail, a short note after the header works too. Whatâ€™s your preference?\ndocments sounds good! do it for me please!\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_015oE9j2k2QJjddhRMibEcMv\",\n  \"call\": {\n    \"function\": \"msg_str_replace\",\n    \"arguments\": {\n      \"msgid\": \"_e51c0227\",\n      \"old_str\": \"mode:str,      # Mode: schedule, away, hg (frost guard)\",\n      \"new_str\": \"mode:str,      # Mode: schedule (weekly program), away (reduced temp), hg (frost guard ~7\\u00b0C)\"\n    }\n  },\n  \"result\": \"{'success': 'Replaced text in message _e51c0227'}\"\n}\n\nDone! Updated the mode docment with more detail.\n\n# t.setthermmode(home_id, mode='schedule')\n\n\nt.room_temperatures(home_id)\n\n[{'room_id': '3352988001',\n  'temperature': 18.6,\n  'setpoint': 0,\n  'setpoint_mode': 'off'}]\n\n\nis this what we expect after setting the mode to schedule?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nYes, this looks correct! setthermmode sets the homeâ€™s operating mode to follow the schedule, but the schedule itself currently has your room set to â€œoffâ€ at this time of day. So the roomâ€™s setpoint_mode: 'off' is what the schedule dictates right now.\nIf you had heating periods defined in your weekly schedule, the room would show setpoint_mode: 'schedule' with a target temperature during those times.\ncan you explain this a bit in a note so users reading my notebook will get it?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01KyVTw3dm44x9wNpWxtDya4\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"content\": \"**Note:** `setthermmode` controls the *home's* operating mode (schedule/away/hg), not individual room setpoints. When set to `schedule`, each room follows its weekly program\\u2014so a room showing `setpoint_mode: 'off'` means the schedule has it off at that time. During scheduled heating periods, it would show `setpoint_mode: 'schedule'` with a target temperature.\"\n    }\n  },\n  \"result\": \"'_42759b01'\"\n}\n\nDone! Want to continue with getmeasure next?\nNote: setthermmode controls the homeâ€™s operating mode (schedule/away/hg), not individual room setpoints. When set to schedule, each room follows its weekly programâ€”so a room showing setpoint_mode: 'off' means the schedule has it off at that time. During scheduled heating periods, it would show setpoint_mode: 'schedule' with a target temperature.\n\n\n\nGet measure\n\n\n\nThermostat.getmeasure\n\n Thermostat.getmeasure (device_id:str, module_id:str=None,\n                        scale:str='1hour', type:str='boileron',\n                        begin:int=None, end:int=None)\n\nRetrieve boiler historical data\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ndevice_id\nstr\n\nDevice MAC address\n\n\nmodule_id\nstr\nNone\nModule MAC (if reading from a module)\n\n\nscale\nstr\n1hour\nTime scale: 30min, 1hour, 3hours, 1day, 1week, 1month\n\n\ntype\nstr\nboileron\nData type: boileron, boileroff, sum_boiler_on, sum_boiler_off\n\n\nbegin\nint\nNone\nStart timestamp\n\n\nend\nint\nNone\nEnd timestamp\n\n\n\n\n# Get device_id from homesdata\nr = t.homesdata()\ndevice_id = r.homes[0].modules[0].id\nm = t.getmeasure(device_id)\nlist(m)\n\n[{'beg_time': 1765110600,\n  'step_time': 3600,\n  'value': (#544) [[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None],[None]...]}]\n\n\nI donâ€™t have a boiler device so the data is None\nI assumed itâ€™s none because I have no boiler, but then I actually have a device_id, whatâ€™s that?\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nGood question! The device_id is likely your thermostat or relay module, not a boiler. Try checking what modules you have:\n[(m.id, m.type, m.get('name', '')) for m in r.homes[0].modules]\nThis will show you what devices are registered. The getmeasure endpoint specifically tracks boiler on/off times, which requires a compatible boiler controller module to report that data.\n\n[(m.type, m.get('name', '')) for m in r.homes[0].modules]\n\n[('NAPlug', 'Termostato'), ('NATherm1', 'Thermostat')]\n\n\n.\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nYou have: - NAPlug - the relay that controls heating on/off - NATherm1 - the thermostat that measures temperature and sends commands\nThe getmeasure boiler data likely returns None because your relay isnâ€™t logging boiler cycles, or your heating system doesnâ€™t report that info. This is normal for many setups.\nReady for the next endpoint? We have createnewhomeschedule, synchomeschedule, and switchhomeschedule left.\n\n\n\nCreate new home schedule\n\n\n\nThermostat.createnewhomeschedule\n\n Thermostat.createnewhomeschedule (home_id:str, name:str, zones:list,\n                                   timetable:list, hg_temp:float=7,\n                                   away_temp:float=17)\n\nCreate a new weekly schedule\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nhome_id\nstr\n\nHome ID\n\n\nname\nstr\n\nNew schedule name\n\n\nzones\nlist\n\nList of zone dicts with id, name, type, rooms_temp\n\n\ntimetable\nlist\n\nList of timetable entries with zone_id, m_offset\n\n\nhg_temp\nfloat\n7\nFrost guard temp\n\n\naway_temp\nfloat\n17\nAway mode temp\n\n\n\n\n\nSwitch home schedule\n\n\n\nThermostat.switchhomeschedule\n\n Thermostat.switchhomeschedule (home_id:str, schedule_id:str)\n\nSwitch to a specific weekly schedule\n\n\n\n\nType\nDetails\n\n\n\n\nhome_id\nstr\nHome ID\n\n\nschedule_id\nstr\nSchedule ID to activate\n\n\n\n\n\nSync home schedule\n\n\n\nThermostat.synchomeschedule\n\n Thermostat.synchomeschedule (home_id:str, schedule_id:str, zones:list,\n                              timetable:list, name:str=None,\n                              hg_temp:float=None, away_temp:float=None)\n\nModify an existing weekly schedule\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nhome_id\nstr\n\nHome ID\n\n\nschedule_id\nstr\n\nSchedule ID to modify\n\n\nzones\nlist\n\nList of zone dicts with id, name, type, rooms_temp\n\n\ntimetable\nlist\n\nList of timetable entries with zone_id, m_offset\n\n\nname\nstr\nNone\nSchedule name\n\n\nhg_temp\nfloat\nNone\nFrost guard temp\n\n\naway_temp\nfloat\nNone\nAway mode temp",
    "crumbs": [
      "netatmo-energy"
    ]
  },
  {
    "objectID": "core.html#publishing-the-package-to-pypi",
    "href": "core.html#publishing-the-package-to-pypi",
    "title": "netatmo-energy",
    "section": "Publishing the package to pypi",
    "text": "Publishing the package to pypi\nis our SDK only for thermostats? Iâ€™m planning to make it publicly available and Iâ€™m wondering what the github repo name and description should be to make it easily discoverable\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nCurrently yes â€” weâ€™ve only implemented the Energy API endpoints (thermostats/heating). Netatmo also has APIs for: - Weather - weather stations, rain gauges - Security - cameras, smoke detectors - Aircare - air quality monitors\nNaming options: 1. Thermostat-specific: netatmo-thermostat, netatmo-energy-py â€” clear but limited scope 2. Expandable: netatmo-py, python-netatmo â€” room to grow if you add other products later\nFor discoverability, Iâ€™d suggest netatmo-py or netatmo-api-python with a description like â€œPython SDK for Netatmo APIs (Energy/Thermostat)â€ â€” accurate now but leaves room to expand.\nWhatâ€™s your preference?\nI donâ€™t want to spend too much time on it, but would be great to publish it and maybe tweet it? It is basically a â€œreplyâ€ to this tweet by Andrej Karpathy:\nI was inspired by this so I wanted to see if Claude Code can get into my Lutron home automation system.\n\n- it found my Lutron controllers on the local wifi network\n- checked for open ports, connected, got some metadata and identified the devices and their firmware\n- searched the internet, found the pdf for my system\n- instructed me on what button to press to pair and get the certificates\n- it connected to the system and found all the home devices (lights, shades, HVAC temperature control, motion sensors etc.)\n- it turned on and off my kitchen lights to check that things are working (lol!)\n\nI am now vibe coding the home automation master command center, the potential is ğŸ”¥.And I'm throwing away the crappy, janky, slow Lutron iOS app I've been using so far. Insanely fun :D :D\nI then did this:\nI tried this too by asking CC to connect to my netatmo thermostat.\n\nCC spent a huge amount of tokens scanning ports, using nmap, arp, dsn, web searching for my thermostat's brand MAC prefix, etc...\n\nIt did find my thermostat MAC address, which looked cool. Later, it walked me through the official way of creating an 'App' in the netatmo and getting the keys & tokens.\n\nAt this point the whole message quota almost ran out. \n\nThen it hit me that I was just going to use their standard API, so why the MAC and all that stuff. Effectively, all that exploration is pretty useless as CC recognizes, just a token sink.\n\n\nIt would have been much quicker to have a look at the docs from the beginning and set a quick python script to try it out.\n\nIt feels kind of useless to have wasted this amount of tokens for nothing, on the other hand, it's true that I would never have thought of trying to use my thermostat with an API (I have a perfectly ok app to do so) w/o CC, both because the original tweet was caused by CC and because I could just spin it up on the background while I did other stuff.\n\nBittersweet.\nSo I decided to do it the solveIT way\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nGreat story! The contrast is compelling: CC burned tokens on exploratory scanning while the solveit approach went straight to docs â†’ working SDK in a focused session.\nFor sharing, you could:\n\nExport this notebook as a GitHub gist or repo with a simple README telling the story\nTweet thread: Your existing text is already good â€” just add a link to the notebook and maybe a screenshot of the temperature plot\n\nRepo name suggestion: netatmo-solveit or netatmo-the-boring-way ğŸ˜„\nWant help drafting a README or tweet thread?\nyes create a basic README explaining how to use it. Consider that we will export all the important class methods into a .py file to be used\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01T5Z7MdaZ3af1ibUnAVreXH\",\n  \"call\": {\n    \"function\": \"add_msg\",\n    \"arguments\": {\n      \"content\": \"# netatmo-energy\\n\\nA simple Python SDK for the Netatmo Energy API (thermostats).\\n\\n## Setup\\n\\n1. Create an app at [dev.netatmo.com](https://dev.netatmo.com) to get your API credentials\\n2. Create a `.env` file:\\n```\\nCLIENT_ID=your_client_id\\nCLIENT_SECRET=your_client_secret\\nACCESS_TOKEN=your_access_token\\nREFRESH_TOKEN=your_refresh_token\\n```\\n\\n## Usage\\n\\n```python\\nfrom netatmo import Thermostat\\n\\nt = Thermostat()\\nhomes = t.homesdata()\\nhome_id = homes.homes[0].id\\n\\n# Get current status\\nt.room_temperatures(home_id)\\n\\n# Set room to 20\\u00b0C for 1 hour\\nt.setroomthermpoint(home_id, room_id, mode='manual', temp=20,&lt;TRUNCATED&gt;\"\n    }\n  },\n  \"result\": \"'_0bcdb02f'\"\n}\n\nDone! Take a look and let me know if you want any changes â€” I can adjust the tone, add more detail to any section, or link to Karpathyâ€™s actual tweet URL if you have it.\nI just cloned the repo into our current working dir, I think the easiest to publish it is to set it up as an nbdev project, could you help with that?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nSure! Letâ€™s see whatâ€™s in the repo first:\n\n{\n  \"id\": \"toolu_01Mvo1jSv5gsRE7Xr6fh1WKU\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \".\"\n    }\n  },\n  \"result\": \"'Directory contents of /app/data/netatmo-thermostat:\\\\n/app/data/netatmo-thermostat/thermostat-netatmo.ipynb\\\\n/app/data/netatmo-thermostat/netatmo-thermostat\\\\n/app/data/netatmo-thermostat/thermostat_netatmo.py\\\\n/app/data/netatmo-thermostat/LICENSE'\"\n}\n\nGot it. To set up nbdev, youâ€™ll need:\n\nsettings.ini - project config\nnbs/ folder for notebooks (or rename your existing one)\nRun nbdev_new or create the config manually\n\nWant me to create a minimal settings.ini for you, or would you prefer to run nbdev_new and configure interactively?\nI already ran nbdev_new what next?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01En4683Nf9ArbRVut5Dfzvc\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \".\"\n    }\n  },\n  \"result\": \"'Directory contents of /app/&lt;TRUNCATED&gt;\"\n}\n\nGood, nbdev scaffolding is there. Next steps:\n\nMove your Thermostat code into nbs/00_core.ipynb with #| export directives\nUpdate nbs/index.ipynb with your README content\nRun nbdev_export to generate netatmo_thermostat/core.py\n\nWant me to show you what the #| export cells should look like, or do you want to set that up yourself?\nI marked the important cells for export already, can you now add at the top the nbdev header & explanation that usually begins with # default_exp â€¦\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01L7yd9a4SYQvzkHV9qPNyA2\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"nbs/00_core.ipynb\",\n      \"view_range\": \"[1, 30]\"\n    }\n  },\n  \"result\": \"'Error: File not found: /app/data/netatmo-thermostat/nbs/nbs/00_core.ipynb'\"\n}\n\n\n{\n  \"id\": \"toolu_01XTLkEHUyCvsD7ydHk3D8KV\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"nbs\"\n    }\n  },\n  \"result\": \"'Error: File not found: /app/data/netatmo-thermostat/nbs/nbs'\"\n}\n\n\n{\n  \"id\": \"toolu_01QmyU9icrqTChnZckbbRc9B\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"netatmo-thermostat\"\n    }\n  },\n  \"result\": \"'Error: File not found: /app/data/netatmo-thermostat/nbs/netatmo-thermostat'\"\n}\n\n\n{\n  \"id\": \"toolu_013GpeNz2ahBHX8kRBdRx47f\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"/app/data/netatmo-thermostat\"\n    }\n  },\n  \"result\": \"'Directory contents of /app/&lt;TRUNCATED&gt;\"\n}\n\n\n{\n  \"id\": \"toolu_01X1b3h9t6ALwFm44q8o5B3y\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"/app/data/netatmo-thermostat/nbs/00_core.ipynb\",\n      \"view_range\": \"[1, 40]\"\n    }\n  },\n  \"result\": \"'{\\\\n \\\"cells\\\": [\\\\n  {\\\\n   \\\"cell_type\\\": \\\"code\\\",\\\\n   \\\"execution_count\\\": null,\\\\n   \\\"id\\\": \\\"e8cba711\\\",\\\\n   \\\"metadata\\\": {\\\\n    \\\"time_run\\\": \\\"2025-12-30T05:25:29.557629+00:00\\\"\\\\n   },\\\\n   \\\"outputs\\\": [],\\\\n   \\\"source\\\": [\\\\n    \\\"from fastcore.utils import *\\\\\\\\n\\\",\\\\n    \\\"import fastcore.all as fc, re, math, itertools, functools, numpy as np, types, typing, dataclasses, matplotlib.pyplot as plt, collections, regex\\\\\\\\n\\\",\\\\n    \\\"from fastcore.xtras import dict2obj\\\\\\\\n\\\",\\\\n    \\\"from regex import search\\\\\\\\n\\\",\\\\n    \\\"from collections import Counter\\\\\\\\n\\\",\\\\n    \\\"from collections.abc import Iterable\\\\\\\\n\\\",\\\\n    \\\"from httpx impo&lt;TRUNCATED&gt;\"\n}\n\nI see the notebook already has #| export directives. The standard nbdev header goes at the very top. Iâ€™ll add a new first cell with #| default_exp core:\n\n{\n  \"id\": \"toolu_01NWX5Y6WyQEJmoGzNF46T3o\",\n  \"call\": {\n    \"function\": \"insert\",\n    \"arguments\": {\n      \"path\": \"/app/data/netatmo-thermostat/nbs/00_core.ipynb\",\n      \"insert_line\": \"2\",\n      \"new_str\": \"{\\n   \\\"cell_type\\\": \\\"code\\\",\\n   \\\"execution_count\\\": null,\\n   \\\"metadata\\\": {},\\n   \\\"outputs\\\": [],\\n   \\\"source\\\": [\\\"#| default_exp core\\\"]\\n  },\"\n    }\n  },\n  \"result\": \"'Inserted text at line 2 in /app/data/netatmo-thermostat/nbs/00_core.ipynb'\"\n}\n\nDone! Added #| default_exp core as the first cell. Now nbdev_export will know to export marked cells to netatmo_thermostat/core.py.\ngreat! I created the reamde with the appropriate content, anything left before pushing & publishing?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nQuick checklist:\n\nRun nbdev_export to generate the .py files\nRun nbdev_clean to clean notebook metadata\nCheck settings.ini has correct: lib_name, version, description, author, keywords\nTest import: from netatmo_thermostat.core import Thermostat\n\nIf those look good, youâ€™re ready to push and nbdev_pypi!\ncan you check the .py file to see if the imports I exported are correct and sufficient and whether settings.ini needs some package dependencies added?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_018acryaUaLZZEofKtARKtuw\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"/app/data/netatmo-thermostat/netatmo_thermostat/core.py\"\n    }\n  },\n  \"result\": \"'# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/00_core.ipynb.\\\\n\\\\n# %% auto 0\\\\n__all__ = [\\\\'Thermostat\\\\']\\\\n\\\\n# %% ../nbs/00_core.ipynb 2\\\\nimport os\\\\nfrom time import time\\\\nfrom fastcore.utils import patch\\\\nfrom fastcore.xtras import dict2obj\\\\nfrom httpx import get as xget, post as xpost\\\\n\\\\n# %% ../nbs/00_core.ipynb 15\\\\nclass Thermostat:\\\\n    base = \\\\'https://api.netatmo.com\\\\'\\\\n    \\\\n    def __init__(self):\\\\n        self.client_id = os.getenv(\\\\'CLIENT_ID\\\\')\\\\n        self.client_secret = os.getenv(\\\\'CLIENT_SECRET\\\\')\\\\n        self.access_token = os.getenv(\\\\'ACCESS_TOKEN\\\\')\\\\n        self.refre&lt;TRUNCATED&gt;\"\n}\n\n\n{\n  \"id\": \"toolu_013h6SPMxkjmSa1Db4LY8Hjh\",\n  \"call\": {\n    \"function\": \"view\",\n    \"arguments\": {\n      \"path\": \"/app/data/netatmo-thermostat/settings.ini\"\n    }\n  },\n  \"result\": \"'[DEFAULT]\\\\n# All sections below are required unless otherwise specified.\\\\n# See https://github.com/AnswerDotAI/nbdev/blob/main/settings.ini for examples.\\\\n\\\\n### Python library ###\\\\nrepo = netatmo-thermostat\\\\nlib_name = %(repo)s\\\\nversion = 0.0.1\\\\nmin_python = 3.9\\\\nlicense = apache2\\\\nblack_formatting = False\\\\n\\\\n### nbdev ###\\\\ndoc_path = _docs\\\\nlib_path = netatmo_thermostat\\\\nnbs_path = nbs\\\\nrecursive = True\\\\ntst_flags = notest\\\\nput_version_in_init = True\\\\nupdate_pyproject = True\\\\n\\\\n### Docs ###\\\\nbranch = main\\\\ncustom_sidebar = False\\\\ndoc_host = https://%(user)s.github.io\\\\ndoc_baseurl = /%(repo)s&lt;TRUNCATED&gt;\"\n}\n\nLooks good! The imports use: - fastcore (for patch, dict2obj) - httpx (for API calls)\nYour settings.ini already has requirements = fastcore httpx âœ…\nOne thing missing: getroommeasure â€” I donâ€™t see it in the exported file. Did you mark that cell for export?\nwhat is the _proc folder?\n\n\nğŸ¤–ReplyğŸ¤–\nThe _proc folder is created by nbdev to store processed versions of your notebooks during builds. Itâ€™s used internally by nbdev for things like:\n\nRunning tests\nBuilding docs\nChecking for issues\n\nYou can safely add it to .gitignore â€” itâ€™s generated automatically and doesnâ€™t need to be tracked in version control.",
    "crumbs": [
      "netatmo-energy"
    ]
  },
  {
    "objectID": "core.html#ui",
    "href": "core.html#ui",
    "title": "netatmo-energy",
    "section": "UI",
    "text": "UI\nAmazing! now letâ€™s do a very basic FastHTML app that displays a beautiful historical plot of temperature vs.Â setpoint. Maybe we can start with the FastHTML component.\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nFor the plot, we could use either: 1. Matplotlib - generate a static image, serve as base64 2. A JS charting lib (like Chart.js or Plotly) - interactive, but more setup\nWhich approach would you prefer?\ncheck FastHTML / monster.ui docs to see which charts they support and use one of those\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01DzuPzGs954Z8eUJDvjfVm4\",\n  \"call\": {\n    \"function\": \"read_url\",\n    \"arguments\": {\n      \"url\": \"https://monsterui.answer.ai/\"\n    }\n  },\n  \"result\": \"'* Getting Started\\\\n    * Getting Started\\\\n    * Tutorial App\\\\n  * API Reference\\\\n    * Accordion | Link\\\\n    * Button | Link\\\\n    * Cards\\\\n    * Charts\\\\n    * Containers\\\\n    * Dividers\\\\n    * Forms\\\\n    * Html\\\\n    * Icons | Images\\\\n    * Layout\\\\n    * Lightbox\\\\n    * Lists\\\\n    * Loading\\\\n    * Markdown\\\\n    * Modals\\\\n    * Navigation\\\\n    * Notifications\\\\n    * Sliders\\\\n    * Steps\\\\n    * Tables\\\\n    * Theme | Headers\\\\n    * Typography\\\\n  * Guides\\\\n    * Spacing\\\\n    * Layout\\\\n  * Examples\\\\n    * Task\\\\n    * Card\\\\n    * Dashboard\\\\n    * Form\\\\n    * Music\\\\n    * Auth\\\\n    * Playground\\\\n    &lt;TRUNCATED&gt;\"\n}\n\n\n{\n  \"id\": \"toolu_01NBSYBGtVGwaHBs2Frqxpvv\",\n  \"call\": {\n    \"function\": \"read_url\",\n    \"arguments\": {\n      \"url\": \"https://monsterui.answer.ai/api_ref/charts\"\n    }\n  },\n  \"result\": \"\\\"* Getting Started\\\\n    * Getting Started\\\\n    * Tutorial App\\\\n  * API Reference\\\\n    * Accordion | Link\\\\n    * Button | Link\\\\n    * Cards\\\\n    * Charts\\\\n    * Containers\\\\n    * Dividers\\\\n    * Forms\\\\n    * Html\\\\n    * Icons | Images\\\\n    * Layout\\\\n    * Lightbox\\\\n    * Lists\\\\n    * Loading\\\\n    * Markdown\\\\n    * Modals\\\\n    * Navigation\\\\n    * Notifications\\\\n    * Sliders\\\\n    * Steps\\\\n    * Tables\\\\n    * Theme | Headers\\\\n    * Typography\\\\n  * Guides\\\\n    * Spacing\\\\n    * Layout\\\\n  * Examples\\\\n    * Task\\\\n    * Card\\\\n    * Dashboard\\\\n    * Form\\\\n    * Music\\\\n    * Auth\\\\n    * Playground\\\\n    &lt;TRUNCATED&gt;\"\n}\n\n* MonsterUI includes ApexChart for charting, which wraps the ApexCharts JavaScript library. * The dashboard example uses Plotly Express for line charts.\nSo you have two options: 1. ApexChart - built into MonsterUI (via ApexChart(opts={...}))\n2. Plotly - used in their dashboard example\nWhich would you prefer? ApexChart is lighter, Plotly is more feature-rich.\nwhatever is easier and more concise\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nApexChart is simpler. Hereâ€™s a basic line chart component:\nfrom monsterui.core import ApexChart\n\ndef temp_chart(temps, setpoints, times):\n    return ApexChart(opts={\n        'chart': {'type': 'line', 'height': 350},\n        'series': [\n            {'name': 'Temperature', 'data': temps},\n            {'name': 'Setpoint', 'data': setpoints}\n        ],\n        'xaxis': {'categories': times}\n    })\nWant me to wire this up with your getroommeasure data?\n\nfrom monsterui.franken import ApexChart\nfrom datetime import datetime\n\n\ndef temp_chart(temps, setpoints, times):\n    return ApexChart(opts={\n        'chart': {'type': 'line', 'height': 350},\n        'series': [\n            {'name': 'Temperature', 'data': temps},\n            {'name': 'Setpoint', 'data': setpoints}\n        ],\n        'xaxis': {'categories': times}\n    })\n\n\n# Get temp and setpoint history\ntemps_raw = t.getroommeasure(home_id, room.id, type='temperature')\nsp_raw = t.getroommeasure(home_id, room.id, type='sp_temperature')\n\nbeg, step = temps_raw[0]['beg_time'], temps_raw[0]['step_time']\ntemps = [v[0] for v in temps_raw[0]['value']]\nsetpoints = [v[0] for v in sp_raw[0]['value']]\ntimes = [datetime.fromtimestamp(beg + i*step).strftime('%m/%d %H:%M') for i in range(len(temps))]\n\n\nshow(temp_chart(temps, setpoints, times))\n\n\n\n\n\nI canâ€™t see the component, how to render it in notebook? I though fasthtml was auto-displayed, maybe itâ€™s the apex chart thing?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nApexChart needs JavaScript to render, which doesnâ€™t work in notebook outputs. Itâ€™s designed for FastHTML web apps.\nFor notebooks, stick with matplotlib:\nplt.figure(figsize=(12,4))\nplt.plot(temps, label='Temperature')\nplt.plot(setpoints, label='Setpoint')\nplt.legend()\nThe ApexChart component will work once we build the actual FastHTML app. Want to set that up now?\n\nplt.figure(figsize=(12,4))\nplt.plot(temps, label='Temperature')\nplt.plot(setpoints, label='Setpoint')\nplt.legend()\n\n\n\n\n\n\n\n\nyes letâ€™s create the app now and run it from the notebook, you can see an example in: https://share.solve.it.com/d/60acda488c7dca4c931d4a4cd1a6481b\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \n\n{\n  \"id\": \"toolu_01LVzsGQZM8U4bH6DpgcxXK1\",\n  \"call\": {\n    \"function\": \"read_url\",\n    \"arguments\": {\n      \"url\": \"https://share.solve.it.com/d/60acda488c7dca4c931d4a4cd1a6481b\"\n    }\n  },\n  \"result\": \"'Try an interactive version of this dialog: Sign up at [solve.it.com](https://solve.it.com), click Upload, and pass this URL. \\\\n\\\\nCode: 225 ()\\\\n\\\\n[](/show_card_?msgid=_e8cba711&with_input=1&dlg_name=chinese%2Flookup)\\\\n```\\\\nfrom fastcore.utils import *\\\\nimport fastcore.all as fc, re, math, itertools, functools, numpy as np, types, typing, dataclasses, matplotlib.pyplot as plt, collections, regex\\\\nfrom fastcore.xtras import dict2obj\\\\nfrom regex import search\\\\nfrom collections import Counter\\\\nfrom collections.abc import Iterable\\\\nfrom httpx import get as xget, post as xpost\\\\nimport json\\\\n\\\\nfrom f&lt;TRUNCATED&gt;\"\n}\n\nGot it. Hereâ€™s the basic FastHTML app structure with your thermostat chart:\nfrom fasthtml.jupyter import *\n\napp, rt = fast_app(hdrs=Theme.blue.headers())\n\n@rt\ndef index():\n    temps_raw = t.getroommeasure(home_id, room.id, type='temperature')\n    sp_raw = t.getroommeasure(home_id, room.id, type='sp_temperature')\n    beg, step = temps_raw[0]['beg_time'], temps_raw[0]['step_time']\n    temps = [v[0] for v in temps_raw[0]['value']]\n    setpoints = [v[0] for v in sp_raw[0]['value']]\n    times = [datetime.fromtimestamp(beg + i*step).strftime('%m/%d %H:%M') for i in range(len(temps))]\n    return Container(\n        H1(\"Thermostat\"),\n        temp_chart(temps, setpoints, times)\n    )\n\nserver = JupyUvi(app)\nRun that, then server.start() to launch and server.stop() to stop. Does this look right to start with?\n\napp, rt = fast_app(hdrs=Theme.blue.headers())\nif 'srv' in globals(): srv.stop()\n\n\nJupyUvi?\n\n\nInit signature:\nJupyUvi(\n    app,\n    log_level='error',\n    host='0.0.0.0',\n    port=8000,\n    start=True,\n    **kwargs,\n)\nDocstring:      Start and stop a Jupyter compatible uvicorn server with ASGI `app` on `port` with `log_level`\nFile:           /usr/local/lib/python3.12/site-packages/fasthtml/jupyter.py\nType:           type\nSubclasses:     JupyUviAsync\n\n\n\n\nsrv = JupyUvi(app, port=8083)\n# srv.stop()\n\n\n@rt('/thermostat')\ndef index():\n    temps_raw = t.getroommeasure(home_id, room.id, type='temperature')\n    sp_raw = t.getroommeasure(home_id, room.id, type='sp_temperature')\n    beg, step = temps_raw[0]['beg_time'], temps_raw[0]['step_time']\n    temps = [v[0] for v in temps_raw[0]['value']]\n    setpoints = [v[0] for v in sp_raw[0]['value']]\n    times = [datetime.fromtimestamp(beg + i*step).strftime('%m/%d %H:%M') for i in range(len(temps))]\n    return Container(\n        H1(\"Thermostat\"),\n        temp_chart(temps, setpoints, times)\n    )\n\n\ndef get_preview(app): return partial(HTMX, app=app, host=None, port=None)\npreview = get_preview(app)\n\n\npreview('/thermostat')\n\n \n\n\nwhy not found?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nThe route was defined after the server started but before the app was registered with that route. Try running the route cell again, or check if itâ€™s registered:\napp.routes\nIf /thermostat isnâ€™t listed, re-run the route definition cell and then refresh the preview.\nI think itâ€™s because I already have something running on port 8080 so 8083 is not listened to\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nAh, solveitâ€™s preview probably proxies to port 8080 specifically. Try:\nsrv.stop()\nsrv = JupyUvi(app, port=8080)\nThen refresh the preview.\nwhat do you suggest? I just want the docs rendered for the thermostat class\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nAdd #| exec: false to that big import cell - itâ€™ll still show in docs but wonâ€™t run during build. The exported core.py has its own clean imports so the docs will work fine.\nwhat is the command to run locally to emulate the docs build?\n\n\nğŸ¤–ReplyğŸ¤–\nğŸ§ ğŸ§ ğŸ§ ğŸ§ ğŸ§ \nnbdev_docs\nOr to preview live:\nnbdev_preview\nthen can I add the docs folder directly instead of having the GH actions do it for me?",
    "crumbs": [
      "netatmo-energy"
    ]
  }
]