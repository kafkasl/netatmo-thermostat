<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>netatmo-energy ‚Äì netatmo-thermostat</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-afa68f23e0c5eadd7683190cbe4fc099.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="netatmo-energy ‚Äì netatmo-thermostat">
<meta property="og:description" content="A simple Python SDK for the Netatmo Energy API (thermostats).">
<meta property="og:image" content="https://kafkasl.github.io/netatmo-thermostat/00_core_files/figure-html/cell-19-output-1.png">
<meta property="og:site_name" content="netatmo-thermostat">
<meta property="og:image:height" content="413">
<meta property="og:image:width" content="543">
<meta name="twitter:title" content="netatmo-energy ‚Äì netatmo-thermostat">
<meta name="twitter:description" content="A simple Python SDK for the Netatmo Energy API (thermostats).">
<meta name="twitter:image" content="https://kafkasl.github.io/netatmo-thermostat/00_core_files/figure-html/cell-19-output-1.png">
<meta name="twitter:image-height" content="413">
<meta name="twitter:image-width" content="543">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">netatmo-thermostat</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">netatmo-energy</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">netatmo-energy</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">netatmo-energy</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#zyte-api" id="toc-zyte-api" class="nav-link active" data-scroll-target="#zyte-api">Zyte API</a></li>
  <li><a href="#thermostat-class" id="toc-thermostat-class" class="nav-link" data-scroll-target="#thermostat-class">Thermostat Class</a>
  <ul class="collapse">
  <li><a href="#thermostat" id="toc-thermostat" class="nav-link" data-scroll-target="#thermostat">Thermostat</a></li>
  <li><a href="#homes-data" id="toc-homes-data" class="nav-link" data-scroll-target="#homes-data">Homes data</a></li>
  <li><a href="#thermostat.homesdata" id="toc-thermostat.homesdata" class="nav-link" data-scroll-target="#thermostat.homesdata">Thermostat.homesdata</a></li>
  <li><a href="#home-status" id="toc-home-status" class="nav-link" data-scroll-target="#home-status">Home status</a></li>
  <li><a href="#thermostat.homestatus" id="toc-thermostat.homestatus" class="nav-link" data-scroll-target="#thermostat.homestatus">Thermostat.homestatus</a></li>
  <li><a href="#get-room-measure" id="toc-get-room-measure" class="nav-link" data-scroll-target="#get-room-measure">Get room measure</a></li>
  <li><a href="#thermostat.getroommeasure" id="toc-thermostat.getroommeasure" class="nav-link" data-scroll-target="#thermostat.getroommeasure">Thermostat.getroommeasure</a></li>
  <li><a href="#set-room-therm-point" id="toc-set-room-therm-point" class="nav-link" data-scroll-target="#set-room-therm-point">Set room therm point</a></li>
  <li><a href="#thermostat.room_temperatures" id="toc-thermostat.room_temperatures" class="nav-link" data-scroll-target="#thermostat.room_temperatures">Thermostat.room_temperatures</a></li>
  <li><a href="#thermostat.setroomthermpoint" id="toc-thermostat.setroomthermpoint" class="nav-link" data-scroll-target="#thermostat.setroomthermpoint">Thermostat.setroomthermpoint</a></li>
  <li><a href="#set-therm-mode" id="toc-set-therm-mode" class="nav-link" data-scroll-target="#set-therm-mode">Set therm mode</a></li>
  <li><a href="#thermostat.setthermmode" id="toc-thermostat.setthermmode" class="nav-link" data-scroll-target="#thermostat.setthermmode">Thermostat.setthermmode</a></li>
  <li><a href="#get-measure" id="toc-get-measure" class="nav-link" data-scroll-target="#get-measure">Get measure</a></li>
  <li><a href="#thermostat.getmeasure" id="toc-thermostat.getmeasure" class="nav-link" data-scroll-target="#thermostat.getmeasure">Thermostat.getmeasure</a></li>
  <li><a href="#create-new-home-schedule" id="toc-create-new-home-schedule" class="nav-link" data-scroll-target="#create-new-home-schedule">Create new home schedule</a></li>
  <li><a href="#thermostat.createnewhomeschedule" id="toc-thermostat.createnewhomeschedule" class="nav-link" data-scroll-target="#thermostat.createnewhomeschedule">Thermostat.createnewhomeschedule</a></li>
  <li><a href="#switch-home-schedule" id="toc-switch-home-schedule" class="nav-link" data-scroll-target="#switch-home-schedule">Switch home schedule</a></li>
  <li><a href="#thermostat.switchhomeschedule" id="toc-thermostat.switchhomeschedule" class="nav-link" data-scroll-target="#thermostat.switchhomeschedule">Thermostat.switchhomeschedule</a></li>
  <li><a href="#sync-home-schedule" id="toc-sync-home-schedule" class="nav-link" data-scroll-target="#sync-home-schedule">Sync home schedule</a></li>
  <li><a href="#thermostat.synchomeschedule" id="toc-thermostat.synchomeschedule" class="nav-link" data-scroll-target="#thermostat.synchomeschedule">Thermostat.synchomeschedule</a></li>
  </ul></li>
  <li><a href="#publishing-the-package-to-pypi" id="toc-publishing-the-package-to-pypi" class="nav-link" data-scroll-target="#publishing-the-package-to-pypi">Publishing the package to pypi</a></li>
  <li><a href="#ui" id="toc-ui" class="nav-link" data-scroll-target="#ui">UI</a>
  <ul class="collapse">
  <li><a href="#setpointdisplay" id="toc-setpointdisplay" class="nav-link" data-scroll-target="#setpointdisplay">SetpointDisplay</a></li>
  <li><a href="#controlbtn" id="toc-controlbtn" class="nav-link" data-scroll-target="#controlbtn">ControlBtn</a></li>
  <li><a href="#to_chart" id="toc-to_chart" class="nav-link" data-scroll-target="#to_chart">to_chart</a></li>
  <li><a href="#tempchart" id="toc-tempchart" class="nav-link" data-scroll-target="#tempchart">TempChart</a></li>
  <li><a href="#thermostatwidget" id="toc-thermostatwidget" class="nav-link" data-scroll-target="#thermostatwidget">ThermostatWidget</a></li>
  </ul></li>
  <li><a href="#packaging-the-thermostat-as-a-standalone-component" id="toc-packaging-the-thermostat-as-a-standalone-component" class="nav-link" data-scroll-target="#packaging-the-thermostat-as-a-standalone-component">Packaging the thermostat as a standalone component</a></li>
  <li><a href="#initialize-app" id="toc-initialize-app" class="nav-link" data-scroll-target="#initialize-app">Initialize App</a></li>
  <li><a href="#auth-sdk-setup" id="toc-auth-sdk-setup" class="nav-link" data-scroll-target="#auth-sdk-setup">Auth / SDK Setup</a></li>
  <li><a href="#components" id="toc-components" class="nav-link" data-scroll-target="#components">Components</a>
  <ul class="collapse">
  <li><a href="#setup_thermostat_widget" id="toc-setup_thermostat_widget" class="nav-link" data-scroll-target="#setup_thermostat_widget">setup_thermostat_widget</a></li>
  <li><a href="#setup_thermostat_widget-1" id="toc-setup_thermostat_widget-1" class="nav-link" data-scroll-target="#setup_thermostat_widget-1">setup_thermostat_widget</a></li>
  <li><a href="#deploy-w-plash" id="toc-deploy-w-plash" class="nav-link" data-scroll-target="#deploy-w-plash">Deploy w/ Plash</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/kafkasl/netatmo-thermostat/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">netatmo-energy</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="e8cba711" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> fastcore.<span class="bu">all</span> <span class="im">as</span> fc, matplotlib.pyplot <span class="im">as</span> plt, collections</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.common <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.jupyter <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.utils <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.xtras <span class="im">import</span> dict2obj</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> httpx <span class="im">import</span> get <span class="im">as</span> xget, post <span class="im">as</span> xpost</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> monsterui.core <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> base64 <span class="im">import</span> b64decode</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ipykernel_helper <span class="im">import</span> get_md</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> Image, display</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="494c3cac" class="cell" data-exec="false">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>load_dotenv()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>True</code></pre>
</div>
</div>
<p>Hi solveit! I am Pol, and I am working with you today! I‚Äôm an experienced Python coder and I enjoy learning new things. When writing code for me, please follow fast.ai coding style: avoid comments; place single line if/loop/etc constructs on the same line; use concise variable names where appropriate. Follow the style you will see in my messages, as we work on this dialogue together. Are you ready?</p>
<section id="reply" class="level5">
<h5 class="anchored" data-anchor-id="reply">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>Hi Pol! Yes, I‚Äôm absolutely ready to work with you! I‚Äôm familiar with the fast.ai coding style and will follow your preferences for concise, clear code without unnecessary comments. I see you‚Äôve already set up some useful imports including fastcore, which I know is central to the fast.ai approach.</p>
<p>The goal of this notebook is to set up communication with my home thermostat from the Netatmo brand. I have already created an app on their website to get API access.</p>
<p>The documentation is here: https://dev.netatmo.com/apidocumentation/general</p>
<p>The documentation pages are rendered using JS so let‚Äôs first set up Zyte so we can render those pages and access the proper docs.</p>
</section>
<section id="zyte-api" class="level2">
<h2 class="anchored" data-anchor-id="zyte-api">Zyte API</h2>
<div id="35376f0a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_page(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    url:<span class="bu">str</span>, <span class="co"># URL to fetch,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    browser_html:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Use a browser to reunder js page?</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    as_md:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Convert HTML to markdown?</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    screenshot:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Also return a screenshot?</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    timeout:<span class="bu">int</span><span class="op">=</span><span class="dv">15</span>, <span class="co"># fetch timeout in seconds</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">"Fetch a page"</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    api_key<span class="op">=</span>os.getenv(<span class="st">'ZYTE_API_KEY'</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    r <span class="op">=</span> xpost(<span class="st">"https://api.zyte.com/v1/extract"</span>, auth<span class="op">=</span>(api_key, <span class="st">""</span>), json<span class="op">=</span><span class="bu">dict</span>(url<span class="op">=</span>url, browserHtml<span class="op">=</span>browser_html, screenshot<span class="op">=</span>screenshot), timeout<span class="op">=</span>timeout)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    r.raise_for_status()</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    rj <span class="op">=</span> r.json()</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> rj[<span class="st">'statusCode'</span>] <span class="op">!=</span> <span class="dv">200</span>: <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="ss">f"Status </span><span class="sc">{</span>rj[<span class="st">'statusCode'</span>]<span class="sc">}</span><span class="ss"> for </span><span class="sc">{</span>url<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    html <span class="op">=</span> get_md(rj[<span class="st">'browserHtml'</span>]) <span class="cf">if</span> as_md <span class="cf">else</span> rj[<span class="st">'browserHtml'</span>]</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> Image(data<span class="op">=</span>b64decode(rj[<span class="st">'screenshot'</span>])) <span class="cf">if</span> screenshot <span class="kw">and</span> <span class="st">'screenshot'</span> <span class="kw">in</span> rj <span class="cf">else</span> <span class="va">None</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (html, img) <span class="cf">if</span> screenshot <span class="cf">else</span> html</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="520b0ca7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># html, img = fetch_page('https://dev.netatmo.com/apidocumentation/energy', screenshot=True)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fedfbe06" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># html[:500]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="d831483a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># img</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="thermostat-class" class="level2">
<h2 class="anchored" data-anchor-id="thermostat-class">Thermostat Class</h2>
<p><strong>Energy API endpoints</strong> for Netatmo thermostat:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>GET</td>
<td><code>/homesdata</code></td>
<td>Retrieve user‚Äôs homes and topology</td>
</tr>
<tr class="even">
<td>GET</td>
<td><code>/homestatus</code></td>
<td>Get current status of home and devices</td>
</tr>
<tr class="odd">
<td>GET</td>
<td><code>/getroommeasure</code></td>
<td>Retrieve room data history (for graphs)</td>
</tr>
<tr class="even">
<td>POST</td>
<td><code>/setroomthermpoint</code></td>
<td>Control heating of a room</td>
</tr>
<tr class="odd">
<td>POST</td>
<td><code>/setthermmode</code></td>
<td>Control home heating system</td>
</tr>
<tr class="even">
<td>GET</td>
<td><code>/getmeasure</code></td>
<td>Retrieve boiler historical data</td>
</tr>
<tr class="odd">
<td>POST</td>
<td><code>/createnewhomeschedule</code></td>
<td>Create thermostat weekly schedule</td>
</tr>
<tr class="even">
<td>POST</td>
<td><code>/synchomeschedule</code></td>
<td>Modify thermostat weekly schedule</td>
</tr>
<tr class="odd">
<td>POST</td>
<td><code>/switchhomeschedule</code></td>
<td>Apply a specific schedule</td>
</tr>
</tbody>
</table>
<p>Base domain is <code>api.netatmo.com</code> (they‚Äôre retiring <code>api.netatmo.net</code> on Sept 8, 2025).</p>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L20" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="thermostat" class="level3">
<h3 class="anchored" data-anchor-id="thermostat">Thermostat</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> Thermostat(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    client_id:NoneType<span class="op">=</span><span class="va">None</span>, client_secret:NoneType<span class="op">=</span><span class="va">None</span>, access_token:NoneType<span class="op">=</span><span class="va">None</span>, refresh_token:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Initialize self. See help(type(self)) for accurate signature.</em></p>
<div id="5af411e6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> Thermostat()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>t.client_id[:<span class="dv">10</span>]  <span class="co"># quick check</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'6952046932'</code></pre>
</div>
</div>
<div id="4fd49659" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> t._refresh()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(r)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['access_token', 'refresh_token', 'expires_in', 'expire_in', 'scope']</code></pre>
</div>
</div>
<div id="7a169cb8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dialoghelper.core <span class="im">import</span> <span class="op">*</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># tool_info()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Tools available from dialoghelper: &amp;<code>[curr_dialog, msg_idx, add_html, find_msg_id, find_msgs, read_msg, del_msg, add_msg, update_msg, msg_insert_line, msg_str_replace, msg_strs_replace, msg_replace_lines]</code></p>
</section>
<section id="homes-data" class="level3">
<h3 class="anchored" data-anchor-id="homes-data">Homes data</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L65" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.homesdata" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.homesdata">Thermostat.homesdata</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> homesdata(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="b225c2bd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> t.homesdata()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>home_id <span class="op">=</span> r.homes[<span class="dv">0</span>].<span class="bu">id</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>home_id</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'693572355b98bfc2a009b174'</code></pre>
</div>
</div>
<div id="421a64b9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>r.homes[<span class="dv">0</span>].schedules</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'timetable': [{'zone_id': 1, 'm_offset': 0}, {'zone_id': 0, 'm_offset': 480}, {'zone_id': 1, 'm_offset': 1440}, {'zone_id': 0, 'm_offset': 1920}, {'zone_id': 1, 'm_offset': 2880}, {'zone_id': 0, 'm_offset': 3360}, {'zone_id': 1, 'm_offset': 4320}, {'zone_id': 0, 'm_offset': 4800}, {'zone_id': 1, 'm_offset': 5760}, {'zone_id': 0, 'm_offset': 6240}, {'zone_id': 1, 'm_offset': 7200}, {'zone_id': 0, 'm_offset': 7740}, {'zone_id': 1, 'm_offset': 8640}, {'zone_id': 0, 'm_offset': 9180}], 'zones': [{'name': 'Night', 'id': 1, 'type': 1, 'rooms_temp': [{'room_id': '3352988001', 'temp': 21}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 21}]}, {'name': 'Comfort', 'id': 0, 'type': 0, 'rooms_temp': [{'room_id': '3352988001', 'temp': 21}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 21}]}, {'name': 'Comfort +', 'id': 3, 'type': 8, 'rooms_temp': [{'room_id': '3352988001', 'temp': 22}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 22}]}, {'name': 'Eco', 'id': 4, 'type': 5, 'rooms_temp': [{'room_id': '3352988001', 'temp': 19}], 'modules': [], 'rooms': [{'id': '3352988001', 'therm_setpoint_temperature': 19}]}], 'name': 'Temperature schedule', 'default': False, 'away_temp': 17, 'hg_temp': 7, 'id': '693572355b98bfc2a009b175', 'type': 'therm', 'selected': True}]</code></pre>
</div>
</div>
<p>We can see one schedule called ‚ÄúTemperature schedule‚Äù with:</p>
<p><strong>Zones</strong> (temperature presets): - <code>Night</code> (id 1): 21¬∞C - <code>Comfort</code> (id 0): 21¬∞C<br>
- <code>Comfort +</code> (id 3): 22¬∞C - <code>Eco</code> (id 4): 19¬∞C</p>
<p><strong>Timetable</strong> - <code>m_offset</code> is minutes from Monday 00:00: - <code>0</code> = Mon 00:00 ‚Üí zone 1 (Night) - <code>480</code> = Mon 08:00 ‚Üí zone 0 (Comfort) - <code>1440</code> = Tue 00:00 ‚Üí zone 1 (Night) - etc.</p>
<p><strong>Special temps:</strong> - <code>away_temp</code>: 17¬∞C - <code>hg_temp</code>: 7¬∞C (frost guard)</p>
<p>So it switches between Night and Comfort zones each day at midnight and 8am</p>
</section>
<section id="home-status" class="level3">
<h3 class="anchored" data-anchor-id="home-status">Home status</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L70" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.homestatus" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.homestatus">Thermostat.homestatus</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> homestatus(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    home_id</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="8bfc25ce" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> t.homestatus(home_id<span class="op">=</span>home_id)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>room <span class="op">=</span> st.home.rooms[<span class="dv">0</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>room</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>{ <span class="st">'anticipating'</span>: <span class="va">False</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'heating_power_request'</span>: <span class="dv">0</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'id'</span>: <span class="st">'3352988001'</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">'open_window'</span>: <span class="va">False</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">'reachable'</span>: <span class="va">True</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">'therm_measured_temperature'</span>: <span class="fl">21.5</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">'therm_setpoint_end_time'</span>: <span class="dv">1767809067</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">'therm_setpoint_mode'</span>: <span class="st">'manual'</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">'therm_setpoint_start_time'</span>: <span class="dv">1767805467</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">'therm_setpoint_temperature'</span>: <span class="fl">21.5</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<p>let‚Äôs do them all in order, first only getroommeasuer</p>
<section id="reply-1" class="level5">
<h5 class="anchored" data-anchor-id="reply-1">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01HunczNpfbgMrcgkYhKt9EF"</span><span class="fu">,</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"### Getroommeasure"</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_5dcdeea5'"</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01Un5xyQRYNUejKCYZCTnrYc"</span><span class="fu">,</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"@patch</span><span class="ch">\n</span><span class="st">def getroommeasure(self:Thermostat, home_id, room_id, scale='1hour', type='temperature', begin=None, end=None):</span><span class="ch">\n</span><span class="st">    return self._request('getroommeasure', data=fc.dict_filter(</span><span class="ch">\n</span><span class="st">        {'home_id': home_id, 'room_id': room_id, 'scale': scale, 'type': type, 'date_begin': begin, 'date_end': end}))"</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_3eb95a1f'"</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01VuX3fqR4a6YEAmdjv4oDWT"</span><span class="fu">,</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"t.getroommeasure(home_id, room.id)"</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_50cb2c7a'"</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! I‚Äôve added the <code>getroommeasure</code> method. Run those cells and let me know what you get back ‚Äî the <code>type</code> param can be <code>'temperature'</code> or <code>'sp_temperature'</code> (setpoint), and <code>scale</code> can be <code>'30min'</code>, <code>'1hour'</code>, <code>'3hours'</code>, <code>'1day'</code>, <code>'1week'</code>, <code>'1month'</code>.</p>
</section>
</section>
<section id="get-room-measure" class="level3">
<h3 class="anchored" data-anchor-id="get-room-measure">Get room measure</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L74" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.getroommeasure" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.getroommeasure">Thermostat.getroommeasure</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getroommeasure(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    room_id:<span class="bu">str</span>, <span class="co"># Room ID</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    scale:<span class="bu">str</span><span class="op">=</span><span class="st">'1hour'</span>, <span class="co"># Time scale: 30min, 1hour, 3hours, 1day, 1week, 1month</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">type</span>:<span class="bu">str</span><span class="op">=</span><span class="st">'temperature'</span>, <span class="co"># Data type: temperature or sp_temperature</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    begin:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Start timestamp</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    end:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># End timestamp</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Retrieve room temperature history</em></p>
<div id="50cb2c7a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> t.getroommeasure(home_id, room.<span class="bu">id</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(r)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'beg_time': 1765110600,
  'step_time': 3600,
  'value': (#749) [[22.2], [22.2], [22.1], [22], [22.1], [22.3], [22.9], [22.7], [22.3], [22], [22], [21.9], [21.3], [21.1], [21], [21], [21], [21.1], [21.3], [21.7], [22.4], [22.4], [22.3], [22.8], [22.7], [22.6], [22.3], [22], [22.3], [22.3], [22.1], [22.5], [22.3], [22.5], [22.3], [21.9], [21.6], [21.2], [21.1], [21.1], [21], [21.1], [21.2], [21.8], [22], [22.1], [22], [21.6], [21.3], [21.1], [21.1], [20.8], [20.6], [20.3], [20.1], [20], [19.8], [19.6], [19.4], [19.2], [19], [18.8], [18.6], [18.5], [18.2], [18], [17.8], [17.6], [17.5], [17.3], [17.2], [17.1], [17.1], [17.1], [17], [17], [17], [17], [16.9], [16.8], [16.8], [16.7], [16.6], [16.6], [16.5], [16.4], [16.3], [16.2], [16.1], [16], [15.9], [15.8], [15.7], [15.8], [19.5], [21.1], [21.8], [21.1], [21.1], [21.5], [21.8], [22], [22.1], [22], [22], [22.1], [22], [21.8], [21.2], [21.1], [21], [21.1], [21], [21], [21.2], [21.8], [22], [21.8], [21.4], [21], [21], [22], [22.1], [22], [22.1], [21.6], [21.2], [20.9], [20.6], [20.4], [20.1], [19.9], [19.7], [19.5], [19.3], [19.1], [19], [18.8], [18.6], [18.5], [18.4], [18.2], [18.1], [18.1], [18], [17.9], [17.9], [17.8], [17.8], [17.7], [17.6], [17.6], [17.5], [17.4], [17.3], [17.2], [17.1], [17], [16.9], [16.7], [16.6], [16.5], [16.4], [16.2], [16.1], [16], [15.9], [15.9], [15.8], [15.8], [15.8], [15.8], [15.8], [15.8], [15.7], [15.7], [15.7], [15.6], [15.6], [15.6], [15.6], [15.6], [15.6], [15.6], [15.5], [15.5], [15.5], [15.5], [15.5], [15.6], [15.6], [15.6], [15.6], [15.6], [15.6], [15.6], [15.7], [15.7], [15.7], [15.7], [15.8], [15.8], [15.8], [15.8], [15.8], [15.8], [15.8], [15.8], [15.7], [15.7], [15.6], [15.6], [15.5], [15.5], [15.5], [15.4], [15.4], [15.5], [15.5], [15.5], [15.5], [16], [16.1], [15.9], [15.9], [15.9], [15.9], [15.9], [15.8], [15.8], [15.8], [15.7], [15.6], [15.6], [15.5], [15.5], [15.5], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4], [15.4]...]}]</code></pre>
</div>
</div>
<p>let‚Äôs do a super minimal plot of the data</p>
<section id="reply-2" class="level5">
<h5 class="anchored" data-anchor-id="reply-2">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>plt.plot(r[<span class="dv">0</span>][<span class="st">'value'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="1be0b33e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plt.plot([v[<span class="dv">0</span>] <span class="cf">for</span> v <span class="kw">in</span> r[<span class="dv">0</span>][<span class="st">'value'</span>]])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="00_core_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>amazing! let‚Äôs do the next endpoint</p>
</section>
<section id="reply-3" class="level5">
<h5 class="anchored" data-anchor-id="reply-3">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01Rn74vzg44TKw4nVfbhD6hg"</span><span class="fu">,</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"### setroomthermpoint"</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_f48d7b2e'"</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01SSUKm8ojetBtSx4g3cJXcB"</span><span class="fu">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"@patch</span><span class="ch">\n</span><span class="st">def setroomthermpoint(self:Thermostat,</span><span class="ch">\n</span><span class="st">    home_id:str,   # Home ID</span><span class="ch">\n</span><span class="st">    room_id:str,   # Room ID</span><span class="ch">\n</span><span class="st">    mode:str,      # Mode: manual, home, or schedule</span><span class="ch">\n</span><span class="st">    temp:float=None,      # Target temperature (for manual mode)</span><span class="ch">\n</span><span class="st">    endtime:int=None,     # End timestamp (for manual mode)</span><span class="ch">\n</span><span class="st">):</span><span class="ch">\n</span><span class="st">    </span><span class="ch">\"</span><span class="st">Set room temperature setpoint</span><span class="ch">\"\n</span><span class="st">    d = {'home_id': home_id, 'room_id': room_id, 'mode': mode}</span><span class="ch">\n</span><span class="st">    if temp: d['temp'] = temp</span><span class="ch">\n</span><span class="st">    if endtime: d['endtime'] = endtime</span><span class="ch">\n</span><span class="st">    return self._request('setroomthermpoint', data=d)"</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_f2a8da99'"</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_014hxrqjtoCkPhe39bHg6yr8"</span><span class="fu">,</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"# Example: set room to 20</span><span class="ch">\u00b0</span><span class="st">C for 1 hour</span><span class="ch">\n</span><span class="st"># t.setroomthermpoint(home_id, room.id, mode='manual', temp=20, endtime=int(time.time())+3600)"</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_f1dd2356'"</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! I commented out the example since it would actually change your thermostat. Run the first cell to add the method, then you can test it when ready. Next up is <code>setthermmode</code>?</p>
<p>maybe let‚Äôs first get the therm point so then we can actually set and unset it to make sure this works</p>
</section>
<section id="reply-4" class="level5">
<h5 class="anchored" data-anchor-id="reply-4">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>You already have the setpoint from <code>homestatus</code> ‚Äî check <code>room</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>room.therm_setpoint_temperature, room.therm_setpoint_mode</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>That will show current temp and mode. Then you can set it, call <code>homestatus</code> again, and verify it changed.</p>
</section>
</section>
<section id="set-room-therm-point" class="level3">
<h3 class="anchored" data-anchor-id="set-room-therm-point">Set room therm point</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L104" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.room_temperatures" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.room_temperatures">Thermostat.room_temperatures</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> room_temperatures(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Nicer way to get a list of the temperatures of all room in the home</em></p>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L90" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.setroomthermpoint" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.setroomthermpoint">Thermostat.setroomthermpoint</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setroomthermpoint(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    room_id:<span class="bu">str</span>, <span class="co"># Room ID</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    mode:<span class="bu">str</span>, <span class="co"># Mode: manual, home, or schedule</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    temp:<span class="bu">float</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Target temperature (for manual mode)</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    endtime:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># End timestamp (for manual mode)</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Set room temperature setpoint</em></p>
<div id="626caf78" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's check the thermp point before setting it</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>t.room_temperatures(home_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'room_id': '3352988001',
  'temperature': 21.5,
  'setpoint': 21.5,
  'setpoint_mode': 'manual'}]</code></pre>
</div>
</div>
<div id="f1dd2356" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: set room to 20¬∞C for 1 hour</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>t.setroomthermpoint(home_id, room.<span class="bu">id</span>, mode<span class="op">=</span><span class="st">'manual'</span>, temp<span class="op">=</span><span class="dv">20</span>, endtime<span class="op">=</span><span class="bu">int</span>(time())<span class="op">+</span><span class="dv">3600</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>{<span class="st">'status'</span>: <span class="st">'ok'</span>, <span class="st">'time_server'</span>: <span class="dv">1767805670</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="d7fd8145" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>t.room_temperatures(home_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'room_id': '3352988001',
  'temperature': 21.5,
  'setpoint': 20,
  'setpoint_mode': 'manual'}]</code></pre>
</div>
</div>
<p>We can see the thermostat was turned on, let‚Äôs turn it off again below</p>
<div id="501a73f6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>t.setroomthermpoint(home_id, room.<span class="bu">id</span>, mode<span class="op">=</span><span class="st">'off'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>{<span class="st">'status'</span>: <span class="st">'ok'</span>, <span class="st">'time_server'</span>: <span class="dv">1767805671</span>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div id="2077b327" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>t.room_temperatures(home_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'room_id': '3352988001',
  'temperature': 21.5,
  'setpoint': 0,
  'setpoint_mode': 'off'}]</code></pre>
</div>
</div>
<p>amazing! let‚Äôs do another method</p>
<section id="reply-5" class="level5">
<h5 class="anchored" data-anchor-id="reply-5">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01XDjLFWZHzxkWjqjH6jk2zx"</span><span class="fu">,</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"### setthermmode"</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_be102f56'"</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_017ts9PKjZtrtTrBa548vWcr"</span><span class="fu">,</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"@patch</span><span class="ch">\n</span><span class="st">def setthermmode(self:Thermostat,</span><span class="ch">\n</span><span class="st">    home_id:str,   # Home ID</span><span class="ch">\n</span><span class="st">    mode:str,      # Mode: schedule, away, hg (frost guard)</span><span class="ch">\n</span><span class="st">    endtime:int=None,  # End timestamp (for away/hg modes)</span><span class="ch">\n</span><span class="st">):</span><span class="ch">\n</span><span class="st">    </span><span class="ch">\"</span><span class="st">Set home thermostat mode</span><span class="ch">\"\n</span><span class="st">    d = {'home_id': home_id, 'mode': mode}</span><span class="ch">\n</span><span class="st">    if endtime: d['endtime'] = endtime</span><span class="ch">\n</span><span class="st">    return self._request('setthermmode', data=d)"</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_e51c0227'"</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01GemP1TdjJUNwwGxTtBJ22q"</span><span class="fu">,</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"# t.setthermmode(home_id, mode='schedule')"</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_ce3bf4ca'"</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! Modes are <code>schedule</code> (follow weekly schedule), <code>away</code> (away mode), and <code>hg</code> (frost guard/minimum temp). Next is <code>getmeasure</code> for boiler history?</p>
</section>
</section>
<section id="set-therm-mode" class="level3">
<h3 class="anchored" data-anchor-id="set-therm-mode">Set therm mode</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L111" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.setthermmode" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.setthermmode">Thermostat.setthermmode</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setthermmode(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    mode:<span class="bu">str</span>, <span class="co"># Mode: schedule (weekly program), away (reduced temp), hg (frost guard ~7¬∞C)</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    endtime:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># End timestamp (for away/hg modes)</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Set home thermostat mode</em></p>
<p>I think it would be good to document a bit more the schedule modes, should we add the info after the markdown header? or in the method docstring or docments? wdyt?</p>
<section id="reply-6" class="level5">
<h5 class="anchored" data-anchor-id="reply-6">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>I‚Äôd suggest in the docments (the parameter comments) since that‚Äôs where you already have the pattern and it keeps info close to the code. Something like:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>mode:<span class="bu">str</span>,      <span class="co"># Mode: schedule (weekly), away (reduced temp), hg (frost guard ~7¬∞C)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Or if you want more detail, a short note after the header works too. What‚Äôs your preference?</p>
<p>docments sounds good! do it for me please!</p>
</section>
<section id="reply-7" class="level5">
<h5 class="anchored" data-anchor-id="reply-7">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_015oE9j2k2QJjddhRMibEcMv"</span><span class="fu">,</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"msg_str_replace"</span><span class="fu">,</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msgid"</span><span class="fu">:</span> <span class="st">"_e51c0227"</span><span class="fu">,</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"old_str"</span><span class="fu">:</span> <span class="st">"mode:str,      # Mode: schedule, away, hg (frost guard)"</span><span class="fu">,</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"new_str"</span><span class="fu">:</span> <span class="st">"mode:str,      # Mode: schedule (weekly program), away (reduced temp), hg (frost guard ~7</span><span class="ch">\u00b0</span><span class="st">C)"</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"{'success': 'Replaced text in message _e51c0227'}"</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! Updated the <code>mode</code> docment with more detail.</p>
<div id="ce3bf4ca" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t.setthermmode(home_id, mode='schedule')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="93e92b7a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>t.room_temperatures(home_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'room_id': '3352988001',
  'temperature': 21.5,
  'setpoint': 0,
  'setpoint_mode': 'off'}]</code></pre>
</div>
</div>
<p>is this what we expect after setting the mode to schedule?</p>
</section>
<section id="reply-8" class="level5">
<h5 class="anchored" data-anchor-id="reply-8">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Yes, this looks correct! <code>setthermmode</code> sets the <em>home‚Äôs</em> operating mode to follow the schedule, but the schedule itself currently has your room set to ‚Äúoff‚Äù at this time of day. So the room‚Äôs <code>setpoint_mode: 'off'</code> is what the schedule dictates right now.</p>
<p>If you had heating periods defined in your weekly schedule, the room would show <code>setpoint_mode: 'schedule'</code> with a target temperature during those times.</p>
<p>can you explain this a bit in a note so users reading my notebook will get it?</p>
</section>
<section id="reply-9" class="level5">
<h5 class="anchored" data-anchor-id="reply-9">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01KyVTw3dm44x9wNpWxtDya4"</span><span class="fu">,</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"**Note:** `setthermmode` controls the *home's* operating mode (schedule/away/hg), not individual room setpoints. When set to `schedule`, each room follows its weekly program</span><span class="ch">\u2014</span><span class="st">so a room showing `setpoint_mode: 'off'` means the schedule has it off at that time. During scheduled heating periods, it would show `setpoint_mode: 'schedule'` with a target temperature."</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_42759b01'"</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! Want to continue with <code>getmeasure</code> next?</p>
<p><strong>Note:</strong> <code>setthermmode</code> controls the <em>home‚Äôs</em> operating mode (schedule/away/hg), not individual room setpoints. When set to <code>schedule</code>, each room follows its weekly program‚Äîso a room showing <code>setpoint_mode: 'off'</code> means the schedule has it off at that time. During scheduled heating periods, it would show <code>setpoint_mode: 'schedule'</code> with a target temperature.</p>
</section>
</section>
<section id="get-measure" class="level3">
<h3 class="anchored" data-anchor-id="get-measure">Get measure</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L123" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.getmeasure" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.getmeasure">Thermostat.getmeasure</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> getmeasure(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    device_id:<span class="bu">str</span>, <span class="co"># Device MAC address</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    module_id:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Module MAC (if reading from a module)</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    scale:<span class="bu">str</span><span class="op">=</span><span class="st">'1hour'</span>, <span class="co"># Time scale: 30min, 1hour, 3hours, 1day, 1week, 1month</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">type</span>:<span class="bu">str</span><span class="op">=</span><span class="st">'boileron'</span>, <span class="co"># Data type: boileron, boileroff, sum_boiler_on, sum_boiler_off</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    begin:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Start timestamp</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    end:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># End timestamp</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Retrieve boiler historical data</em></p>
<div id="a2d5601c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get device_id from homesdata</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> t.homesdata()</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>device_id <span class="op">=</span> r.homes[<span class="dv">0</span>].modules[<span class="dv">0</span>].<span class="bu">id</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>m <span class="op">=</span> t.getmeasure(device_id)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(m)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'beg_time': 1765110600,
  'step_time': 3600,
  'value': (#749) [[{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}], [{}]...]}]</code></pre>
</div>
</div>
<p>I don‚Äôt have a boiler device so the data is None</p>
<p>I assumed it‚Äôs none because I have no boiler, but then I actually have a device_id, what‚Äôs that?</p>
<section id="reply-10" class="level5">
<h5 class="anchored" data-anchor-id="reply-10">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Good question! The <code>device_id</code> is likely your thermostat or relay module, not a boiler. Try checking what modules you have:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>[(m.<span class="bu">id</span>, m.<span class="bu">type</span>, m.get(<span class="st">'name'</span>, <span class="st">''</span>)) <span class="cf">for</span> m <span class="kw">in</span> r.homes[<span class="dv">0</span>].modules]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This will show you what devices are registered. The <code>getmeasure</code> endpoint specifically tracks boiler on/off times, which requires a compatible boiler controller module to report that data.</p>
<div id="1f46b058" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>[(m.<span class="bu">type</span>, m.get(<span class="st">'name'</span>, <span class="st">''</span>)) <span class="cf">for</span> m <span class="kw">in</span> r.homes[<span class="dv">0</span>].modules]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[('NAPlug', 'Termostato'), ('NATherm1', 'Thermostat')]</code></pre>
</div>
</div>
<p>.</p>
</section>
<section id="reply-11" class="level5">
<h5 class="anchored" data-anchor-id="reply-11">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>You have: - <strong>NAPlug</strong> - the relay that controls heating on/off - <strong>NATherm1</strong> - the thermostat that measures temperature and sends commands</p>
<p>The <code>getmeasure</code> boiler data likely returns <code>None</code> because your relay isn‚Äôt logging boiler cycles, or your heating system doesn‚Äôt report that info. This is normal for many setups.</p>
<p>Ready for the next endpoint? We have <code>createnewhomeschedule</code>, <code>synchomeschedule</code>, and <code>switchhomeschedule</code> left.</p>
</section>
</section>
<section id="create-new-home-schedule" class="level3">
<h3 class="anchored" data-anchor-id="create-new-home-schedule">Create new home schedule</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L140" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.createnewhomeschedule" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.createnewhomeschedule">Thermostat.createnewhomeschedule</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> createnewhomeschedule(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span>, <span class="co"># New schedule name</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    zones:<span class="bu">list</span>, <span class="co"># List of zone dicts with id, name, type, rooms_temp</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    timetable:<span class="bu">list</span>, <span class="co"># List of timetable entries with zone_id, m_offset</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    hg_temp:<span class="bu">float</span><span class="op">=</span><span class="dv">7</span>, <span class="co"># Frost guard temp</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    away_temp:<span class="bu">float</span><span class="op">=</span><span class="dv">17</span>, <span class="co"># Away mode temp</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a new weekly schedule</em></p>
</section>
<section id="switch-home-schedule" class="level3">
<h3 class="anchored" data-anchor-id="switch-home-schedule">Switch home schedule</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L155" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.switchhomeschedule" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.switchhomeschedule">Thermostat.switchhomeschedule</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> switchhomeschedule(</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    schedule_id:<span class="bu">str</span>, <span class="co"># Schedule ID to activate</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Switch to a specific weekly schedule</em></p>
</section>
<section id="sync-home-schedule" class="level3">
<h3 class="anchored" data-anchor-id="sync-home-schedule">Sync home schedule</h3>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L164" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostat.synchomeschedule" class="level3">
<h3 class="anchored" data-anchor-id="thermostat.synchomeschedule">Thermostat.synchomeschedule</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> synchomeschedule(</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    home_id:<span class="bu">str</span>, <span class="co"># Home ID</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    schedule_id:<span class="bu">str</span>, <span class="co"># Schedule ID to modify</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    zones:<span class="bu">list</span>, <span class="co"># List of zone dicts with id, name, type, rooms_temp</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    timetable:<span class="bu">list</span>, <span class="co"># List of timetable entries with zone_id, m_offset</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Schedule name</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    hg_temp:<span class="bu">float</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Frost guard temp</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    away_temp:<span class="bu">float</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Away mode temp</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Modify an existing weekly schedule</em></p>
</section>
</section>
<section id="publishing-the-package-to-pypi" class="level2">
<h2 class="anchored" data-anchor-id="publishing-the-package-to-pypi">Publishing the package to pypi</h2>
<p>is our SDK only for thermostats? I‚Äôm planning to make it publicly available and I‚Äôm wondering what the github repo name and description should be to make it easily discoverable</p>
<section id="reply-12" class="level5">
<h5 class="anchored" data-anchor-id="reply-12">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Currently yes ‚Äî we‚Äôve only implemented the Energy API endpoints (thermostats/heating). Netatmo also has APIs for: - <strong>Weather</strong> - weather stations, rain gauges - <strong>Security</strong> - cameras, smoke detectors - <strong>Aircare</strong> - air quality monitors</p>
<p>Naming options: 1. <strong>Thermostat-specific</strong>: <code>netatmo-thermostat</code>, <code>netatmo-energy-py</code> ‚Äî clear but limited scope 2. <strong>Expandable</strong>: <code>netatmo-py</code>, <code>python-netatmo</code> ‚Äî room to grow if you add other products later</p>
<p>For discoverability, I‚Äôd suggest <code>netatmo-py</code> or <code>netatmo-api-python</code> with a description like ‚ÄúPython SDK for Netatmo APIs (Energy/Thermostat)‚Äù ‚Äî accurate now but leaves room to expand.</p>
<p>What‚Äôs your preference?</p>
<p>yes create a basic README explaining how to use it. Consider that we will export all the important class methods into a .py file to be used</p>
</section>
<section id="reply-13" class="level5">
<h5 class="anchored" data-anchor-id="reply-13">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01T5Z7MdaZ3af1ibUnAVreXH"</span><span class="fu">,</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"# netatmo-energy</span><span class="ch">\n\n</span><span class="st">A simple Python SDK for the Netatmo Energy API (thermostats).</span><span class="ch">\n\n</span><span class="st">## Setup</span><span class="ch">\n\n</span><span class="st">1. Create an app at [dev.netatmo.com](https://dev.netatmo.com) to get your API credentials</span><span class="ch">\n</span><span class="st">2. Create a `.env` file:</span><span class="ch">\n</span><span class="st">```</span><span class="ch">\n</span><span class="st">CLIENT_ID=your_client_id</span><span class="ch">\n</span><span class="st">CLIENT_SECRET=your_client_secret</span><span class="ch">\n</span><span class="st">ACCESS_TOKEN=your_access_token</span><span class="ch">\n</span><span class="st">REFRESH_TOKEN=your_refresh_token</span><span class="ch">\n</span><span class="st">```</span><span class="ch">\n\n</span><span class="st">## Usage</span><span class="ch">\n\n</span><span class="st">```python</span><span class="ch">\n</span><span class="st">from netatmo import Thermostat</span><span class="ch">\n\n</span><span class="st">t = Thermostat()</span><span class="ch">\n</span><span class="st">homes = t.homesdata()</span><span class="ch">\n</span><span class="st">home_id = homes.homes[0].id</span><span class="ch">\n\n</span><span class="st"># Get current status</span><span class="ch">\n</span><span class="st">t.room_temperatures(home_id)</span><span class="ch">\n\n</span><span class="st"># Set room to 20</span><span class="ch">\u00b0</span><span class="st">C for 1 hour</span><span class="ch">\n</span><span class="st">t.setroomthermpoint(home_id, room_id, mode='manual', temp=20,&lt;TRUNCATED&gt;"</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_0bcdb02f'"</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! Take a look and let me know if you want any changes ‚Äî I can adjust the tone, add more detail to any section, or link to Karpathy‚Äôs actual tweet URL if you have it.</p>
<p>I just cloned the repo into our current working dir, I think the easiest to publish it is to set it up as an nbdev project, could you help with that?</p>
</section>
<section id="reply-14" class="level5">
<h5 class="anchored" data-anchor-id="reply-14">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Sure! Let‚Äôs see what‚Äôs in the repo first:</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01Mvo1jSv5gsRE7Xr6fh1WKU"</span><span class="fu">,</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"."</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Directory contents of /app/data/netatmo-thermostat:</span><span class="ch">\\</span><span class="st">n/app/data/netatmo-thermostat/thermostat-netatmo.ipynb</span><span class="ch">\\</span><span class="st">n/app/data/netatmo-thermostat/netatmo-thermostat</span><span class="ch">\\</span><span class="st">n/app/data/netatmo-thermostat/thermostat_netatmo.py</span><span class="ch">\\</span><span class="st">n/app/data/netatmo-thermostat/LICENSE'"</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Got it. To set up nbdev, you‚Äôll need:</p>
<ol type="1">
<li><code>settings.ini</code> - project config</li>
<li><code>nbs/</code> folder for notebooks (or rename your existing one)</li>
<li>Run <code>nbdev_new</code> or create the config manually</li>
</ol>
<p>Want me to create a minimal <code>settings.ini</code> for you, or would you prefer to run <code>nbdev_new</code> and configure interactively?</p>
<p>I already ran <code>nbdev_new</code> what next?</p>
</section>
<section id="reply-15" class="level5">
<h5 class="anchored" data-anchor-id="reply-15">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb67"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01En4683Nf9ArbRVut5Dfzvc"</span><span class="fu">,</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"."</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Directory contents of /app/&lt;TRUNCATED&gt;"</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Good, nbdev scaffolding is there. Next steps:</p>
<ol type="1">
<li>Move your <a href="https://kafkasl.github.io/netatmo-thermostat/core.html#thermostat"><code>Thermostat</code></a> code into <code>nbs/00_core.ipynb</code> with <code>#| export</code> directives</li>
<li>Update <code>nbs/index.ipynb</code> with your README content</li>
<li>Run <code>nbdev_export</code> to generate <code>netatmo_thermostat/core.py</code></li>
</ol>
<p>Want me to show you what the <code>#| export</code> cells should look like, or do you want to set that up yourself?</p>
<p>I marked the important cells for export already, can you now add at the top the nbdev header &amp; explanation that usually begins with # default_exp ‚Ä¶</p>
</section>
<section id="reply-16" class="level5">
<h5 class="anchored" data-anchor-id="reply-16">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01L7yd9a4SYQvzkHV9qPNyA2"</span><span class="fu">,</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"nbs/00_core.ipynb"</span><span class="fu">,</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"view_range"</span><span class="fu">:</span> <span class="st">"[1, 30]"</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Error: File not found: /app/data/netatmo-thermostat/nbs/nbs/00_core.ipynb'"</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb69"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01XTLkEHUyCvsD7ydHk3D8KV"</span><span class="fu">,</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"nbs"</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Error: File not found: /app/data/netatmo-thermostat/nbs/nbs'"</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb70"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01QmyU9icrqTChnZckbbRc9B"</span><span class="fu">,</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"netatmo-thermostat"</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Error: File not found: /app/data/netatmo-thermostat/nbs/netatmo-thermostat'"</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb71"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_013GpeNz2ahBHX8kRBdRx47f"</span><span class="fu">,</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/app/data/netatmo-thermostat"</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Directory contents of /app/&lt;TRUNCATED&gt;"</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb72"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01X1b3h9t6ALwFm44q8o5B3y"</span><span class="fu">,</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/app/data/netatmo-thermostat/nbs/00_core.ipynb"</span><span class="fu">,</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"view_range"</span><span class="fu">:</span> <span class="st">"[1, 40]"</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'{</span><span class="ch">\\</span><span class="st">n </span><span class="ch">\"</span><span class="st">cells</span><span class="ch">\"</span><span class="st">: [</span><span class="ch">\\</span><span class="st">n  {</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">cell_type</span><span class="ch">\"</span><span class="st">: </span><span class="ch">\"</span><span class="st">code</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">execution_count</span><span class="ch">\"</span><span class="st">: null,</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">id</span><span class="ch">\"</span><span class="st">: </span><span class="ch">\"</span><span class="st">e8cba711</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">metadata</span><span class="ch">\"</span><span class="st">: {</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">time_run</span><span class="ch">\"</span><span class="st">: </span><span class="ch">\"</span><span class="st">2025-12-30T05:25:29.557629+00:00</span><span class="ch">\"\\</span><span class="st">n   },</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">outputs</span><span class="ch">\"</span><span class="st">: [],</span><span class="ch">\\</span><span class="st">n   </span><span class="ch">\"</span><span class="st">source</span><span class="ch">\"</span><span class="st">: [</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from fastcore.utils import *</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">import fastcore.all as fc, re, math, itertools, functools, numpy as np, types, typing, dataclasses, matplotlib.pyplot as plt, collections, regex</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from fastcore.xtras import dict2obj</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from regex import search</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from collections import Counter</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from collections.abc import Iterable</span><span class="ch">\\\\</span><span class="st">n</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\"</span><span class="st">from httpx impo&lt;TRUNCATED&gt;"</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>I see the notebook already has <code>#| export</code> directives. The standard nbdev header goes at the very top. I‚Äôll add a new first cell with <code>#| default_exp core</code>:</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01NWX5Y6WyQEJmoGzNF46T3o"</span><span class="fu">,</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"insert"</span><span class="fu">,</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/app/data/netatmo-thermostat/nbs/00_core.ipynb"</span><span class="fu">,</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"insert_line"</span><span class="fu">:</span> <span class="st">"2"</span><span class="fu">,</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"new_str"</span><span class="fu">:</span> <span class="st">"{</span><span class="ch">\n</span><span class="st">   </span><span class="ch">\"</span><span class="st">cell_type</span><span class="ch">\"</span><span class="st">: </span><span class="ch">\"</span><span class="st">code</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\n</span><span class="st">   </span><span class="ch">\"</span><span class="st">execution_count</span><span class="ch">\"</span><span class="st">: null,</span><span class="ch">\n</span><span class="st">   </span><span class="ch">\"</span><span class="st">metadata</span><span class="ch">\"</span><span class="st">: {},</span><span class="ch">\n</span><span class="st">   </span><span class="ch">\"</span><span class="st">outputs</span><span class="ch">\"</span><span class="st">: [],</span><span class="ch">\n</span><span class="st">   </span><span class="ch">\"</span><span class="st">source</span><span class="ch">\"</span><span class="st">: [</span><span class="ch">\"</span><span class="st">#| default_exp core</span><span class="ch">\"</span><span class="st">]</span><span class="ch">\n</span><span class="st">  },"</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'Inserted text at line 2 in /app/data/netatmo-thermostat/nbs/00_core.ipynb'"</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! Added <code>#| default_exp core</code> as the first cell. Now <code>nbdev_export</code> will know to export marked cells to <code>netatmo_thermostat/core.py</code>.</p>
<p>great! I created the reamde with the appropriate content, anything left before pushing &amp; publishing?</p>
</section>
<section id="reply-17" class="level5">
<h5 class="anchored" data-anchor-id="reply-17">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Quick checklist:</p>
<ol type="1">
<li><strong>Run <code>nbdev_export</code></strong> to generate the <code>.py</code> files</li>
<li><strong>Run <code>nbdev_clean</code></strong> to clean notebook metadata</li>
<li><strong>Check <code>settings.ini</code></strong> has correct: <code>lib_name</code>, <code>version</code>, <code>description</code>, <code>author</code>, <code>keywords</code></li>
<li><strong>Test import</strong>: <code>from netatmo_thermostat.core import Thermostat</code></li>
</ol>
<p>If those look good, you‚Äôre ready to push and <code>nbdev_pypi</code>!</p>
<p>can you check the .py file to see if the imports I exported are correct and sufficient and whether settings.ini needs some package dependencies added?</p>
</section>
<section id="reply-18" class="level5">
<h5 class="anchored" data-anchor-id="reply-18">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb74"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_018acryaUaLZZEofKtARKtuw"</span><span class="fu">,</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/app/data/netatmo-thermostat/netatmo_thermostat/core.py"</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/00_core.ipynb.</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n# %% auto 0</span><span class="ch">\\</span><span class="st">n__all__ = [</span><span class="ch">\\</span><span class="st">'Thermostat</span><span class="ch">\\</span><span class="st">']</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n# %% ../nbs/00_core.ipynb 2</span><span class="ch">\\</span><span class="st">nimport os</span><span class="ch">\\</span><span class="st">nfrom time import time</span><span class="ch">\\</span><span class="st">nfrom fastcore.utils import patch</span><span class="ch">\\</span><span class="st">nfrom fastcore.xtras import dict2obj</span><span class="ch">\\</span><span class="st">nfrom httpx import get as xget, post as xpost</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n# %% ../nbs/00_core.ipynb 15</span><span class="ch">\\</span><span class="st">nclass Thermostat:</span><span class="ch">\\</span><span class="st">n    base = </span><span class="ch">\\</span><span class="st">'https://api.netatmo.com</span><span class="ch">\\</span><span class="st">'</span><span class="ch">\\</span><span class="st">n    </span><span class="ch">\\</span><span class="st">n    def __init__(self):</span><span class="ch">\\</span><span class="st">n        self.client_id = os.getenv(</span><span class="ch">\\</span><span class="st">'CLIENT_ID</span><span class="ch">\\</span><span class="st">')</span><span class="ch">\\</span><span class="st">n        self.client_secret = os.getenv(</span><span class="ch">\\</span><span class="st">'CLIENT_SECRET</span><span class="ch">\\</span><span class="st">')</span><span class="ch">\\</span><span class="st">n        self.access_token = os.getenv(</span><span class="ch">\\</span><span class="st">'ACCESS_TOKEN</span><span class="ch">\\</span><span class="st">')</span><span class="ch">\\</span><span class="st">n        self.refre&lt;TRUNCATED&gt;"</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<details class="tool-usage-details">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb75"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_013h6SPMxkjmSa1Db4LY8Hjh"</span><span class="fu">,</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"view"</span><span class="fu">,</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/app/data/netatmo-thermostat/settings.ini"</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'[DEFAULT]</span><span class="ch">\\</span><span class="st">n# All sections below are required unless otherwise specified.</span><span class="ch">\\</span><span class="st">n# See https://github.com/AnswerDotAI/nbdev/blob/main/settings.ini for examples.</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n### Python library ###</span><span class="ch">\\</span><span class="st">nrepo = netatmo-thermostat</span><span class="ch">\\</span><span class="st">nlib_name = %(repo)s</span><span class="ch">\\</span><span class="st">nversion = 0.0.1</span><span class="ch">\\</span><span class="st">nmin_python = 3.9</span><span class="ch">\\</span><span class="st">nlicense = apache2</span><span class="ch">\\</span><span class="st">nblack_formatting = False</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n### nbdev ###</span><span class="ch">\\</span><span class="st">ndoc_path = _docs</span><span class="ch">\\</span><span class="st">nlib_path = netatmo_thermostat</span><span class="ch">\\</span><span class="st">nnbs_path = nbs</span><span class="ch">\\</span><span class="st">nrecursive = True</span><span class="ch">\\</span><span class="st">ntst_flags = notest</span><span class="ch">\\</span><span class="st">nput_version_in_init = True</span><span class="ch">\\</span><span class="st">nupdate_pyproject = True</span><span class="ch">\\</span><span class="st">n</span><span class="ch">\\</span><span class="st">n### Docs ###</span><span class="ch">\\</span><span class="st">nbranch = main</span><span class="ch">\\</span><span class="st">ncustom_sidebar = False</span><span class="ch">\\</span><span class="st">ndoc_host = https://%(user)s.github.io</span><span class="ch">\\</span><span class="st">ndoc_baseurl = /%(repo)s&lt;TRUNCATED&gt;"</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Looks good! The imports use: - <code>fastcore</code> (for <code>patch</code>, <code>dict2obj</code>) - <code>httpx</code> (for API calls)</p>
<p>Your <code>settings.ini</code> already has <code>requirements = fastcore httpx</code> ‚úÖ</p>
<p>One thing missing: <code>getroommeasure</code> ‚Äî I don‚Äôt see it in the exported file. Did you mark that cell for export?</p>
<p>what is the <code>_proc</code> folder?</p>
</section>
<section id="reply-19" class="level5">
<h5 class="anchored" data-anchor-id="reply-19">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>The <code>_proc</code> folder is created by nbdev to store processed versions of your notebooks during builds. It‚Äôs used internally by nbdev for things like:</p>
<ul>
<li>Running tests</li>
<li>Building docs</li>
<li>Checking for issues</li>
</ul>
<p>You can safely add it to <code>.gitignore</code> ‚Äî it‚Äôs generated automatically and doesn‚Äôt need to be tracked in version control.</p>
</section>
</section>
<section id="ui" class="level2">
<h2 class="anchored" data-anchor-id="ui">UI</h2>
<div id="fcd3deb5" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize App</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>app, rt <span class="op">=</span> fast_app(hdrs<span class="op">=</span>(</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    Theme.blue.headers(apex_charts<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Script(src="https://cdn.jsdelivr.net/npm/apexcharts"),</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    Script(src<span class="op">=</span><span class="st">"https://cdn.tailwindcss.com"</span>),</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    Link(href<span class="op">=</span><span class="st">"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;family=Outfit:wght@300;400;600&amp;display=swap"</span>, rel<span class="op">=</span><span class="st">"stylesheet"</span>),</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    Script(<span class="st">"""</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="st">        tailwind.config = {</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="st">            theme: {</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="st">                extend: {</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="st">                    fontFamily: {</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        sans: ['Inter', 'sans-serif'],</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="st">                        display: ['Outfit', 'sans-serif'],</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="st">                    },</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="st">                    colors: {</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a><span class="st">                        'temp-real': '#00b894',</span></span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="st">                        'temp-set': '#e17055',</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="st">                        'solar-prod': '#fdcb6e',</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a><span class="st">                        'solar-cons': '#ff7675',</span></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a><span class="st">                        'card-bg': 'rgba(255, 255, 255, 0.85)',</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a><span class="st">                    },</span></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a><span class="st">                    boxShadow: {</span></span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a><span class="st">                        'soft': '0 20px 40px rgba(0, 0, 0, 0.03)',</span></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a><span class="st">                    }</span></span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a><span class="st">                }</span></span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a><span class="st">    """</span>)</span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="a7044429" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>srv <span class="op">=</span> JupyUvi(app)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="co"># srv.stop()</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="53d46e6e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_preview(app): <span class="cf">return</span> partial(HTMX, app<span class="op">=</span>app, host<span class="op">=</span><span class="va">None</span>, port<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>preview <span class="op">=</span> get_preview(app)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>can you compare the data <code>getroommeasure</code> returns vs the one we need to chart it?</p>
<section id="reply-20" class="level5">
<h5 class="anchored" data-anchor-id="reply-20">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p><strong><code>getroommeasure</code> returns:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>[{<span class="st">'beg_time'</span>: <span class="dv">1765110600</span>,</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">'step_time'</span>: <span class="dv">3600</span>,</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">'value'</span>: [[<span class="fl">22.2</span>], [<span class="fl">22.1</span>], [<span class="fl">22.0</span>], ...]}]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>ApexChart needs (datetime x-axis):</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>[[<span class="dv">1765110600000</span>, <span class="fl">22.2</span>], [<span class="dv">1765114200000</span>, <span class="fl">22.1</span>], ...]  <span class="co"># [timestamp_ms, value]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Transform needed:</strong> 1. Unwrap <code>[[v]]</code> ‚Üí <code>v</code> 2. Calculate <code>ts = beg_time + i * step_time</code> 3. Convert to ms (<code>* 1000</code>) 4. Pair as <code>[ts_ms, value]</code></p>
<p>Should we add a helper method that does this transform, or keep it as a separate utility function?</p>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L191" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="setpointdisplay" class="level3">
<h3 class="anchored" data-anchor-id="setpointdisplay">SetpointDisplay</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> SetpointDisplay(</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    temp</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L181" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="controlbtn" class="level3">
<h3 class="anchored" data-anchor-id="controlbtn">ControlBtn</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ControlBtn(</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    text, change, current_temp, kwargs:VAR_KEYWORD</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="269080fd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setpoint(change: <span class="bu">float</span>, current_setpoint: <span class="bu">float</span>):</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    new_temp <span class="op">=</span> <span class="bu">round</span>(current_setpoint <span class="op">+</span> change, <span class="dv">1</span>)</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    t.setroomthermpoint(home_id, room.<span class="bu">id</span>, mode<span class="op">=</span><span class="st">'manual'</span>, temp<span class="op">=</span>new_temp, endtime<span class="op">=</span><span class="bu">int</span>(time())<span class="op">+</span><span class="dv">3600</span>)</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>        SetpointDisplay(new_temp),</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>        ControlBtn(<span class="st">"‚àí"</span>, <span class="op">-</span><span class="fl">0.5</span>, new_temp, <span class="bu">id</span><span class="op">=</span><span class="st">"btn-minus"</span>, hx_swap_oob<span class="op">=</span><span class="st">"true"</span>),</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>        ControlBtn(<span class="st">"+"</span>, <span class="fl">0.5</span>, new_temp, <span class="bu">id</span><span class="op">=</span><span class="st">"btn-plus"</span>, hx_swap_oob<span class="op">=</span><span class="st">"true"</span>)</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="9d9f4b24" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>preview(setpoint(<span class="op">-</span><span class="fl">0.5</span>, <span class="dv">22</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<iframe srcdoc=" <!doctype html>
 <html>
   <head>
     <title>FastHTML page</title>
     <link rel=&quot;canonical&quot; href=&quot;https://testserver/_1UMuiR3iTUGwFxqfPVMgdQ&quot;>
     <meta charset=&quot;utf-8&quot;>
     <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, viewport-fit=cover&quot;>
<script src=&quot;https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/answerdotai/fasthtml-js@1.0.12/fasthtml.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/answerdotai/surreal@main/surreal.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/gnat/css-scope-inline@main/script.js&quot;></script>     <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/css/core.min.css&quot;>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/core.iife.js&quot;></script><script src=&quot;https://cdn.tailwindcss.com/3.4.17&quot;></script><script>
    tailwind.config = {
        darkMode: 'selector',
    }
    </script><script>
        const htmlElement = document.documentElement;
        
          
          const __FRANKEN__ = JSON.parse(localStorage.getItem(&quot;__FRANKEN__&quot;) || &quot;{}&quot;);
    
          if (
            __FRANKEN__.mode === &quot;dark&quot; ||
            (!__FRANKEN__.mode &amp;&amp;
              window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;).matches)
          ) {
            htmlElement.classList.add(&quot;dark&quot;);
          } else {
            htmlElement.classList.remove(&quot;dark&quot;);
          }
        
          htmlElement.classList.add(__FRANKEN__.theme || &quot;uk-theme-blue&quot;);
          htmlElement.classList.add(__FRANKEN__.radii || &quot;uk-radii-sm&quot;);
          htmlElement.classList.add(__FRANKEN__.shadows || &quot;uk-shadows-sm&quot;);
          htmlElement.classList.add(__FRANKEN__.font || &quot;uk-font-sm&quot;);
    </script>     <style>
.monster-navbar.navbar-bold a {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.monster-navbar.navbar-bold a.uk-active {
    transform: scale(1.15) ;
    font-weight: bold;
    text-shadow: 0 0 12px rgba(var(--p-rgb), 0.4);
    letter-spacing: 0.02em;
    color: hsl(var(--p) / 1);
}
.monster-navbar.navbar-underline a.uk-active { position: relative; }
.monster-navbar.navbar-underline a.uk-active::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 100%;
    height: 2px;
    background: currentColor;
    animation: slideIn 0.3s ease forwards;
}
@keyframes slideIn {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
}
</style>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/icon.iife.js&quot;></script>     <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/daisyui@4.12.24/dist/full.min.css&quot;>
     <style>
:root {
  --b1: from hsl(var(--background)) l c h;
  --bc: from hsl(var(--foreground)) l c h;
  --m: from hsl(var(--muted)) l c h;
  --mc: from hsl(var(--muted-foreground)) l c h;
  --po: from hsl(var(--popover)) l c h;
  --poc: from hsl(var(--popover-foreground)) l c h;
  --b2: from hsl(var(--card)) l c h;
  --b2c: from hsl(var(--card-foreground)) l c h;
  --br: from hsl(var(--border)) l c h;
  --in: from hsl(var(--input)) l c h;
  --p: from hsl(var(--primary)) l c h;
  --pc: from hsl(var(--primary-foreground)) l c h;
  --s: from hsl(var(--secondary)) l c h;
  --sc: from hsl(var(--secondary-foreground)) l c h;
  --a: from hsl(var(--accent)) l c h;
  --ac: from hsl(var(--accent-foreground)) l c h;
  --er: from hsl(var(--destructive)) l c h;
  --erc: from hsl(var(--destructive-foreground)) l c h;
  --b3: from hsl(var(--ring)) l c h;
  --ch1: from hsl(var(--chart-1)) l c h;
  --ch2: from hsl(var(--chart-2)) l c h;
  --ch3: from hsl(var(--chart-3)) l c h;
  --ch4: from hsl(var(--chart-4)) l c h;
  --ch5: from hsl(var(--chart-5)) l c h;
  --rd: var(--radius);
}
</style>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/chart.iife.js&quot;></script><script src=&quot;https://cdn.tailwindcss.com&quot;></script>     <link href=&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;amp;family=Outfit:wght@300;400;600&amp;amp;display=swap&quot; rel=&quot;stylesheet&quot;>
<script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        'temp-real': '#00b894',
                        'temp-set': '#e17055',
                        'solar-prod': '#fdcb6e',
                        'solar-cons': '#ff7675',
                        'card-bg': 'rgba(255, 255, 255, 0.85)',
                    },
                    boxShadow: {
                        'soft': '0 20px 40px rgba(0, 0, 0, 0.03)',
                    }
                }
            }
        }
    </script><script>
    function sendmsg() {
        window.parent.postMessage({height: document.documentElement.offsetHeight}, '*');
    }
    window.onload = function() {
        sendmsg();
        document.body.addEventListener('htmx:afterSettle',    sendmsg);
        document.body.addEventListener('htmx:wsAfterMessage', sendmsg);
    };</script>   </head>
   <body class=&quot; bg-background text-foreground&quot;>
<span id=&quot;setpoint-display&quot; class=&quot;text-slate-500 font-medium text-base&quot;>Target <span class=&quot;text-temp-set font-semibold&quot;>21.5¬∞</span></span><button hx-post=&quot;/setpoint&quot; hx-swap=&quot;outerHTML&quot; hx-swap-oob=&quot;true&quot; type=&quot;submit&quot; hx-vals='{&quot;change&quot;: -0.5, &quot;current_setpoint&quot;: 21.5}' hx-target=&quot;#setpoint-display&quot; id=&quot;btn-minus&quot; class=&quot;uk-btn w-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer&quot; name=&quot;btn-minus&quot;>‚àí</button><button hx-post=&quot;/setpoint&quot; hx-swap=&quot;outerHTML&quot; hx-swap-oob=&quot;true&quot; type=&quot;submit&quot; hx-vals='{&quot;change&quot;: 0.5, &quot;current_setpoint&quot;: 21.5}' hx-target=&quot;#setpoint-display&quot; id=&quot;btn-plus&quot; class=&quot;uk-btn w-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer&quot; name=&quot;btn-plus&quot;>+</button>   </body>
 </html>
" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.source !== frame.contentWindow) return; // Only proceed if the message is from this iframe
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 
</div>
</div>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L199" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="to_chart" class="level3">
<h3 class="anchored" data-anchor-id="to_chart">to_chart</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> to_chart(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    raw</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="a5d3b5b8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> t.getroommeasure(home_id, room.<span class="bu">id</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span>(r[<span class="dv">0</span>]), r[<span class="dv">0</span>][<span class="st">'value'</span>][:<span class="dv">3</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>(['beg_time', 'step_time', 'value'], [[22.2], [22.2], [22.1]])</code></pre>
</div>
</div>
<div id="c3930123" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>to_chart(r)[:<span class="dv">3</span>]  <span class="co"># [[timestamp_ms, temp], ...]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[[1765110600000, 22.2], [1765114200000, 22.2], [1765117800000, 22.1]]</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L204" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="tempchart" class="level3">
<h3 class="anchored" data-anchor-id="tempchart">TempChart</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> TempChart(</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    temps_raw, sp_raw</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="9d666d49" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>traw <span class="op">=</span> t.getroommeasure(home_id, room.<span class="bu">id</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'temperature'</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>spraw <span class="op">=</span> t.getroommeasure(home_id, room.<span class="bu">id</span>, <span class="bu">type</span><span class="op">=</span><span class="st">'sp_temperature'</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>TempChart(traw, spraw)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div class=""><uk-chart><script type="application/json">{"chart": {"type": "area", "height": 150, "sparkline": {"enabled": true}}, "series": [{"name": "Temp", "data": [[1765110600000, 22.2], [1765114200000, 22.2], [1765117800000, 22.1], [1765121400000, 22], [1765125000000, 22.1], [1765128600000, 22.3], [1765132200000, 22.9], [1765135800000, 22.7], [1765139400000, 22.3], [1765143000000, 22], [1765146600000, 22], [1765150200000, 21.9], [1765153800000, 21.3], [1765157400000, 21.1], [1765161000000, 21], [1765164600000, 21], [1765168200000, 21], [1765171800000, 21.1], [1765175400000, 21.3], [1765179000000, 21.7], [1765182600000, 22.4], [1765186200000, 22.4], [1765189800000, 22.3], [1765193400000, 22.8], [1765197000000, 22.7], [1765200600000, 22.6], [1765204200000, 22.3], [1765207800000, 22], [1765211400000, 22.3], [1765215000000, 22.3], [1765218600000, 22.1], [1765222200000, 22.5], [1765225800000, 22.3], [1765229400000, 22.5], [1765233000000, 22.3], [1765236600000, 21.9], [1765240200000, 21.6], [1765243800000, 21.2], [1765247400000, 21.1], [1765251000000, 21.1], [1765254600000, 21], [1765258200000, 21.1], [1765261800000, 21.2], [1765265400000, 21.8], [1765269000000, 22], [1765272600000, 22.1], [1765276200000, 22], [1765279800000, 21.6], [1765283400000, 21.3], [1765287000000, 21.1], [1765290600000, 21.1], [1765294200000, 20.8], [1765297800000, 20.6], [1765301400000, 20.3], [1765305000000, 20.1], [1765308600000, 20], [1765312200000, 19.8], [1765315800000, 19.6], [1765319400000, 19.4], [1765323000000, 19.2], [1765326600000, 19], [1765330200000, 18.8], [1765333800000, 18.6], [1765337400000, 18.5], [1765341000000, 18.2], [1765344600000, 18], [1765348200000, 17.8], [1765351800000, 17.6], [1765355400000, 17.5], [1765359000000, 17.3], [1765362600000, 17.2], [1765366200000, 17.1], [1765369800000, 17.1], [1765373400000, 17.1], [1765377000000, 17], [1765380600000, 17], [1765384200000, 17], [1765387800000, 17], [1765391400000, 16.9], [1765395000000, 16.8], [1765398600000, 16.8], [1765402200000, 16.7], [1765405800000, 16.6], [1765409400000, 16.6], [1765413000000, 16.5], [1765416600000, 16.4], [1765420200000, 16.3], [1765423800000, 16.2], [1765427400000, 16.1], [1765431000000, 16], [1765434600000, 15.9], [1765438200000, 15.8], [1765441800000, 15.7], [1765445400000, 15.8], [1765449000000, 19.5], [1765452600000, 21.1], [1765456200000, 21.8], [1765459800000, 21.1], [1765463400000, 21.1], [1765467000000, 21.5], [1765470600000, 21.8], [1765474200000, 22], [1765477800000, 22.1], [1765481400000, 22], [1765485000000, 22], [1765488600000, 22.1], [1765492200000, 22], [1765495800000, 21.8], [1765499400000, 21.2], [1765503000000, 21.1], [1765506600000, 21], [1765510200000, 21.1], [1765513800000, 21], [1765517400000, 21], [1765521000000, 21.2], [1765524600000, 21.8], [1765528200000, 22], [1765531800000, 21.8], [1765535400000, 21.4], [1765539000000, 21], [1765542600000, 21], [1765546200000, 22], [1765549800000, 22.1], [1765553400000, 22], [1765557000000, 22.1], [1765560600000, 21.6], [1765564200000, 21.2], [1765567800000, 20.9], [1765571400000, 20.6], [1765575000000, 20.4], [1765578600000, 20.1], [1765582200000, 19.9], [1765585800000, 19.7], [1765589400000, 19.5], [1765593000000, 19.3], [1765596600000, 19.1], [1765600200000, 19], [1765603800000, 18.8], [1765607400000, 18.6], [1765611000000, 18.5], [1765614600000, 18.4], [1765618200000, 18.2], [1765621800000, 18.1], [1765625400000, 18.1], [1765629000000, 18], [1765632600000, 17.9], [1765636200000, 17.9], [1765639800000, 17.8], [1765643400000, 17.8], [1765647000000, 17.7], [1765650600000, 17.6], [1765654200000, 17.6], [1765657800000, 17.5], [1765661400000, 17.4], [1765665000000, 17.3], [1765668600000, 17.2], [1765672200000, 17.1], [1765675800000, 17], [1765679400000, 16.9], [1765683000000, 16.7], [1765686600000, 16.6], [1765690200000, 16.5], [1765693800000, 16.4], [1765697400000, 16.2], [1765701000000, 16.1], [1765704600000, 16], [1765708200000, 15.9], [1765711800000, 15.9], [1765715400000, 15.8], [1765719000000, 15.8], [1765722600000, 15.8], [1765726200000, 15.8], [1765729800000, 15.8], [1765733400000, 15.8], [1765737000000, 15.7], [1765740600000, 15.7], [1765744200000, 15.7], [1765747800000, 15.6], [1765751400000, 15.6], [1765755000000, 15.6], [1765758600000, 15.6], [1765762200000, 15.6], [1765765800000, 15.6], [1765769400000, 15.6], [1765773000000, 15.5], [1765776600000, 15.5], [1765780200000, 15.5], [1765783800000, 15.5], [1765787400000, 15.5], [1765791000000, 15.6], [1765794600000, 15.6], [1765798200000, 15.6], [1765801800000, 15.6], [1765805400000, 15.6], [1765809000000, 15.6], [1765812600000, 15.6], [1765816200000, 15.7], [1765819800000, 15.7], [1765823400000, 15.7], [1765827000000, 15.7], [1765830600000, 15.8], [1765834200000, 15.8], [1765837800000, 15.8], [1765841400000, 15.8], [1765845000000, 15.8], [1765848600000, 15.8], [1765852200000, 15.8], [1765855800000, 15.8], [1765859400000, 15.7], [1765863000000, 15.7], [1765866600000, 15.6], [1765870200000, 15.6], [1765873800000, 15.5], [1765877400000, 15.5], [1765881000000, 15.5], [1765884600000, 15.4], [1765888200000, 15.4], [1765891800000, 15.5], [1765895400000, 15.5], [1765899000000, 15.5], [1765902600000, 15.5], [1765906200000, 16], [1765909800000, 16.1], [1765913400000, 15.9], [1765917000000, 15.9], [1765920600000, 15.9], [1765924200000, 15.9], [1765927800000, 15.9], [1765931400000, 15.8], [1765935000000, 15.8], [1765938600000, 15.8], [1765942200000, 15.7], [1765945800000, 15.6], [1765949400000, 15.6], [1765953000000, 15.5], [1765956600000, 15.5], [1765960200000, 15.5], [1765963800000, 15.4], [1765967400000, 15.4], [1765971000000, 15.4], [1765974600000, 15.4], [1765978200000, 15.4], [1765981800000, 15.4], [1765985400000, 15.4], [1765989000000, 15.4], [1765992600000, 15.4], [1765996200000, 15.4], [1765999800000, 15.4], [1766003400000, 15.4], [1766007000000, 15.4], [1766010600000, 15.4], [1766014200000, 15.3], [1766017800000, 15.3], [1766021400000, 15.2], [1766025000000, 15.1], [1766028600000, 15], [1766032200000, 15], [1766035800000, 14.9], [1766039400000, 14.9], [1766043000000, 14.8], [1766046600000, 14.7], [1766050200000, 14.9], [1766053800000, 16.2], [1766057400000, 17.1], [1766061000000, 17.9], [1766064600000, 18.8], [1766068200000, 19.7], [1766071800000, 20.4], [1766075400000, 20.8], [1766079000000, 21.1], [1766082600000, 21.4], [1766086200000, 21.3], [1766089800000, 21.4], [1766093400000, 22.1], [1766097000000, 22], [1766100600000, 21.9], [1766104200000, 21.9], [1766107800000, 22.6], [1766111400000, 22.4], [1766115000000, 22.6], [1766118600000, 22.1], [1766122200000, 21.6], [1766125800000, 21.2], [1766129400000, 20.9], [1766133000000, 21.3], [1766136600000, 20.9], [1766140200000, 21.4], [1766143800000, 21.4], [1766147400000, 20.9], [1766151000000, 21.3], [1766154600000, 21.3], [1766158200000, 21.3], [1766161800000, 22.4], [1766165400000, 23.2], [1766169000000, 23.3], [1766172600000, 22.8], [1766176200000, 22.6], [1766179800000, 22.6], [1766183400000, 22.7], [1766187000000, 22.4], [1766190600000, 22.2], [1766194200000, 22], [1766197800000, 22], [1766201400000, 21.8], [1766205000000, 21.6], [1766208600000, 21.4], [1766212200000, 21.2], [1766215800000, 21.1], [1766219400000, 20.9], [1766223000000, 21.8], [1766226600000, 22.1], [1766230200000, 21.6], [1766233800000, 21.5], [1766237400000, 21.7], [1766241000000, 21.6], [1766244600000, 21.5], [1766248200000, 21.4], [1766251800000, 21.9], [1766255400000, 21.9], [1766259000000, 21.9], [1766262600000, 21.7], [1766266200000, 21.5], [1766269800000, 21.5], [1766273400000, 21.5], [1766277000000, 21.4], [1766280600000, 21.2], [1766284200000, 21.1], [1766287800000, 21.2], [1766291400000, 21.2], [1766295000000, 21.3], [1766298600000, 21.5], [1766302200000, 21.8], [1766305800000, 22.3], [1766309400000, 21.9], [1766313000000, 22.2], [1766316600000, 22.1], [1766320200000, 21.8], [1766323800000, 21.8], [1766327400000, 21.6], [1766331000000, 21.3], [1766334600000, 21.4], [1766338200000, 21.6], [1766341800000, 21.8], [1766345400000, 21.9], [1766349000000, 21.8], [1766352600000, 21.6], [1766356200000, 21.4], [1766359800000, 21.3], [1766363400000, 21.5], [1766367000000, 21.7], [1766370600000, 21.6], [1766374200000, 21.9], [1766377800000, 21.8], [1766381400000, 21.6], [1766385000000, 21.3], [1766388600000, 21], [1766392200000, 21.1], [1766395800000, 21.3], [1766399400000, 21.4], [1766403000000, 21.3], [1766406600000, 21.2], [1766410200000, 21.5], [1766413800000, 22.2], [1766417400000, 21.9], [1766421000000, 22.2], [1766424600000, 21.8], [1766428200000, 21.7], [1766431800000, 21.7], [1766435400000, 22.1], [1766439000000, 22], [1766442600000, 22], [1766446200000, 21.5], [1766449800000, 21.1], [1766453400000, 20.9], [1766457000000, 20.9], [1766460600000, 21.5], [1766464200000, 21.2], [1766467800000, 21.1], [1766471400000, 21], [1766475000000, 20.9], [1766478600000, 21.3], [1766482200000, 21], [1766485800000, 21.1], [1766489400000, 21.1], [1766493000000, 21.1], [1766496600000, 21], [1766500200000, 21.6], [1766503800000, 22.1], [1766507400000, 21.7], [1766511000000, 21.4], [1766514600000, 21.5], [1766518200000, 21.3], [1766521800000, 21], [1766525400000, 21.2], [1766529000000, 21.1], [1766532600000, 21], [1766536200000, 21.6], [1766539800000, 21.6], [1766543400000, 21.6], [1766547000000, 21.6], [1766550600000, 21.2], [1766554200000, 21], [1766557800000, 21.3], [1766561400000, 20.9], [1766565000000, 21.2], [1766568600000, 20.9], [1766572200000, 21.3], [1766575800000, 21], [1766579400000, 21.3], [1766583000000, 21.3], [1766586600000, 21.4], [1766590200000, 22.2], [1766593800000, 21.9], [1766597400000, 22.4], [1766601000000, 22], [1766604600000, 21.7], [1766608200000, 21.6], [1766611800000, 21.4], [1766615400000, 21.1], [1766619000000, 21], [1766622600000, 21.1], [1766626200000, 21.3], [1766629800000, 20.9], [1766633400000, 21.3], [1766637000000, 21], [1766640600000, 21.2], [1766644200000, 21], [1766647800000, 21.2], [1766651400000, 21], [1766655000000, 21.4], [1766658600000, 21.4], [1766662200000, 21.8], [1766665800000, 21.5], [1766669400000, 21.3], [1766673000000, 21.1], [1766676600000, 20.9], [1766680200000, 21.2], [1766683800000, 21.2], [1766687400000, 21.8], [1766691000000, 21.5], [1766694600000, 22.1], [1766698200000, 22], [1766701800000, 22.2], [1766705400000, 21.9], [1766709000000, 21.6], [1766712600000, 21.5], [1766716200000, 21.3], [1766719800000, 21.2], [1766723400000, 21.1], [1766727000000, 20.9], [1766730600000, 21.2], [1766734200000, 21.3], [1766737800000, 21], [1766741400000, 21.2], [1766745000000, 21.5], [1766748600000, 21.3], [1766752200000, 21], [1766755800000, 21.1], [1766759400000, 21.3], [1766763000000, 22], [1766766600000, 22], [1766770200000, 21.9], [1766773800000, 21.4], [1766777400000, 21.7], [1766781000000, 22.4], [1766784600000, 22.2], [1766788200000, 22.1], [1766791800000, 21.8], [1766795400000, 21.6], [1766799000000, 21.5], [1766802600000, 21.6], [1766806200000, 21.6], [1766809800000, 21.3], [1766813400000, 21], [1766817000000, 21.2], [1766820600000, 21.4], [1766824200000, 21.1], [1766827800000, 21], [1766831400000, 21], [1766835000000, 21.4], [1766838600000, 22.3], [1766842200000, 22.3], [1766845800000, 22], [1766849400000, 21.7], [1766853000000, 21.7], [1766856600000, 21.8], [1766860200000, 21.7], [1766863800000, 21.6], [1766867400000, 21.5], [1766871000000, 21.1], [1766874600000, 21.8], [1766878200000, 21.6], [1766881800000, 21.5], [1766885400000, 21.3], [1766889000000, 21.4], [1766892600000, 21.4], [1766896200000, 21.3], [1766899800000, 21.3], [1766903400000, 21.2], [1766907000000, 21], [1766910600000, 21.2], [1766914200000, 21.1], [1766917800000, 21.1], [1766921400000, 21], [1766925000000, 21.4], [1766928600000, 21.3], [1766932200000, 21.2], [1766935800000, 21.1], [1766939400000, 21.1], [1766943000000, 21.3], [1766946600000, 21.5], [1766950200000, 21.4], [1766953800000, 21.1], [1766957400000, 20.9], [1766961000000, 21.3], [1766964600000, 21.5], [1766968200000, 21.3], [1766971800000, 21.2], [1766975400000, 21], [1766979000000, 21.5], [1766982600000, 21.8], [1766986200000, 21.5], [1766989800000, 21.8], [1766993400000, 21.4], [1766997000000, 21.2], [1767000600000, 20.9], [1767004200000, 21.3], [1767007800000, 21], [1767011400000, 21.2], [1767015000000, 21.5], [1767018600000, 21], [1767022200000, 21.5], [1767025800000, 22.1], [1767029400000, 22], [1767033000000, 21.9], [1767036600000, 21.3], [1767040200000, 20.8], [1767043800000, 20.5], [1767047400000, 20.2], [1767051000000, 19.9], [1767054600000, 19.6], [1767058200000, 19.3], [1767061800000, 19], [1767065400000, 18.8], [1767069000000, 18.5], [1767072600000, 18.3], [1767076200000, 18], [1767079800000, 17.8], [1767083400000, 17.6], [1767087000000, 17.3], [1767090600000, 17.3], [1767094200000, 17.2], [1767097800000, 17.1], [1767101400000, 17], [1767105000000, 16.9], [1767108600000, 16.8], [1767112200000, 16.7], [1767115800000, 16.6], [1767119400000, 16.5], [1767123000000, 16.4], [1767126600000, 16.3], [1767130200000, 16.1], [1767133800000, 16], [1767137400000, 15.9], [1767141000000, 15.8], [1767144600000, 15.6], [1767148200000, 15.5], [1767151800000, 15.4], [1767155400000, 15.3], [1767159000000, 15.2], [1767162600000, 15.1], [1767166200000, 15], [1767169800000, 14.9], [1767173400000, 14.8], [1767177000000, 14.7], [1767180600000, 14.7], [1767184200000, 14.6], [1767187800000, 14.6], [1767191400000, 14.6], [1767195000000, 14.6], [1767198600000, 14.5], [1767202200000, 14.5], [1767205800000, 14.4], [1767209400000, 14.4], [1767213000000, 14.3], [1767216600000, 14.1], [1767220200000, 14], [1767223800000, 14], [1767227400000, 13.9], [1767231000000, 13.8], [1767234600000, 13.6], [1767238200000, 13.7], [1767241800000, 13.6], [1767245400000, 13.5], [1767249000000, 13.3], [1767252600000, 13.2], [1767256200000, 13.1], [1767259800000, 13], [1767263400000, 13.1], [1767267000000, 13], [1767270600000, 13], [1767274200000, 13], [1767277800000, 13], [1767281400000, 13], [1767285000000, 13], [1767288600000, 13], [1767292200000, 13.4], [1767295800000, 17.2], [1767299400000, 18.5], [1767303000000, 18.5], [1767306600000, 19.1], [1767310200000, 19.6], [1767313800000, 20.2], [1767317400000, 20.7], [1767321000000, 21.3], [1767324600000, 21.6], [1767328200000, 21.5], [1767331800000, 21.3], [1767335400000, 21], [1767339000000, 21.2], [1767342600000, 21.3], [1767346200000, 21.5], [1767349800000, 21.4], [1767353400000, 21.3], [1767357000000, 21.7], [1767360600000, 21.5], [1767364200000, 21.8], [1767367800000, 22.1], [1767371400000, 22], [1767375000000, 21.5], [1767378600000, 21.1], [1767382200000, 21], [1767385800000, 21.3], [1767389400000, 21], [1767393000000, 21.3], [1767396600000, 20.9], [1767400200000, 21.3], [1767403800000, 21], [1767407400000, 21.3], [1767411000000, 21], [1767414600000, 21.1], [1767418200000, 21.3], [1767421800000, 21.1], [1767425400000, 21.2], [1767429000000, 20.9], [1767432600000, 21.2], [1767436200000, 20.9], [1767439800000, 21.4], [1767443400000, 21], [1767447000000, 20.9], [1767450600000, 21.3], [1767454200000, 21], [1767457800000, 21.3], [1767461400000, 21.6], [1767465000000, 21.7], [1767468600000, 21.6], [1767472200000, 21.6], [1767475800000, 21.6], [1767479400000, 21.8], [1767483000000, 21.5], [1767486600000, 21.8], [1767490200000, 21.4], [1767493800000, 20.9], [1767497400000, 21.4], [1767501000000, 21], [1767504600000, 21.5], [1767508200000, 21], [1767511800000, 21.2], [1767515400000, 21], [1767519000000, 21.3], [1767522600000, 21.6], [1767526200000, 21.6], [1767529800000, 21.3], [1767533400000, 21.2], [1767537000000, 21.6], [1767540600000, 21.5], [1767544200000, 21.7], [1767547800000, 21.2], [1767551400000, 21.3], [1767555000000, 21.7], [1767558600000, 21.6], [1767562200000, 21.6], [1767565800000, 21.1], [1767569400000, 21.2], [1767573000000, 21], [1767576600000, 21.7], [1767580200000, 21.5], [1767583800000, 21.8], [1767587400000, 21.3], [1767591000000, 20.8], [1767594600000, 21.2], [1767598200000, 21], [1767601800000, 21.1], [1767605400000, 21.2], [1767609000000, 21], [1767612600000, 21.2], [1767616200000, 21], [1767619800000, 21.2], [1767623400000, 21.5], [1767627000000, 21.4], [1767630600000, 20.9], [1767634200000, 21.5], [1767637800000, 21.4], [1767641400000, 21.5], [1767645000000, 21.7], [1767648600000, 21.6], [1767652200000, 21.3], [1767655800000, 21], [1767659400000, 21.4], [1767663000000, 21], [1767666600000, 21.4], [1767670200000, 21.5], [1767673800000, 21.5], [1767677400000, 21], [1767681000000, 21.3], [1767684600000, 21], [1767688200000, 21.6], [1767691800000, 21.3], [1767695400000, 21.6], [1767699000000, 21.1], [1767702600000, 21.2], [1767706200000, 21.1], [1767709800000, 21.1], [1767713400000, 21.4], [1767717000000, 21.5], [1767720600000, 21.2], [1767724200000, 21.2], [1767727800000, 21.2], [1767731400000, 21], [1767735000000, 21.4], [1767738600000, 21], [1767742200000, 21.2], [1767745800000, 21], [1767749400000, 20.9], [1767753000000, 21.7], [1767756600000, 21.3], [1767760200000, 21], [1767763800000, 21.4], [1767767400000, 21.4], [1767771000000, 21.5], [1767774600000, 21.2], [1767778200000, 21.2], [1767781800000, 21], [1767785400000, 21], [1767789000000, 21.3], [1767792600000, 21], [1767796200000, 21.3], [1767799800000, 21.6], [1767803400000, 21.7]]}, {"name": "Setpoint", "data": [[1765110600000, 21], [1765114200000, 18.8], [1765117800000, 22], [1765121400000, 22.1], [1765125000000, 22], [1765128600000, 22.5], [1765132200000, 22.1], [1765135800000, 22], [1765139400000, 22], [1765143000000, 22], [1765146600000, 22], [1765150200000, 21], [1765153800000, 21], [1765157400000, 21], [1765161000000, 21], [1765164600000, 21], [1765168200000, 21], [1765171800000, 21.4], [1765175400000, 22], [1765179000000, 22], [1765182600000, 22], [1765186200000, 22], [1765189800000, 22.1], [1765193400000, 22.5], [1765197000000, 22.3], [1765200600000, 22], [1765204200000, 22], [1765207800000, 21.9], [1765211400000, 21.5], [1765215000000, 21.5], [1765218600000, 21.8], [1765222200000, 22.5], [1765225800000, 22.5], [1765229400000, 22.4], [1765233000000, 22], [1765236600000, 21], [1765240200000, 21], [1765243800000, 21], [1765247400000, 21], [1765251000000, 21], [1765254600000, 21], [1765258200000, 21], [1765261800000, 21.5], [1765265400000, 22], [1765269000000, 22], [1765272600000, 22], [1765276200000, 21.1], [1765279800000, 20.5], [1765283400000, 20.5], [1765287000000, 21.3], [1765290600000, 21.5], [1765294200000, 21.5], [1765297800000, 21.7], [1765301400000, 22], [1765305000000, 22], [1765308600000, 22], [1765312200000, 22], [1765315800000, 22], [1765319400000, 22], [1765323000000, 21], [1765326600000, 21], [1765330200000, 21], [1765333800000, 21], [1765337400000, 21], [1765341000000, 21], [1765344600000, 21], [1765348200000, 21.4], [1765351800000, 22], [1765355400000, 22], [1765359000000, 22], [1765362600000, 22], [1765366200000, 22], [1765369800000, 22], [1765373400000, 22], [1765377000000, 22], [1765380600000, 22], [1765384200000, 22], [1765387800000, 22], [1765391400000, 22], [1765395000000, 22], [1765398600000, 22], [1765402200000, 22], [1765405800000, 22], [1765409400000, 21], [1765413000000, 21], [1765416600000, 21], [1765420200000, 21], [1765423800000, 21], [1765427400000, 21], [1765431000000, 21], [1765434600000, 21.5], [1765438200000, 22], [1765441800000, 22], [1765445400000, 22], [1765449000000, 22], [1765452600000, 22], [1765456200000, 22], [1765459800000, 22], [1765463400000, 22], [1765467000000, 22], [1765470600000, 22], [1765474200000, 22], [1765477800000, 22], [1765481400000, 22], [1765485000000, 22], [1765488600000, 22], [1765492200000, 22], [1765495800000, 21], [1765499400000, 21], [1765503000000, 21], [1765506600000, 21], [1765510200000, 21], [1765513800000, 21], [1765517400000, 21], [1765521000000, 21.4], [1765524600000, 22], [1765528200000, 22], [1765531800000, 20.9], [1765535400000, 20.5], [1765539000000, 20.5], [1765542600000, 21.6], [1765546200000, 22], [1765549800000, 22], [1765553400000, 22], [1765557000000, 22], [1765560600000, 22], [1765564200000, 22], [1765567800000, 22], [1765571400000, 22], [1765575000000, 22], [1765578600000, 22], [1765582200000, 21], [1765585800000, 21], [1765589400000, 21], [1765593000000, 21], [1765596600000, 21], [1765600200000, 21], [1765603800000, 21], [1765607400000, 21], [1765611000000, 21.5], [1765614600000, 22], [1765618200000, 22], [1765621800000, 22], [1765625400000, 22], [1765629000000, 22], [1765632600000, 22], [1765636200000, 22], [1765639800000, 22], [1765643400000, 22], [1765647000000, 22], [1765650600000, 22], [1765654200000, 22], [1765657800000, 22], [1765661400000, 22], [1765665000000, 22], [1765668600000, 21], [1765672200000, 21], [1765675800000, 21], [1765679400000, 21], [1765683000000, 21], [1765686600000, 21], [1765690200000, 21.9], [1765693800000, 22], [1765697400000, 22], [1765701000000, 22], [1765704600000, 22], [1765708200000, 22], [1765711800000, 22], [1765715400000, 22], [1765719000000, 22], [1765722600000, 22], [1765726200000, 22], [1765729800000, 22], [1765733400000, 22], [1765737000000, 22], [1765740600000, 22], [1765744200000, 22], [1765747800000, 22], [1765751400000, 22], [1765755000000, 21.1], [1765758600000, 21], [1765762200000, 21], [1765765800000, 21], [1765769400000, 21], [1765773000000, 21.9], [1765776600000, 22], [1765780200000, 22], [1765783800000, 22], [1765787400000, 22], [1765791000000, 22], [1765794600000, 22], [1765798200000, 22], [1765801800000, 22], [1765805400000, 22], [1765809000000, 22], [1765812600000, 22], [1765816200000, 22], [1765819800000, 22], [1765823400000, 22], [1765827000000, 22], [1765830600000, 22], [1765834200000, 22], [1765837800000, 22], [1765841400000, 21], [1765845000000, 21], [1765848600000, 21], [1765852200000, 21], [1765855800000, 21], [1765859400000, 21.9], [1765863000000, 22], [1765866600000, 22], [1765870200000, 22], [1765873800000, 22], [1765877400000, 22], [1765881000000, 22], [1765884600000, 22], [1765888200000, 22], [1765891800000, 22], [1765895400000, 22], [1765899000000, 22], [1765902600000, 22], [1765906200000, 4.9], [1765909800000, 0], [1765913400000, 0], [1765917000000, 0], [1765920600000, 0], [1765924200000, 0], [1765927800000, 0], [1765931400000, 0], [1765935000000, 0], [1765938600000, 0], [1765942200000, 0], [1765945800000, 0], [1765949400000, 0], [1765953000000, 0], [1765956600000, 0], [1765960200000, 0], [1765963800000, 0], [1765967400000, 0], [1765971000000, 0], [1765974600000, 0], [1765978200000, 0], [1765981800000, 0], [1765985400000, 0], [1765989000000, 0], [1765992600000, 0], [1765996200000, 0], [1765999800000, 0], [1766003400000, 0], [1766007000000, 0], [1766010600000, 0], [1766014200000, 0], [1766017800000, 0], [1766021400000, 0], [1766025000000, 0], [1766028600000, 0], [1766032200000, 0], [1766035800000, 0], [1766039400000, 0], [1766043000000, 0], [1766046600000, 0], [1766050200000, 18], [1766053800000, 21], [1766057400000, 21], [1766061000000, 21], [1766064600000, 21], [1766068200000, 21], [1766071800000, 21], [1766075400000, 21], [1766079000000, 21.7], [1766082600000, 21.5], [1766086200000, 21.1], [1766089800000, 22], [1766093400000, 22], [1766097000000, 21.9], [1766100600000, 21], [1766104200000, 21.8], [1766107800000, 22.5], [1766111400000, 22.5], [1766115000000, 21.9], [1766118600000, 21], [1766122200000, 21], [1766125800000, 21], [1766129400000, 21], [1766133000000, 21], [1766136600000, 21.2], [1766140200000, 21.3], [1766143800000, 21], [1766147400000, 21], [1766151000000, 21], [1766154600000, 21], [1766158200000, 22.6], [1766161800000, 23.5], [1766165400000, 23.5], [1766169000000, 21.2], [1766172600000, 21], [1766176200000, 21], [1766179800000, 21], [1766183400000, 21], [1766187000000, 21], [1766190600000, 21], [1766194200000, 21], [1766197800000, 21], [1766201400000, 21], [1766205000000, 21], [1766208600000, 21], [1766212200000, 21], [1766215800000, 21], [1766219400000, 21.7], [1766223000000, 22], [1766226600000, 21.3], [1766230200000, 21], [1766233800000, 21], [1766237400000, 21], [1766241000000, 21], [1766244600000, 21], [1766248200000, 21.2], [1766251800000, 21.5], [1766255400000, 21.5], [1766259000000, 21.3], [1766262600000, 21], [1766266200000, 21], [1766269800000, 21], [1766273400000, 21], [1766277000000, 21], [1766280600000, 21], [1766284200000, 21], [1766287800000, 21], [1766291400000, 21], [1766295000000, 21], [1766298600000, 21], [1766302200000, 21.9], [1766305800000, 22], [1766309400000, 22], [1766313000000, 21.2], [1766316600000, 21], [1766320200000, 21], [1766323800000, 21], [1766327400000, 21], [1766331000000, 21], [1766334600000, 21], [1766338200000, 21], [1766341800000, 21], [1766345400000, 21], [1766349000000, 21], [1766352600000, 21], [1766356200000, 21], [1766359800000, 21], [1766363400000, 21.5], [1766367000000, 21.5], [1766370600000, 21.5], [1766374200000, 21.1], [1766377800000, 21], [1766381400000, 21], [1766385000000, 21], [1766388600000, 21], [1766392200000, 21], [1766395800000, 21], [1766399400000, 21], [1766403000000, 21], [1766406600000, 21], [1766410200000, 22], [1766413800000, 22], [1766417400000, 22], [1766421000000, 21.1], [1766424600000, 21], [1766428200000, 21], [1766431800000, 21.5], [1766435400000, 22], [1766439000000, 22], [1766442600000, 21.6], [1766446200000, 21], [1766449800000, 21], [1766453400000, 21], [1766457000000, 21], [1766460600000, 21], [1766464200000, 21], [1766467800000, 21], [1766471400000, 21], [1766475000000, 21], [1766478600000, 21], [1766482200000, 21], [1766485800000, 21], [1766489400000, 21], [1766493000000, 21], [1766496600000, 21.3], [1766500200000, 22], [1766503800000, 21.3], [1766507400000, 21], [1766511000000, 21], [1766514600000, 21], [1766518200000, 21], [1766521800000, 21], [1766525400000, 21], [1766529000000, 21], [1766532600000, 21], [1766536200000, 21.5], [1766539800000, 21.5], [1766543400000, 21.5], [1766547000000, 21.1], [1766550600000, 21], [1766554200000, 21], [1766557800000, 21], [1766561400000, 21], [1766565000000, 21], [1766568600000, 21], [1766572200000, 21], [1766575800000, 21], [1766579400000, 21], [1766583000000, 21], [1766586600000, 21.8], [1766590200000, 22], [1766593800000, 22], [1766597400000, 21.3], [1766601000000, 21], [1766604600000, 21], [1766608200000, 21], [1766611800000, 21], [1766615400000, 21], [1766619000000, 21], [1766622600000, 21], [1766626200000, 21], [1766629800000, 21], [1766633400000, 21], [1766637000000, 21], [1766640600000, 21], [1766644200000, 21], [1766647800000, 21], [1766651400000, 21], [1766655000000, 21.4], [1766658600000, 21.5], [1766662200000, 21.5], [1766665800000, 21.1], [1766669400000, 21], [1766673000000, 21], [1766676600000, 21], [1766680200000, 21], [1766683800000, 21.2], [1766687400000, 21.5], [1766691000000, 21.7], [1766694600000, 22], [1766698200000, 22], [1766701800000, 21.7], [1766705400000, 21], [1766709000000, 21], [1766712600000, 21], [1766716200000, 21], [1766719800000, 21], [1766723400000, 21], [1766727000000, 21], [1766730600000, 21], [1766734200000, 21], [1766737800000, 21], [1766741400000, 21], [1766745000000, 21], [1766748600000, 21], [1766752200000, 21], [1766755800000, 21], [1766759400000, 21.5], [1766763000000, 22], [1766766600000, 22], [1766770200000, 21.6], [1766773800000, 21], [1766777400000, 21], [1766781000000, 21], [1766784600000, 21], [1766788200000, 21], [1766791800000, 21], [1766795400000, 21], [1766799000000, 21], [1766802600000, 21], [1766806200000, 21], [1766809800000, 21], [1766813400000, 21], [1766817000000, 21], [1766820600000, 21], [1766824200000, 21], [1766827800000, 21], [1766831400000, 21.1], [1766835000000, 22], [1766838600000, 22], [1766842200000, 22], [1766845800000, 21.1], [1766849400000, 21], [1766853000000, 21], [1766856600000, 21], [1766860200000, 21], [1766863800000, 21], [1766867400000, 21], [1766871000000, 21.2], [1766874600000, 21.5], [1766878200000, 21.5], [1766881800000, 21.3], [1766885400000, 21], [1766889000000, 21], [1766892600000, 21], [1766896200000, 21], [1766899800000, 21], [1766903400000, 21], [1766907000000, 21], [1766910600000, 21], [1766914200000, 21], [1766917800000, 21], [1766921400000, 21], [1766925000000, 21], [1766928600000, 21], [1766932200000, 21], [1766935800000, 21], [1766939400000, 21], [1766943000000, 21], [1766946600000, 21], [1766950200000, 21], [1766953800000, 21], [1766957400000, 21], [1766961000000, 21], [1766964600000, 21], [1766968200000, 21], [1766971800000, 21], [1766975400000, 21.1], [1766979000000, 21.5], [1766982600000, 21.5], [1766986200000, 21.5], [1766989800000, 21.1], [1766993400000, 21], [1766997000000, 21], [1767000600000, 21], [1767004200000, 21], [1767007800000, 21], [1767011400000, 21], [1767015000000, 21], [1767018600000, 21.1], [1767022200000, 22], [1767025800000, 22], [1767029400000, 14.7], [1767033000000, 0], [1767036600000, 0], [1767040200000, 0], [1767043800000, 0], [1767047400000, 0], [1767051000000, 0], [1767054600000, 0], [1767058200000, 0], [1767061800000, 0], [1767065400000, 4.6], [1767069000000, 0], [1767072600000, 0], [1767076200000, 0], [1767079800000, 0], [1767083400000, 0], [1767087000000, 0], [1767090600000, 0], [1767094200000, 0], [1767097800000, 0], [1767101400000, 0], [1767105000000, 0], [1767108600000, 0], [1767112200000, 0], [1767115800000, 0], [1767119400000, 0], [1767123000000, 0], [1767126600000, 0], [1767130200000, 0], [1767133800000, 0], [1767137400000, 0], [1767141000000, 0], [1767144600000, 0], [1767148200000, 0], [1767151800000, 0], [1767155400000, 0], [1767159000000, 0], [1767162600000, 0], [1767166200000, 0], [1767169800000, 0], [1767173400000, 0], [1767177000000, 0], [1767180600000, 0], [1767184200000, 0], [1767187800000, 0], [1767191400000, 0], [1767195000000, 0], [1767198600000, 0], [1767202200000, 0], [1767205800000, 0], [1767209400000, 0], [1767213000000, 0], [1767216600000, 0], [1767220200000, 0], [1767223800000, 0], [1767227400000, 0], [1767231000000, 0], [1767234600000, 0], [1767238200000, 0], [1767241800000, 0], [1767245400000, 0], [1767249000000, 0], [1767252600000, 0], [1767256200000, 0], [1767259800000, 0], [1767263400000, 0], [1767267000000, 0], [1767270600000, 0], [1767274200000, 0], [1767277800000, 0], [1767281400000, 0], [1767285000000, 0], [1767288600000, 0], [1767292200000, 18.9], [1767295800000, 22], [1767299400000, 22], [1767303000000, 22], [1767306600000, 22], [1767310200000, 22], [1767313800000, 22], [1767317400000, 22], [1767321000000, 21.7], [1767324600000, 21.5], [1767328200000, 21.5], [1767331800000, 21.2], [1767335400000, 21], [1767339000000, 21.4], [1767342600000, 21.5], [1767346200000, 21.5], [1767349800000, 21.1], [1767353400000, 21.4], [1767357000000, 21], [1767360600000, 21.4], [1767364200000, 21.8], [1767367800000, 22], [1767371400000, 21.5], [1767375000000, 21], [1767378600000, 21], [1767382200000, 21], [1767385800000, 21], [1767389400000, 21], [1767393000000, 21], [1767396600000, 21], [1767400200000, 21], [1767403800000, 21], [1767407400000, 21], [1767411000000, 21], [1767414600000, 21], [1767418200000, 21], [1767421800000, 21], [1767425400000, 21], [1767429000000, 21], [1767432600000, 21], [1767436200000, 21], [1767439800000, 21], [1767443400000, 21], [1767447000000, 21], [1767450600000, 21], [1767454200000, 21], [1767457800000, 21], [1767461400000, 21.4], [1767465000000, 21.5], [1767468600000, 21.5], [1767472200000, 21.1], [1767475800000, 21.1], [1767479400000, 21.5], [1767483000000, 21.5], [1767486600000, 21.4], [1767490200000, 21], [1767493800000, 21], [1767497400000, 21], [1767501000000, 21], [1767504600000, 21], [1767508200000, 21], [1767511800000, 21], [1767515400000, 21], [1767519000000, 21.5], [1767522600000, 21.5], [1767526200000, 21.5], [1767529800000, 21.1], [1767533400000, 21.3], [1767537000000, 21.5], [1767540600000, 21.5], [1767544200000, 21.3], [1767547800000, 21], [1767551400000, 21.7], [1767555000000, 21.5], [1767558600000, 21.3], [1767562200000, 21], [1767565800000, 21], [1767569400000, 21], [1767573000000, 21.3], [1767576600000, 21.5], [1767580200000, 21.5], [1767583800000, 21.3], [1767587400000, 21], [1767591000000, 21], [1767594600000, 21], [1767598200000, 21], [1767601800000, 21], [1767605400000, 21], [1767609000000, 21], [1767612600000, 21], [1767616200000, 21], [1767619800000, 21], [1767623400000, 21], [1767627000000, 21], [1767630600000, 21], [1767634200000, 21], [1767637800000, 21], [1767641400000, 21], [1767645000000, 21], [1767648600000, 21], [1767652200000, 21], [1767655800000, 21], [1767659400000, 21], [1767663000000, 21], [1767666600000, 21.2], [1767670200000, 15.4], [1767673800000, 16.1], [1767677400000, 21], [1767681000000, 21], [1767684600000, 21.4], [1767688200000, 21.5], [1767691800000, 21.5], [1767695400000, 21.1], [1767699000000, 21], [1767702600000, 21], [1767706200000, 21], [1767709800000, 21], [1767713400000, 21.3], [1767717000000, 21], [1767720600000, 21], [1767724200000, 21], [1767727800000, 21], [1767731400000, 21], [1767735000000, 21], [1767738600000, 21], [1767742200000, 18.1], [1767745800000, 0], [1767749400000, 18.9], [1767753000000, 18.8], [1767756600000, 21.1], [1767760200000, 21], [1767763800000, 21.4], [1767767400000, 21.5], [1767771000000, 21.5], [1767774600000, 21.1], [1767778200000, 21], [1767781800000, 21], [1767785400000, 21], [1767789000000, 21], [1767792600000, 21.1], [1767796200000, 21.4], [1767799800000, 21.3], [1767803400000, 21.3]]}], "xaxis": {"type": "datetime"}, "stroke": {"curve": ["smooth", "stepline"], "width": [3, 2], "dashArray": [0, 5]}, "colors": ["#00b894", "#e17055"], "fill": {"type": "gradient", "gradient": {"opacityFrom": 0.15, "opacityTo": 0}}}</script></uk-chart></div>
</div>
</div>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L218" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="thermostatwidget" class="level3">
<h3 class="anchored" data-anchor-id="thermostatwidget">ThermostatWidget</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ThermostatWidget(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    t, home_id, room_id, xtra_classes:<span class="bu">str</span><span class="op">=</span><span class="st">'w-[320px]'</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="7705ccec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>preview(ThermostatWidget(t, home_id, room.<span class="bu">id</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<iframe srcdoc=" <!doctype html>
 <html>
   <head>
     <title>FastHTML page</title>
     <link rel=&quot;canonical&quot; href=&quot;https://testserver/_UFJLVnEzRG6PJt6wH7iM6w&quot;>
     <meta charset=&quot;utf-8&quot;>
     <meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, viewport-fit=cover&quot;>
<script src=&quot;https://cdn.jsdelivr.net/npm/htmx.org@2.0.7/dist/htmx.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/answerdotai/fasthtml-js@1.0.12/fasthtml.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/answerdotai/surreal@main/surreal.js&quot;></script><script src=&quot;https://cdn.jsdelivr.net/gh/gnat/css-scope-inline@main/script.js&quot;></script>     <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/css/core.min.css&quot;>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/core.iife.js&quot;></script><script src=&quot;https://cdn.tailwindcss.com/3.4.17&quot;></script><script>
    tailwind.config = {
        darkMode: 'selector',
    }
    </script><script>
        const htmlElement = document.documentElement;
        
          
          const __FRANKEN__ = JSON.parse(localStorage.getItem(&quot;__FRANKEN__&quot;) || &quot;{}&quot;);
    
          if (
            __FRANKEN__.mode === &quot;dark&quot; ||
            (!__FRANKEN__.mode &amp;&amp;
              window.matchMedia(&quot;(prefers-color-scheme: dark)&quot;).matches)
          ) {
            htmlElement.classList.add(&quot;dark&quot;);
          } else {
            htmlElement.classList.remove(&quot;dark&quot;);
          }
        
          htmlElement.classList.add(__FRANKEN__.theme || &quot;uk-theme-blue&quot;);
          htmlElement.classList.add(__FRANKEN__.radii || &quot;uk-radii-sm&quot;);
          htmlElement.classList.add(__FRANKEN__.shadows || &quot;uk-shadows-sm&quot;);
          htmlElement.classList.add(__FRANKEN__.font || &quot;uk-font-sm&quot;);
    </script>     <style>
.monster-navbar.navbar-bold a {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}
.monster-navbar.navbar-bold a.uk-active {
    transform: scale(1.15) ;
    font-weight: bold;
    text-shadow: 0 0 12px rgba(var(--p-rgb), 0.4);
    letter-spacing: 0.02em;
    color: hsl(var(--p) / 1);
}
.monster-navbar.navbar-underline a.uk-active { position: relative; }
.monster-navbar.navbar-underline a.uk-active::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 100%;
    height: 2px;
    background: currentColor;
    animation: slideIn 0.3s ease forwards;
}
@keyframes slideIn {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
}
</style>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/icon.iife.js&quot;></script>     <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/daisyui@4.12.24/dist/full.min.css&quot;>
     <style>
:root {
  --b1: from hsl(var(--background)) l c h;
  --bc: from hsl(var(--foreground)) l c h;
  --m: from hsl(var(--muted)) l c h;
  --mc: from hsl(var(--muted-foreground)) l c h;
  --po: from hsl(var(--popover)) l c h;
  --poc: from hsl(var(--popover-foreground)) l c h;
  --b2: from hsl(var(--card)) l c h;
  --b2c: from hsl(var(--card-foreground)) l c h;
  --br: from hsl(var(--border)) l c h;
  --in: from hsl(var(--input)) l c h;
  --p: from hsl(var(--primary)) l c h;
  --pc: from hsl(var(--primary-foreground)) l c h;
  --s: from hsl(var(--secondary)) l c h;
  --sc: from hsl(var(--secondary-foreground)) l c h;
  --a: from hsl(var(--accent)) l c h;
  --ac: from hsl(var(--accent-foreground)) l c h;
  --er: from hsl(var(--destructive)) l c h;
  --erc: from hsl(var(--destructive-foreground)) l c h;
  --b3: from hsl(var(--ring)) l c h;
  --ch1: from hsl(var(--chart-1)) l c h;
  --ch2: from hsl(var(--chart-2)) l c h;
  --ch3: from hsl(var(--chart-3)) l c h;
  --ch4: from hsl(var(--chart-4)) l c h;
  --ch5: from hsl(var(--chart-5)) l c h;
  --rd: var(--radius);
}
</style>
<script type=&quot;module&quot; src=&quot;https://cdn.jsdelivr.net/npm/franken-ui@2.0.0/dist/js/chart.iife.js&quot;></script><script src=&quot;https://cdn.tailwindcss.com&quot;></script>     <link href=&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;amp;family=Outfit:wght@300;400;600&amp;amp;display=swap&quot; rel=&quot;stylesheet&quot;>
<script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        'temp-real': '#00b894',
                        'temp-set': '#e17055',
                        'solar-prod': '#fdcb6e',
                        'solar-cons': '#ff7675',
                        'card-bg': 'rgba(255, 255, 255, 0.85)',
                    },
                    boxShadow: {
                        'soft': '0 20px 40px rgba(0, 0, 0, 0.03)',
                    }
                }
            }
        }
    </script><script>
    function sendmsg() {
        window.parent.postMessage({height: document.documentElement.offsetHeight}, '*');
    }
    window.onload = function() {
        sendmsg();
        document.body.addEventListener('htmx:afterSettle',    sendmsg);
        document.body.addEventListener('htmx:wsAfterMessage', sendmsg);
    };</script>   </head>
   <body class=&quot; bg-background text-foreground&quot;>
     <div class=&quot;bg-white/85 backdrop-blur-xl border border-white/60 rounded-[32px] p-8 shadow-soft flex flex-col h-full transition-transform hover:-translate-y-1 duration-300 aspect-square w-[320px]&quot;>
       <div class=&quot;flex justify-between items-center mb-6&quot;>
<span class=&quot;font-display text-xs font-bold text-slate-400 uppercase tracking-widest&quot;>CLIMATE</span>         <div class=&quot;flex gap-2&quot;>
<button hx-post=&quot;/setpoint&quot; hx-swap=&quot;outerHTML&quot; type=&quot;submit&quot; hx-vals='{&quot;change&quot;: -0.5, &quot;current_setpoint&quot;: 21.5}' hx-target=&quot;#setpoint-display&quot; id=&quot;btn-minus&quot; class=&quot;uk-btn w-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer&quot; name=&quot;btn-minus&quot;>‚àí</button><button hx-post=&quot;/setpoint&quot; hx-swap=&quot;outerHTML&quot; type=&quot;submit&quot; hx-vals='{&quot;change&quot;: 0.5, &quot;current_setpoint&quot;: 21.5}' hx-target=&quot;#setpoint-display&quot; id=&quot;btn-plus&quot; class=&quot;uk-btn w-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer&quot; name=&quot;btn-plus&quot;>+</button>         </div>
       </div>
       <div class=&quot;flex items-baseline gap-3 flex-wrap&quot;>
<span class=&quot;font-display text-6xl text-temp-real leading-none&quot;>21.5¬∞</span><span id=&quot;setpoint-display&quot; class=&quot;text-slate-500 font-medium text-base&quot;>Target <span class=&quot;text-temp-set font-semibold&quot;>21.5¬∞</span></span>       </div>
       <div class=&quot;mt-auto -mx-3 h-[150px]&quot;>
         <div class=&quot;&quot;>
<uk-chart><script type='application/json'>{&quot;chart&quot;: {&quot;type&quot;: &quot;area&quot;, &quot;height&quot;: 150, &quot;sparkline&quot;: {&quot;enabled&quot;: true}}, &quot;series&quot;: [{&quot;name&quot;: &quot;Temp&quot;, &quot;data&quot;: [[1765110600000, 22.2], [1765114200000, 22.2], [1765117800000, 22.1], [1765121400000, 22], [1765125000000, 22.1], [1765128600000, 22.3], [1765132200000, 22.9], [1765135800000, 22.7], [1765139400000, 22.3], [1765143000000, 22], [1765146600000, 22], [1765150200000, 21.9], [1765153800000, 21.3], [1765157400000, 21.1], [1765161000000, 21], [1765164600000, 21], [1765168200000, 21], [1765171800000, 21.1], [1765175400000, 21.3], [1765179000000, 21.7], [1765182600000, 22.4], [1765186200000, 22.4], [1765189800000, 22.3], [1765193400000, 22.8], [1765197000000, 22.7], [1765200600000, 22.6], [1765204200000, 22.3], [1765207800000, 22], [1765211400000, 22.3], [1765215000000, 22.3], [1765218600000, 22.1], [1765222200000, 22.5], [1765225800000, 22.3], [1765229400000, 22.5], [1765233000000, 22.3], [1765236600000, 21.9], [1765240200000, 21.6], [1765243800000, 21.2], [1765247400000, 21.1], [1765251000000, 21.1], [1765254600000, 21], [1765258200000, 21.1], [1765261800000, 21.2], [1765265400000, 21.8], [1765269000000, 22], [1765272600000, 22.1], [1765276200000, 22], [1765279800000, 21.6], [1765283400000, 21.3], [1765287000000, 21.1], [1765290600000, 21.1], [1765294200000, 20.8], [1765297800000, 20.6], [1765301400000, 20.3], [1765305000000, 20.1], [1765308600000, 20], [1765312200000, 19.8], [1765315800000, 19.6], [1765319400000, 19.4], [1765323000000, 19.2], [1765326600000, 19], [1765330200000, 18.8], [1765333800000, 18.6], [1765337400000, 18.5], [1765341000000, 18.2], [1765344600000, 18], [1765348200000, 17.8], [1765351800000, 17.6], [1765355400000, 17.5], [1765359000000, 17.3], [1765362600000, 17.2], [1765366200000, 17.1], [1765369800000, 17.1], [1765373400000, 17.1], [1765377000000, 17], [1765380600000, 17], [1765384200000, 17], [1765387800000, 17], [1765391400000, 16.9], [1765395000000, 16.8], [1765398600000, 16.8], [1765402200000, 16.7], [1765405800000, 16.6], [1765409400000, 16.6], [1765413000000, 16.5], [1765416600000, 16.4], [1765420200000, 16.3], [1765423800000, 16.2], [1765427400000, 16.1], [1765431000000, 16], [1765434600000, 15.9], [1765438200000, 15.8], [1765441800000, 15.7], [1765445400000, 15.8], [1765449000000, 19.5], [1765452600000, 21.1], [1765456200000, 21.8], [1765459800000, 21.1], [1765463400000, 21.1], [1765467000000, 21.5], [1765470600000, 21.8], [1765474200000, 22], [1765477800000, 22.1], [1765481400000, 22], [1765485000000, 22], [1765488600000, 22.1], [1765492200000, 22], [1765495800000, 21.8], [1765499400000, 21.2], [1765503000000, 21.1], [1765506600000, 21], [1765510200000, 21.1], [1765513800000, 21], [1765517400000, 21], [1765521000000, 21.2], [1765524600000, 21.8], [1765528200000, 22], [1765531800000, 21.8], [1765535400000, 21.4], [1765539000000, 21], [1765542600000, 21], [1765546200000, 22], [1765549800000, 22.1], [1765553400000, 22], [1765557000000, 22.1], [1765560600000, 21.6], [1765564200000, 21.2], [1765567800000, 20.9], [1765571400000, 20.6], [1765575000000, 20.4], [1765578600000, 20.1], [1765582200000, 19.9], [1765585800000, 19.7], [1765589400000, 19.5], [1765593000000, 19.3], [1765596600000, 19.1], [1765600200000, 19], [1765603800000, 18.8], [1765607400000, 18.6], [1765611000000, 18.5], [1765614600000, 18.4], [1765618200000, 18.2], [1765621800000, 18.1], [1765625400000, 18.1], [1765629000000, 18], [1765632600000, 17.9], [1765636200000, 17.9], [1765639800000, 17.8], [1765643400000, 17.8], [1765647000000, 17.7], [1765650600000, 17.6], [1765654200000, 17.6], [1765657800000, 17.5], [1765661400000, 17.4], [1765665000000, 17.3], [1765668600000, 17.2], [1765672200000, 17.1], [1765675800000, 17], [1765679400000, 16.9], [1765683000000, 16.7], [1765686600000, 16.6], [1765690200000, 16.5], [1765693800000, 16.4], [1765697400000, 16.2], [1765701000000, 16.1], [1765704600000, 16], [1765708200000, 15.9], [1765711800000, 15.9], [1765715400000, 15.8], [1765719000000, 15.8], [1765722600000, 15.8], [1765726200000, 15.8], [1765729800000, 15.8], [1765733400000, 15.8], [1765737000000, 15.7], [1765740600000, 15.7], [1765744200000, 15.7], [1765747800000, 15.6], [1765751400000, 15.6], [1765755000000, 15.6], [1765758600000, 15.6], [1765762200000, 15.6], [1765765800000, 15.6], [1765769400000, 15.6], [1765773000000, 15.5], [1765776600000, 15.5], [1765780200000, 15.5], [1765783800000, 15.5], [1765787400000, 15.5], [1765791000000, 15.6], [1765794600000, 15.6], [1765798200000, 15.6], [1765801800000, 15.6], [1765805400000, 15.6], [1765809000000, 15.6], [1765812600000, 15.6], [1765816200000, 15.7], [1765819800000, 15.7], [1765823400000, 15.7], [1765827000000, 15.7], [1765830600000, 15.8], [1765834200000, 15.8], [1765837800000, 15.8], [1765841400000, 15.8], [1765845000000, 15.8], [1765848600000, 15.8], [1765852200000, 15.8], [1765855800000, 15.8], [1765859400000, 15.7], [1765863000000, 15.7], [1765866600000, 15.6], [1765870200000, 15.6], [1765873800000, 15.5], [1765877400000, 15.5], [1765881000000, 15.5], [1765884600000, 15.4], [1765888200000, 15.4], [1765891800000, 15.5], [1765895400000, 15.5], [1765899000000, 15.5], [1765902600000, 15.5], [1765906200000, 16], [1765909800000, 16.1], [1765913400000, 15.9], [1765917000000, 15.9], [1765920600000, 15.9], [1765924200000, 15.9], [1765927800000, 15.9], [1765931400000, 15.8], [1765935000000, 15.8], [1765938600000, 15.8], [1765942200000, 15.7], [1765945800000, 15.6], [1765949400000, 15.6], [1765953000000, 15.5], [1765956600000, 15.5], [1765960200000, 15.5], [1765963800000, 15.4], [1765967400000, 15.4], [1765971000000, 15.4], [1765974600000, 15.4], [1765978200000, 15.4], [1765981800000, 15.4], [1765985400000, 15.4], [1765989000000, 15.4], [1765992600000, 15.4], [1765996200000, 15.4], [1765999800000, 15.4], [1766003400000, 15.4], [1766007000000, 15.4], [1766010600000, 15.4], [1766014200000, 15.3], [1766017800000, 15.3], [1766021400000, 15.2], [1766025000000, 15.1], [1766028600000, 15], [1766032200000, 15], [1766035800000, 14.9], [1766039400000, 14.9], [1766043000000, 14.8], [1766046600000, 14.7], [1766050200000, 14.9], [1766053800000, 16.2], [1766057400000, 17.1], [1766061000000, 17.9], [1766064600000, 18.8], [1766068200000, 19.7], [1766071800000, 20.4], [1766075400000, 20.8], [1766079000000, 21.1], [1766082600000, 21.4], [1766086200000, 21.3], [1766089800000, 21.4], [1766093400000, 22.1], [1766097000000, 22], [1766100600000, 21.9], [1766104200000, 21.9], [1766107800000, 22.6], [1766111400000, 22.4], [1766115000000, 22.6], [1766118600000, 22.1], [1766122200000, 21.6], [1766125800000, 21.2], [1766129400000, 20.9], [1766133000000, 21.3], [1766136600000, 20.9], [1766140200000, 21.4], [1766143800000, 21.4], [1766147400000, 20.9], [1766151000000, 21.3], [1766154600000, 21.3], [1766158200000, 21.3], [1766161800000, 22.4], [1766165400000, 23.2], [1766169000000, 23.3], [1766172600000, 22.8], [1766176200000, 22.6], [1766179800000, 22.6], [1766183400000, 22.7], [1766187000000, 22.4], [1766190600000, 22.2], [1766194200000, 22], [1766197800000, 22], [1766201400000, 21.8], [1766205000000, 21.6], [1766208600000, 21.4], [1766212200000, 21.2], [1766215800000, 21.1], [1766219400000, 20.9], [1766223000000, 21.8], [1766226600000, 22.1], [1766230200000, 21.6], [1766233800000, 21.5], [1766237400000, 21.7], [1766241000000, 21.6], [1766244600000, 21.5], [1766248200000, 21.4], [1766251800000, 21.9], [1766255400000, 21.9], [1766259000000, 21.9], [1766262600000, 21.7], [1766266200000, 21.5], [1766269800000, 21.5], [1766273400000, 21.5], [1766277000000, 21.4], [1766280600000, 21.2], [1766284200000, 21.1], [1766287800000, 21.2], [1766291400000, 21.2], [1766295000000, 21.3], [1766298600000, 21.5], [1766302200000, 21.8], [1766305800000, 22.3], [1766309400000, 21.9], [1766313000000, 22.2], [1766316600000, 22.1], [1766320200000, 21.8], [1766323800000, 21.8], [1766327400000, 21.6], [1766331000000, 21.3], [1766334600000, 21.4], [1766338200000, 21.6], [1766341800000, 21.8], [1766345400000, 21.9], [1766349000000, 21.8], [1766352600000, 21.6], [1766356200000, 21.4], [1766359800000, 21.3], [1766363400000, 21.5], [1766367000000, 21.7], [1766370600000, 21.6], [1766374200000, 21.9], [1766377800000, 21.8], [1766381400000, 21.6], [1766385000000, 21.3], [1766388600000, 21], [1766392200000, 21.1], [1766395800000, 21.3], [1766399400000, 21.4], [1766403000000, 21.3], [1766406600000, 21.2], [1766410200000, 21.5], [1766413800000, 22.2], [1766417400000, 21.9], [1766421000000, 22.2], [1766424600000, 21.8], [1766428200000, 21.7], [1766431800000, 21.7], [1766435400000, 22.1], [1766439000000, 22], [1766442600000, 22], [1766446200000, 21.5], [1766449800000, 21.1], [1766453400000, 20.9], [1766457000000, 20.9], [1766460600000, 21.5], [1766464200000, 21.2], [1766467800000, 21.1], [1766471400000, 21], [1766475000000, 20.9], [1766478600000, 21.3], [1766482200000, 21], [1766485800000, 21.1], [1766489400000, 21.1], [1766493000000, 21.1], [1766496600000, 21], [1766500200000, 21.6], [1766503800000, 22.1], [1766507400000, 21.7], [1766511000000, 21.4], [1766514600000, 21.5], [1766518200000, 21.3], [1766521800000, 21], [1766525400000, 21.2], [1766529000000, 21.1], [1766532600000, 21], [1766536200000, 21.6], [1766539800000, 21.6], [1766543400000, 21.6], [1766547000000, 21.6], [1766550600000, 21.2], [1766554200000, 21], [1766557800000, 21.3], [1766561400000, 20.9], [1766565000000, 21.2], [1766568600000, 20.9], [1766572200000, 21.3], [1766575800000, 21], [1766579400000, 21.3], [1766583000000, 21.3], [1766586600000, 21.4], [1766590200000, 22.2], [1766593800000, 21.9], [1766597400000, 22.4], [1766601000000, 22], [1766604600000, 21.7], [1766608200000, 21.6], [1766611800000, 21.4], [1766615400000, 21.1], [1766619000000, 21], [1766622600000, 21.1], [1766626200000, 21.3], [1766629800000, 20.9], [1766633400000, 21.3], [1766637000000, 21], [1766640600000, 21.2], [1766644200000, 21], [1766647800000, 21.2], [1766651400000, 21], [1766655000000, 21.4], [1766658600000, 21.4], [1766662200000, 21.8], [1766665800000, 21.5], [1766669400000, 21.3], [1766673000000, 21.1], [1766676600000, 20.9], [1766680200000, 21.2], [1766683800000, 21.2], [1766687400000, 21.8], [1766691000000, 21.5], [1766694600000, 22.1], [1766698200000, 22], [1766701800000, 22.2], [1766705400000, 21.9], [1766709000000, 21.6], [1766712600000, 21.5], [1766716200000, 21.3], [1766719800000, 21.2], [1766723400000, 21.1], [1766727000000, 20.9], [1766730600000, 21.2], [1766734200000, 21.3], [1766737800000, 21], [1766741400000, 21.2], [1766745000000, 21.5], [1766748600000, 21.3], [1766752200000, 21], [1766755800000, 21.1], [1766759400000, 21.3], [1766763000000, 22], [1766766600000, 22], [1766770200000, 21.9], [1766773800000, 21.4], [1766777400000, 21.7], [1766781000000, 22.4], [1766784600000, 22.2], [1766788200000, 22.1], [1766791800000, 21.8], [1766795400000, 21.6], [1766799000000, 21.5], [1766802600000, 21.6], [1766806200000, 21.6], [1766809800000, 21.3], [1766813400000, 21], [1766817000000, 21.2], [1766820600000, 21.4], [1766824200000, 21.1], [1766827800000, 21], [1766831400000, 21], [1766835000000, 21.4], [1766838600000, 22.3], [1766842200000, 22.3], [1766845800000, 22], [1766849400000, 21.7], [1766853000000, 21.7], [1766856600000, 21.8], [1766860200000, 21.7], [1766863800000, 21.6], [1766867400000, 21.5], [1766871000000, 21.1], [1766874600000, 21.8], [1766878200000, 21.6], [1766881800000, 21.5], [1766885400000, 21.3], [1766889000000, 21.4], [1766892600000, 21.4], [1766896200000, 21.3], [1766899800000, 21.3], [1766903400000, 21.2], [1766907000000, 21], [1766910600000, 21.2], [1766914200000, 21.1], [1766917800000, 21.1], [1766921400000, 21], [1766925000000, 21.4], [1766928600000, 21.3], [1766932200000, 21.2], [1766935800000, 21.1], [1766939400000, 21.1], [1766943000000, 21.3], [1766946600000, 21.5], [1766950200000, 21.4], [1766953800000, 21.1], [1766957400000, 20.9], [1766961000000, 21.3], [1766964600000, 21.5], [1766968200000, 21.3], [1766971800000, 21.2], [1766975400000, 21], [1766979000000, 21.5], [1766982600000, 21.8], [1766986200000, 21.5], [1766989800000, 21.8], [1766993400000, 21.4], [1766997000000, 21.2], [1767000600000, 20.9], [1767004200000, 21.3], [1767007800000, 21], [1767011400000, 21.2], [1767015000000, 21.5], [1767018600000, 21], [1767022200000, 21.5], [1767025800000, 22.1], [1767029400000, 22], [1767033000000, 21.9], [1767036600000, 21.3], [1767040200000, 20.8], [1767043800000, 20.5], [1767047400000, 20.2], [1767051000000, 19.9], [1767054600000, 19.6], [1767058200000, 19.3], [1767061800000, 19], [1767065400000, 18.8], [1767069000000, 18.5], [1767072600000, 18.3], [1767076200000, 18], [1767079800000, 17.8], [1767083400000, 17.6], [1767087000000, 17.3], [1767090600000, 17.3], [1767094200000, 17.2], [1767097800000, 17.1], [1767101400000, 17], [1767105000000, 16.9], [1767108600000, 16.8], [1767112200000, 16.7], [1767115800000, 16.6], [1767119400000, 16.5], [1767123000000, 16.4], [1767126600000, 16.3], [1767130200000, 16.1], [1767133800000, 16], [1767137400000, 15.9], [1767141000000, 15.8], [1767144600000, 15.6], [1767148200000, 15.5], [1767151800000, 15.4], [1767155400000, 15.3], [1767159000000, 15.2], [1767162600000, 15.1], [1767166200000, 15], [1767169800000, 14.9], [1767173400000, 14.8], [1767177000000, 14.7], [1767180600000, 14.7], [1767184200000, 14.6], [1767187800000, 14.6], [1767191400000, 14.6], [1767195000000, 14.6], [1767198600000, 14.5], [1767202200000, 14.5], [1767205800000, 14.4], [1767209400000, 14.4], [1767213000000, 14.3], [1767216600000, 14.1], [1767220200000, 14], [1767223800000, 14], [1767227400000, 13.9], [1767231000000, 13.8], [1767234600000, 13.6], [1767238200000, 13.7], [1767241800000, 13.6], [1767245400000, 13.5], [1767249000000, 13.3], [1767252600000, 13.2], [1767256200000, 13.1], [1767259800000, 13], [1767263400000, 13.1], [1767267000000, 13], [1767270600000, 13], [1767274200000, 13], [1767277800000, 13], [1767281400000, 13], [1767285000000, 13], [1767288600000, 13], [1767292200000, 13.4], [1767295800000, 17.2], [1767299400000, 18.5], [1767303000000, 18.5], [1767306600000, 19.1], [1767310200000, 19.6], [1767313800000, 20.2], [1767317400000, 20.7], [1767321000000, 21.3], [1767324600000, 21.6], [1767328200000, 21.5], [1767331800000, 21.3], [1767335400000, 21], [1767339000000, 21.2], [1767342600000, 21.3], [1767346200000, 21.5], [1767349800000, 21.4], [1767353400000, 21.3], [1767357000000, 21.7], [1767360600000, 21.5], [1767364200000, 21.8], [1767367800000, 22.1], [1767371400000, 22], [1767375000000, 21.5], [1767378600000, 21.1], [1767382200000, 21], [1767385800000, 21.3], [1767389400000, 21], [1767393000000, 21.3], [1767396600000, 20.9], [1767400200000, 21.3], [1767403800000, 21], [1767407400000, 21.3], [1767411000000, 21], [1767414600000, 21.1], [1767418200000, 21.3], [1767421800000, 21.1], [1767425400000, 21.2], [1767429000000, 20.9], [1767432600000, 21.2], [1767436200000, 20.9], [1767439800000, 21.4], [1767443400000, 21], [1767447000000, 20.9], [1767450600000, 21.3], [1767454200000, 21], [1767457800000, 21.3], [1767461400000, 21.6], [1767465000000, 21.7], [1767468600000, 21.6], [1767472200000, 21.6], [1767475800000, 21.6], [1767479400000, 21.8], [1767483000000, 21.5], [1767486600000, 21.8], [1767490200000, 21.4], [1767493800000, 20.9], [1767497400000, 21.4], [1767501000000, 21], [1767504600000, 21.5], [1767508200000, 21], [1767511800000, 21.2], [1767515400000, 21], [1767519000000, 21.3], [1767522600000, 21.6], [1767526200000, 21.6], [1767529800000, 21.3], [1767533400000, 21.2], [1767537000000, 21.6], [1767540600000, 21.5], [1767544200000, 21.7], [1767547800000, 21.2], [1767551400000, 21.3], [1767555000000, 21.7], [1767558600000, 21.6], [1767562200000, 21.6], [1767565800000, 21.1], [1767569400000, 21.2], [1767573000000, 21], [1767576600000, 21.7], [1767580200000, 21.5], [1767583800000, 21.8], [1767587400000, 21.3], [1767591000000, 20.8], [1767594600000, 21.2], [1767598200000, 21], [1767601800000, 21.1], [1767605400000, 21.2], [1767609000000, 21], [1767612600000, 21.2], [1767616200000, 21], [1767619800000, 21.2], [1767623400000, 21.5], [1767627000000, 21.4], [1767630600000, 20.9], [1767634200000, 21.5], [1767637800000, 21.4], [1767641400000, 21.5], [1767645000000, 21.7], [1767648600000, 21.6], [1767652200000, 21.3], [1767655800000, 21], [1767659400000, 21.4], [1767663000000, 21], [1767666600000, 21.4], [1767670200000, 21.5], [1767673800000, 21.5], [1767677400000, 21], [1767681000000, 21.3], [1767684600000, 21], [1767688200000, 21.6], [1767691800000, 21.3], [1767695400000, 21.6], [1767699000000, 21.1], [1767702600000, 21.2], [1767706200000, 21.1], [1767709800000, 21.1], [1767713400000, 21.4], [1767717000000, 21.5], [1767720600000, 21.2], [1767724200000, 21.2], [1767727800000, 21.2], [1767731400000, 21], [1767735000000, 21.4], [1767738600000, 21], [1767742200000, 21.2], [1767745800000, 21], [1767749400000, 20.9], [1767753000000, 21.7], [1767756600000, 21.3], [1767760200000, 21], [1767763800000, 21.4], [1767767400000, 21.4], [1767771000000, 21.5], [1767774600000, 21.2], [1767778200000, 21.2], [1767781800000, 21], [1767785400000, 21], [1767789000000, 21.3], [1767792600000, 21], [1767796200000, 21.3], [1767799800000, 21.6], [1767803400000, 21.7]]}, {&quot;name&quot;: &quot;Setpoint&quot;, &quot;data&quot;: [[1765110600000, 21], [1765114200000, 18.8], [1765117800000, 22], [1765121400000, 22.1], [1765125000000, 22], [1765128600000, 22.5], [1765132200000, 22.1], [1765135800000, 22], [1765139400000, 22], [1765143000000, 22], [1765146600000, 22], [1765150200000, 21], [1765153800000, 21], [1765157400000, 21], [1765161000000, 21], [1765164600000, 21], [1765168200000, 21], [1765171800000, 21.4], [1765175400000, 22], [1765179000000, 22], [1765182600000, 22], [1765186200000, 22], [1765189800000, 22.1], [1765193400000, 22.5], [1765197000000, 22.3], [1765200600000, 22], [1765204200000, 22], [1765207800000, 21.9], [1765211400000, 21.5], [1765215000000, 21.5], [1765218600000, 21.8], [1765222200000, 22.5], [1765225800000, 22.5], [1765229400000, 22.4], [1765233000000, 22], [1765236600000, 21], [1765240200000, 21], [1765243800000, 21], [1765247400000, 21], [1765251000000, 21], [1765254600000, 21], [1765258200000, 21], [1765261800000, 21.5], [1765265400000, 22], [1765269000000, 22], [1765272600000, 22], [1765276200000, 21.1], [1765279800000, 20.5], [1765283400000, 20.5], [1765287000000, 21.3], [1765290600000, 21.5], [1765294200000, 21.5], [1765297800000, 21.7], [1765301400000, 22], [1765305000000, 22], [1765308600000, 22], [1765312200000, 22], [1765315800000, 22], [1765319400000, 22], [1765323000000, 21], [1765326600000, 21], [1765330200000, 21], [1765333800000, 21], [1765337400000, 21], [1765341000000, 21], [1765344600000, 21], [1765348200000, 21.4], [1765351800000, 22], [1765355400000, 22], [1765359000000, 22], [1765362600000, 22], [1765366200000, 22], [1765369800000, 22], [1765373400000, 22], [1765377000000, 22], [1765380600000, 22], [1765384200000, 22], [1765387800000, 22], [1765391400000, 22], [1765395000000, 22], [1765398600000, 22], [1765402200000, 22], [1765405800000, 22], [1765409400000, 21], [1765413000000, 21], [1765416600000, 21], [1765420200000, 21], [1765423800000, 21], [1765427400000, 21], [1765431000000, 21], [1765434600000, 21.5], [1765438200000, 22], [1765441800000, 22], [1765445400000, 22], [1765449000000, 22], [1765452600000, 22], [1765456200000, 22], [1765459800000, 22], [1765463400000, 22], [1765467000000, 22], [1765470600000, 22], [1765474200000, 22], [1765477800000, 22], [1765481400000, 22], [1765485000000, 22], [1765488600000, 22], [1765492200000, 22], [1765495800000, 21], [1765499400000, 21], [1765503000000, 21], [1765506600000, 21], [1765510200000, 21], [1765513800000, 21], [1765517400000, 21], [1765521000000, 21.4], [1765524600000, 22], [1765528200000, 22], [1765531800000, 20.9], [1765535400000, 20.5], [1765539000000, 20.5], [1765542600000, 21.6], [1765546200000, 22], [1765549800000, 22], [1765553400000, 22], [1765557000000, 22], [1765560600000, 22], [1765564200000, 22], [1765567800000, 22], [1765571400000, 22], [1765575000000, 22], [1765578600000, 22], [1765582200000, 21], [1765585800000, 21], [1765589400000, 21], [1765593000000, 21], [1765596600000, 21], [1765600200000, 21], [1765603800000, 21], [1765607400000, 21], [1765611000000, 21.5], [1765614600000, 22], [1765618200000, 22], [1765621800000, 22], [1765625400000, 22], [1765629000000, 22], [1765632600000, 22], [1765636200000, 22], [1765639800000, 22], [1765643400000, 22], [1765647000000, 22], [1765650600000, 22], [1765654200000, 22], [1765657800000, 22], [1765661400000, 22], [1765665000000, 22], [1765668600000, 21], [1765672200000, 21], [1765675800000, 21], [1765679400000, 21], [1765683000000, 21], [1765686600000, 21], [1765690200000, 21.9], [1765693800000, 22], [1765697400000, 22], [1765701000000, 22], [1765704600000, 22], [1765708200000, 22], [1765711800000, 22], [1765715400000, 22], [1765719000000, 22], [1765722600000, 22], [1765726200000, 22], [1765729800000, 22], [1765733400000, 22], [1765737000000, 22], [1765740600000, 22], [1765744200000, 22], [1765747800000, 22], [1765751400000, 22], [1765755000000, 21.1], [1765758600000, 21], [1765762200000, 21], [1765765800000, 21], [1765769400000, 21], [1765773000000, 21.9], [1765776600000, 22], [1765780200000, 22], [1765783800000, 22], [1765787400000, 22], [1765791000000, 22], [1765794600000, 22], [1765798200000, 22], [1765801800000, 22], [1765805400000, 22], [1765809000000, 22], [1765812600000, 22], [1765816200000, 22], [1765819800000, 22], [1765823400000, 22], [1765827000000, 22], [1765830600000, 22], [1765834200000, 22], [1765837800000, 22], [1765841400000, 21], [1765845000000, 21], [1765848600000, 21], [1765852200000, 21], [1765855800000, 21], [1765859400000, 21.9], [1765863000000, 22], [1765866600000, 22], [1765870200000, 22], [1765873800000, 22], [1765877400000, 22], [1765881000000, 22], [1765884600000, 22], [1765888200000, 22], [1765891800000, 22], [1765895400000, 22], [1765899000000, 22], [1765902600000, 22], [1765906200000, 4.9], [1765909800000, 0], [1765913400000, 0], [1765917000000, 0], [1765920600000, 0], [1765924200000, 0], [1765927800000, 0], [1765931400000, 0], [1765935000000, 0], [1765938600000, 0], [1765942200000, 0], [1765945800000, 0], [1765949400000, 0], [1765953000000, 0], [1765956600000, 0], [1765960200000, 0], [1765963800000, 0], [1765967400000, 0], [1765971000000, 0], [1765974600000, 0], [1765978200000, 0], [1765981800000, 0], [1765985400000, 0], [1765989000000, 0], [1765992600000, 0], [1765996200000, 0], [1765999800000, 0], [1766003400000, 0], [1766007000000, 0], [1766010600000, 0], [1766014200000, 0], [1766017800000, 0], [1766021400000, 0], [1766025000000, 0], [1766028600000, 0], [1766032200000, 0], [1766035800000, 0], [1766039400000, 0], [1766043000000, 0], [1766046600000, 0], [1766050200000, 18], [1766053800000, 21], [1766057400000, 21], [1766061000000, 21], [1766064600000, 21], [1766068200000, 21], [1766071800000, 21], [1766075400000, 21], [1766079000000, 21.7], [1766082600000, 21.5], [1766086200000, 21.1], [1766089800000, 22], [1766093400000, 22], [1766097000000, 21.9], [1766100600000, 21], [1766104200000, 21.8], [1766107800000, 22.5], [1766111400000, 22.5], [1766115000000, 21.9], [1766118600000, 21], [1766122200000, 21], [1766125800000, 21], [1766129400000, 21], [1766133000000, 21], [1766136600000, 21.2], [1766140200000, 21.3], [1766143800000, 21], [1766147400000, 21], [1766151000000, 21], [1766154600000, 21], [1766158200000, 22.6], [1766161800000, 23.5], [1766165400000, 23.5], [1766169000000, 21.2], [1766172600000, 21], [1766176200000, 21], [1766179800000, 21], [1766183400000, 21], [1766187000000, 21], [1766190600000, 21], [1766194200000, 21], [1766197800000, 21], [1766201400000, 21], [1766205000000, 21], [1766208600000, 21], [1766212200000, 21], [1766215800000, 21], [1766219400000, 21.7], [1766223000000, 22], [1766226600000, 21.3], [1766230200000, 21], [1766233800000, 21], [1766237400000, 21], [1766241000000, 21], [1766244600000, 21], [1766248200000, 21.2], [1766251800000, 21.5], [1766255400000, 21.5], [1766259000000, 21.3], [1766262600000, 21], [1766266200000, 21], [1766269800000, 21], [1766273400000, 21], [1766277000000, 21], [1766280600000, 21], [1766284200000, 21], [1766287800000, 21], [1766291400000, 21], [1766295000000, 21], [1766298600000, 21], [1766302200000, 21.9], [1766305800000, 22], [1766309400000, 22], [1766313000000, 21.2], [1766316600000, 21], [1766320200000, 21], [1766323800000, 21], [1766327400000, 21], [1766331000000, 21], [1766334600000, 21], [1766338200000, 21], [1766341800000, 21], [1766345400000, 21], [1766349000000, 21], [1766352600000, 21], [1766356200000, 21], [1766359800000, 21], [1766363400000, 21.5], [1766367000000, 21.5], [1766370600000, 21.5], [1766374200000, 21.1], [1766377800000, 21], [1766381400000, 21], [1766385000000, 21], [1766388600000, 21], [1766392200000, 21], [1766395800000, 21], [1766399400000, 21], [1766403000000, 21], [1766406600000, 21], [1766410200000, 22], [1766413800000, 22], [1766417400000, 22], [1766421000000, 21.1], [1766424600000, 21], [1766428200000, 21], [1766431800000, 21.5], [1766435400000, 22], [1766439000000, 22], [1766442600000, 21.6], [1766446200000, 21], [1766449800000, 21], [1766453400000, 21], [1766457000000, 21], [1766460600000, 21], [1766464200000, 21], [1766467800000, 21], [1766471400000, 21], [1766475000000, 21], [1766478600000, 21], [1766482200000, 21], [1766485800000, 21], [1766489400000, 21], [1766493000000, 21], [1766496600000, 21.3], [1766500200000, 22], [1766503800000, 21.3], [1766507400000, 21], [1766511000000, 21], [1766514600000, 21], [1766518200000, 21], [1766521800000, 21], [1766525400000, 21], [1766529000000, 21], [1766532600000, 21], [1766536200000, 21.5], [1766539800000, 21.5], [1766543400000, 21.5], [1766547000000, 21.1], [1766550600000, 21], [1766554200000, 21], [1766557800000, 21], [1766561400000, 21], [1766565000000, 21], [1766568600000, 21], [1766572200000, 21], [1766575800000, 21], [1766579400000, 21], [1766583000000, 21], [1766586600000, 21.8], [1766590200000, 22], [1766593800000, 22], [1766597400000, 21.3], [1766601000000, 21], [1766604600000, 21], [1766608200000, 21], [1766611800000, 21], [1766615400000, 21], [1766619000000, 21], [1766622600000, 21], [1766626200000, 21], [1766629800000, 21], [1766633400000, 21], [1766637000000, 21], [1766640600000, 21], [1766644200000, 21], [1766647800000, 21], [1766651400000, 21], [1766655000000, 21.4], [1766658600000, 21.5], [1766662200000, 21.5], [1766665800000, 21.1], [1766669400000, 21], [1766673000000, 21], [1766676600000, 21], [1766680200000, 21], [1766683800000, 21.2], [1766687400000, 21.5], [1766691000000, 21.7], [1766694600000, 22], [1766698200000, 22], [1766701800000, 21.7], [1766705400000, 21], [1766709000000, 21], [1766712600000, 21], [1766716200000, 21], [1766719800000, 21], [1766723400000, 21], [1766727000000, 21], [1766730600000, 21], [1766734200000, 21], [1766737800000, 21], [1766741400000, 21], [1766745000000, 21], [1766748600000, 21], [1766752200000, 21], [1766755800000, 21], [1766759400000, 21.5], [1766763000000, 22], [1766766600000, 22], [1766770200000, 21.6], [1766773800000, 21], [1766777400000, 21], [1766781000000, 21], [1766784600000, 21], [1766788200000, 21], [1766791800000, 21], [1766795400000, 21], [1766799000000, 21], [1766802600000, 21], [1766806200000, 21], [1766809800000, 21], [1766813400000, 21], [1766817000000, 21], [1766820600000, 21], [1766824200000, 21], [1766827800000, 21], [1766831400000, 21.1], [1766835000000, 22], [1766838600000, 22], [1766842200000, 22], [1766845800000, 21.1], [1766849400000, 21], [1766853000000, 21], [1766856600000, 21], [1766860200000, 21], [1766863800000, 21], [1766867400000, 21], [1766871000000, 21.2], [1766874600000, 21.5], [1766878200000, 21.5], [1766881800000, 21.3], [1766885400000, 21], [1766889000000, 21], [1766892600000, 21], [1766896200000, 21], [1766899800000, 21], [1766903400000, 21], [1766907000000, 21], [1766910600000, 21], [1766914200000, 21], [1766917800000, 21], [1766921400000, 21], [1766925000000, 21], [1766928600000, 21], [1766932200000, 21], [1766935800000, 21], [1766939400000, 21], [1766943000000, 21], [1766946600000, 21], [1766950200000, 21], [1766953800000, 21], [1766957400000, 21], [1766961000000, 21], [1766964600000, 21], [1766968200000, 21], [1766971800000, 21], [1766975400000, 21.1], [1766979000000, 21.5], [1766982600000, 21.5], [1766986200000, 21.5], [1766989800000, 21.1], [1766993400000, 21], [1766997000000, 21], [1767000600000, 21], [1767004200000, 21], [1767007800000, 21], [1767011400000, 21], [1767015000000, 21], [1767018600000, 21.1], [1767022200000, 22], [1767025800000, 22], [1767029400000, 14.7], [1767033000000, 0], [1767036600000, 0], [1767040200000, 0], [1767043800000, 0], [1767047400000, 0], [1767051000000, 0], [1767054600000, 0], [1767058200000, 0], [1767061800000, 0], [1767065400000, 4.6], [1767069000000, 0], [1767072600000, 0], [1767076200000, 0], [1767079800000, 0], [1767083400000, 0], [1767087000000, 0], [1767090600000, 0], [1767094200000, 0], [1767097800000, 0], [1767101400000, 0], [1767105000000, 0], [1767108600000, 0], [1767112200000, 0], [1767115800000, 0], [1767119400000, 0], [1767123000000, 0], [1767126600000, 0], [1767130200000, 0], [1767133800000, 0], [1767137400000, 0], [1767141000000, 0], [1767144600000, 0], [1767148200000, 0], [1767151800000, 0], [1767155400000, 0], [1767159000000, 0], [1767162600000, 0], [1767166200000, 0], [1767169800000, 0], [1767173400000, 0], [1767177000000, 0], [1767180600000, 0], [1767184200000, 0], [1767187800000, 0], [1767191400000, 0], [1767195000000, 0], [1767198600000, 0], [1767202200000, 0], [1767205800000, 0], [1767209400000, 0], [1767213000000, 0], [1767216600000, 0], [1767220200000, 0], [1767223800000, 0], [1767227400000, 0], [1767231000000, 0], [1767234600000, 0], [1767238200000, 0], [1767241800000, 0], [1767245400000, 0], [1767249000000, 0], [1767252600000, 0], [1767256200000, 0], [1767259800000, 0], [1767263400000, 0], [1767267000000, 0], [1767270600000, 0], [1767274200000, 0], [1767277800000, 0], [1767281400000, 0], [1767285000000, 0], [1767288600000, 0], [1767292200000, 18.9], [1767295800000, 22], [1767299400000, 22], [1767303000000, 22], [1767306600000, 22], [1767310200000, 22], [1767313800000, 22], [1767317400000, 22], [1767321000000, 21.7], [1767324600000, 21.5], [1767328200000, 21.5], [1767331800000, 21.2], [1767335400000, 21], [1767339000000, 21.4], [1767342600000, 21.5], [1767346200000, 21.5], [1767349800000, 21.1], [1767353400000, 21.4], [1767357000000, 21], [1767360600000, 21.4], [1767364200000, 21.8], [1767367800000, 22], [1767371400000, 21.5], [1767375000000, 21], [1767378600000, 21], [1767382200000, 21], [1767385800000, 21], [1767389400000, 21], [1767393000000, 21], [1767396600000, 21], [1767400200000, 21], [1767403800000, 21], [1767407400000, 21], [1767411000000, 21], [1767414600000, 21], [1767418200000, 21], [1767421800000, 21], [1767425400000, 21], [1767429000000, 21], [1767432600000, 21], [1767436200000, 21], [1767439800000, 21], [1767443400000, 21], [1767447000000, 21], [1767450600000, 21], [1767454200000, 21], [1767457800000, 21], [1767461400000, 21.4], [1767465000000, 21.5], [1767468600000, 21.5], [1767472200000, 21.1], [1767475800000, 21.1], [1767479400000, 21.5], [1767483000000, 21.5], [1767486600000, 21.4], [1767490200000, 21], [1767493800000, 21], [1767497400000, 21], [1767501000000, 21], [1767504600000, 21], [1767508200000, 21], [1767511800000, 21], [1767515400000, 21], [1767519000000, 21.5], [1767522600000, 21.5], [1767526200000, 21.5], [1767529800000, 21.1], [1767533400000, 21.3], [1767537000000, 21.5], [1767540600000, 21.5], [1767544200000, 21.3], [1767547800000, 21], [1767551400000, 21.7], [1767555000000, 21.5], [1767558600000, 21.3], [1767562200000, 21], [1767565800000, 21], [1767569400000, 21], [1767573000000, 21.3], [1767576600000, 21.5], [1767580200000, 21.5], [1767583800000, 21.3], [1767587400000, 21], [1767591000000, 21], [1767594600000, 21], [1767598200000, 21], [1767601800000, 21], [1767605400000, 21], [1767609000000, 21], [1767612600000, 21], [1767616200000, 21], [1767619800000, 21], [1767623400000, 21], [1767627000000, 21], [1767630600000, 21], [1767634200000, 21], [1767637800000, 21], [1767641400000, 21], [1767645000000, 21], [1767648600000, 21], [1767652200000, 21], [1767655800000, 21], [1767659400000, 21], [1767663000000, 21], [1767666600000, 21.2], [1767670200000, 15.4], [1767673800000, 16.1], [1767677400000, 21], [1767681000000, 21], [1767684600000, 21.4], [1767688200000, 21.5], [1767691800000, 21.5], [1767695400000, 21.1], [1767699000000, 21], [1767702600000, 21], [1767706200000, 21], [1767709800000, 21], [1767713400000, 21.3], [1767717000000, 21], [1767720600000, 21], [1767724200000, 21], [1767727800000, 21], [1767731400000, 21], [1767735000000, 21], [1767738600000, 21], [1767742200000, 18.1], [1767745800000, 0], [1767749400000, 18.9], [1767753000000, 18.8], [1767756600000, 21.1], [1767760200000, 21], [1767763800000, 21.4], [1767767400000, 21.5], [1767771000000, 21.5], [1767774600000, 21.1], [1767778200000, 21], [1767781800000, 21], [1767785400000, 21], [1767789000000, 21], [1767792600000, 21.1], [1767796200000, 21.4], [1767799800000, 21.3], [1767803400000, 21.3]]}], &quot;xaxis&quot;: {&quot;type&quot;: &quot;datetime&quot;}, &quot;stroke&quot;: {&quot;curve&quot;: [&quot;smooth&quot;, &quot;stepline&quot;], &quot;width&quot;: [3, 2], &quot;dashArray&quot;: [0, 5]}, &quot;colors&quot;: [&quot;#00b894&quot;, &quot;#e17055&quot;], &quot;fill&quot;: {&quot;type&quot;: &quot;gradient&quot;, &quot;gradient&quot;: {&quot;opacityFrom&quot;: 0.15, &quot;opacityTo&quot;: 0}}}</script></uk-chart>         </div>
       </div>
     </div>
   </body>
 </html>
" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.source !== frame.contentWindow) return; // Only proceed if the message is from this iframe
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 
</div>
</div>
<p>the widget should be square</p>
<section id="reply-21" class="level5">
<h5 class="anchored" data-anchor-id="reply-21">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Add <code>aspect-square</code> to the outer <code>Div</code> class:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>cls<span class="op">=</span><span class="st">"bg-white/85 backdrop-blur-xl border border-white/60 rounded-[32px] p-8 shadow-soft flex flex-col h-full min-h-[320px] aspect-square transition-transform hover:-translate-y-1 duration-300"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Or if you want a fixed size, replace <code>min-h-[320px]</code> with <code>w-[320px] h-[320px]</code>.</p>
<p>now it looks huge</p>
</section>
<section id="reply-22" class="level5">
<h5 class="anchored" data-anchor-id="reply-22">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Try adding <code>max-w-[320px]</code> or <code>w-[320px]</code> to constrain the width:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>cls<span class="op">=</span><span class="st">"... aspect-square max-w-[320px] ..."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="7f3671f8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">'/'</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> index():</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Container(ThermostatWidget(t, home_id, room.<span class="bu">id</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
</section>
<section id="packaging-the-thermostat-as-a-standalone-component" class="level2">
<h2 class="anchored" data-anchor-id="packaging-the-thermostat-as-a-standalone-component">Packaging the thermostat as a standalone component</h2>
<p>I would like to be able to package the Thermostat component in a similar fashion to a react component, however that is hard because it needs to define its own thermostat endpoints to change the setpoint. I think there might be a way to make the component register them on import but it‚Äôs not the typical python code, it‚Äôs more an advanced feature like what Jeremy Howard would do. First of all, I should understand more deeply how the actual route registration happens and at what time in the code execution.</p>
<p>it is a normal decorator right?</p>
<section id="reply-23" class="level5">
<h5 class="anchored" data-anchor-id="reply-23">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>Yes, a normal decorator. The key insight is: <strong>registration happens at decoration time</strong> ‚Äî when Python executes the <code>@rt("/setpoint")</code> line, it immediately calls <code>_add_route</code> on that specific <code>app</code> instance.</p>
<p>So the challenge for packaging: your component‚Äôs routes need access to an <code>app</code> that doesn‚Äôt exist yet when the module is imported.</p>
<p>A few patterns to consider: 1. <strong>Factory function</strong>: <code>def setup_thermostat(app, rt, t, home_id)</code> ‚Äî user calls it after creating their app 2. <strong>Lazy registration</strong>: store route functions, register them later via a <code>mount()</code> call 3. <strong>Blueprint/Router pattern</strong>: like FastAPI‚Äôs <code>APIRouter</code> ‚Äî register routes to a sub-router, then include it in the main app</p>
<p>Which approach appeals to you?</p>
<p>I think FastHTML supports something similar to option 3 too. However, I don‚Äôt know much about any of those options, I would like to do this, but if it‚Äôs too complex we might just tell the user to register the routes themself. Let‚Äôs sketch how each option would look like</p>
</section>
<section id="reply-24" class="level5">
<h5 class="anchored" data-anchor-id="reply-24">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p><strong>Option 1: Factory function</strong> (simplest)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setup_thermostat(rt, t, home_id, room_id):</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@rt</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> setpoint(change: <span class="bu">float</span>, current_setpoint: <span class="bu">float</span>): ...</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ThermostatWidget(t, home_id, room_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>User calls <code>widget = setup_thermostat(rt, t, home_id, room_id)</code> after creating their app.</p>
<hr>
<p><strong>Option 2: Lazy registration</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your module</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>_routes <span class="op">=</span> []</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> register_route(path): </span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> decorator(f): _routes.append((path, f))<span class="op">;</span> <span class="cf">return</span> f</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> decorator</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mount(rt):</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> path, f <span class="kw">in</span> _routes: rt(path)(f)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><strong>Option 3: FastHTML‚Äôs Router</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.core <span class="im">import</span> Router</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>thermostat_router <span class="op">=</span> Router()</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="at">@thermostat_router.route</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setpoint(...): ...</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co"># User does:</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>app.include_router(thermostat_router)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p>Option 1 is the most ‚ÄúPythonic‚Äù and easy to understand. Option 3 is cleanest if FastHTML supports it. Want me to check if FastHTML has <code>Router</code> / <code>include_router</code>?</p>
<p>from fasthtml.common import * import os import json import random import time from dotenv import load_dotenv from netatmo_thermostat.core import Thermostat</p>
<p>load_dotenv()</p>
</section>
</section>
<section id="initialize-app" class="level1">
<h1>Initialize App</h1>
<p>app, rt = fast_app(hdrs=( Script(src=‚Äúhttps://cdn.jsdelivr.net/npm/apexcharts‚Äù), Script(src=‚Äúhttps://cdn.tailwindcss.com‚Äù), Link(href=‚Äúhttps://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&amp;family=Outfit:wght@300;400;600&amp;display=swap‚Äù, rel=‚Äústylesheet‚Äù), Script(‚Äú‚Äú‚Äù tailwind.config = { theme: { extend: { fontFamily: { sans: [‚ÄòInter‚Äô, ‚Äòsans-serif‚Äô], display: [‚ÄòOutfit‚Äô, ‚Äòsans-serif‚Äô], }, colors: { ‚Äòtemp-real‚Äô: ‚Äò#00b894‚Äô, ‚Äòtemp-set‚Äô: ‚Äò#e17055‚Äô, ‚Äòsolar-prod‚Äô: ‚Äò#fdcb6e‚Äô, ‚Äòsolar-cons‚Äô: ‚Äò#ff7675‚Äô, ‚Äòcard-bg‚Äô: ‚Äòrgba(255, 255, 255, 0.85)‚Äô, }, boxShadow: { ‚Äòsoft‚Äô: ‚Äò0 20px 40px rgba(0, 0, 0, 0.03)‚Äô, } } } } ‚Äú‚Äú‚Äú) ))</p>
</section>
<section id="auth-sdk-setup" class="level1">
<h1>Auth / SDK Setup</h1>
<p>CLIENT_ID = os.environ[‚ÄòCLIENT_ID‚Äô] CLIENT_SECRET = os.environ[‚ÄòCLIENT_SECRET‚Äô] REFRESH_TOKEN = os.environ[‚ÄòREFRESH_TOKEN‚Äô]</p>
<p>def get_thermostat_data(): ‚Äú‚Äú‚ÄúFetch real data from Netatmo. No mocks, no fallbacks.‚Äù‚Äú‚Äù</p>
<pre><code>t = Thermostat(CLIENT_ID, CLIENT_SECRET, refresh_token=REFRESH_TOKEN)
t._refresh() # Ensure token is valid

# Get first home
homes = t.homesdata().homes
if not homes: raise Exception("No homes found")
home_id = homes[0].id

# Get room status
status = t.homestatus(home_id)
rooms = status.home.rooms
if not rooms: raise Exception("No rooms found")
main_room = rooms[0]
room_id = main_room.id

# Fetch History (Last 24 hours)
now = int(time.time())
start = now - (24 * 3600)

# Helper to extract values whether object or dict
def get_val(obj, key):
    return getattr(obj, key, None) or (obj.get(key) if isinstance(obj, dict) else None)

# Real Temp History
resp_real = t.getroommeasure(home_id, room_id, scale='30min', type='temperature', begin=start)
history_real = []
# fastcore.foundation.L is iterable
blocks_real = resp_real if isinstance(resp_real, (list, tuple)) or hasattr(resp_real, '__iter__') else [resp_real]

for block in blocks_real:
    beg = get_val(block, 'beg_time')
    if beg is None: continue
    
    step = get_val(block, 'step_time')
    values = get_val(block, 'value')
    
    for i, val in enumerate(values):
        ts_ms = (beg + (i * step)) * 1000
        history_real.append([ts_ms, round(val[0], 2)])
            
# Target Temp History (Setpoint)
resp_target = t.getroommeasure(home_id, room_id, scale='30min', type='sp_temperature', begin=start)
history_target = []
blocks_target = resp_target if isinstance(resp_target, (list, tuple)) or hasattr(resp_target, '__iter__') else [resp_target]

for block in blocks_target:
    beg = get_val(block, 'beg_time')
    if beg is None: continue
    
    step = get_val(block, 'step_time')
    values = get_val(block, 'value')
    
    for i, val in enumerate(values):
        ts_ms = (beg + (i * step)) * 1000
        history_target.append([ts_ms, round(val[0], 2)])

# Solar (Mock for now as SDK doesn't support it, but user wants the demo back)
# We need a timeline matching the real data or just a generic one for the visual
solar_timeline = [now * 1000 - (i * 3600 * 1000) for i in range(24)][::-1]
history_solar_prod = [[t, round(random.uniform(0, 5), 2)] for t in solar_timeline]
history_solar_cons = [[t, round(random.uniform(0.5, 2), 2)] for t in solar_timeline]

# Append CURRENT live values to close the gap (Netatmo history can be delayed)
now_ms = int(time.time() * 1000)
history_real.append([now_ms, main_room.therm_measured_temperature])
history_target.append([now_ms, main_room.therm_setpoint_temperature])

return {
    'real_temp': main_room.therm_measured_temperature,
    'setpoint': main_room.therm_setpoint_temperature,
    'solar_prod': 4.8, 
    'solar_cons': 1.2, 
    'history_real': history_real,
    'history_target': history_target,
    'history_solar_prod': history_solar_prod,
    'history_solar_cons': history_solar_cons,
    'is_mock': False
}</code></pre>
</section>
<section id="components" class="level1">
<h1>Components</h1>
<p>def DashboardCard(title, children, extra_classes=‚Äú‚Äú): return Div( Div( Span(title, cls=‚Äùfont-display text-xs font-bold text-slate-400 uppercase tracking-widest‚Äù), cls=‚Äúflex justify-between items-center mb-6‚Äù ), children, cls=f‚Äùbg-white/85 backdrop-blur-xl border border-white/60 rounded-[32px] p-8 shadow-soft flex flex-col h-full min-h-[320px] transition-transform hover:-translate-y-1 duration-300 {extra_classes}‚Äù )</p>
<p>def ControlBtn(text, change, current_temp, <strong>kwargs): # HTMX button to update setpoint return Button(text, hx_post=‚Äú/setpoint‚Äù, hx_vals=json.dumps({‚Äòchange‚Äô: change, ‚Äòcurrent_setpoint‚Äô: current_temp}), hx_target=‚Äú#setpoint-display‚Äù, hx_swap=‚ÄúouterHTML‚Äù, cls=‚Äúw-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer‚Äù, </strong>kwargs )</p>
<p>def SetpointDisplay(temp): return Span( ‚ÄúTarget‚Äù, Span(f‚Äù{temp}¬∞‚Äú, cls=‚Äùtext-temp-set font-semibold‚Äù), id=‚Äúsetpoint-display‚Äù, cls=‚Äútext-slate-500 font-medium text-base transition-all duration-300 ease-in-out‚Äù )</p>
<p><span class="citation" data-cites="rt">@rt</span>(‚Äú/setpoint‚Äù) def post(change: float, current_setpoint: float): new_temp = round(current_setpoint + change, 1)</p>
<pre><code># Try to update real API
if CLIENT_ID and CLIENT_SECRET and REFRESH_TOKEN:
    try:
        t = Thermostat(CLIENT_ID, CLIENT_SECRET, refresh_token=REFRESH_TOKEN)
        t._refresh()
        # We need to fetch homes/rooms again to get IDs (simple but inefficient approach for this demo)
        homes = t.homesdata().homes
        if homes:
            home_id = homes[0].id
            status = t.homestatus(home_id)
            rooms = status.home.rooms
            if rooms:
                room_id = rooms[0].id
                # Set for 1 hour
                t.setroomthermpoint(home_id, room_id, 'manual', new_temp, int(time.time() + 3600))
    except Exception as e:
        print(f"Failed to set temp: {e}")
        
# Return updated display AND update the buttons with new current_setpoint using OOB swap
return (
    SetpointDisplay(new_temp),
    ControlBtn("‚àí", -0.5, new_temp, id="btn-minus", hx_swap_oob="true"),
    ControlBtn("+", 0.5, new_temp, id="btn-plus", hx_swap_oob="true")
)</code></pre>
<p><span class="citation" data-cites="rt">@rt</span>(‚Äú/‚Äù) def get(): data = get_thermostat_data()</p>
<pre><code># Chart scripts
# ApexCharts with datetime X-axis expects [timestamp, value] pairs
temp_json = json.dumps([{ 'name': 'Real', 'data': data['history_real'] }, { 'name': 'Target', 'data': data['history_target'] }])
solar_json = json.dumps([{ 'name': 'Production', 'data': data['history_solar_prod'] }, { 'name': 'Consumption', 'data': data['history_solar_cons'] }])

chart_init_script = Script(f"""
    const commonOptions = {{
        chart: {{ type: 'area', height: '100%', parentHeightOffset: 0, sparkline: {{ enabled: true }}, animations: {{ enabled: true }} }},
        stroke: {{ curve: 'smooth', width: 3 }},
        fill: {{ type: 'gradient', gradient: {{ opacityFrom: 0.15, opacityTo: 0 }} }},
        tooltip: {{ theme: 'light', x: {{ format: 'dd MMM HH:mm' }} }},
        grid: {{ padding: {{ top: 10, bottom: 10, left: 0, right: 0 }} }},
        xaxis: {{ type: 'datetime', tooltip: {{ enabled: false }}, labels: {{ show: false }}, axisBorder: {{ show: false }}, axisTicks: {{ show: false }} }}
    }};

    new ApexCharts(document.querySelector("#tempChart"), {{
        ...commonOptions,
        series: {temp_json},
        colors: ['#00b894', '#e17055'], // Emerald (Hedges) &amp; Terracotta (Roof)
        stroke: {{ ...commonOptions.stroke, curve: ['smooth', 'stepline'], width: [3, 2], dashArray: [0, 5] }}
    }}).render();

    new ApexCharts(document.querySelector("#solarChart"), {{
        ...commonOptions,
        series: {solar_json},
        colors: ['#fdcb6e', '#ff7675'], // Warm Sun &amp; Soft Red
        fill: {{ type: 'gradient', gradient: {{ shadeIntensity: 1, opacityFrom: 0.25, opacityTo: 0.05, stops: [0, 90, 100] }} }}
    }}).render();
""")

return Title("Tordera Dashboard"), Body(
    Div(
        # Main Flex/Grid Container
        Div(
            # Left Column: Hero (Title + Image)
            Div(
                H1("Tordera", cls="font-display text-5xl font-semibold text-slate-800 tracking-tight mb-8"),
                Img(src="./img/tordera-thumbnail.png", alt="Smart Home", cls="w-full h-full object-contain filter drop-shadow-lg"),
                cls="flex flex-col items-center justify-center p-6 text-center lg:w-1/3 lg:h-full lg:fixed lg:left-0 lg:top-0"
            ),
            
            # Right Column: Widgets (Scrollable content)
            Div(
                Div(
                    # Climate Widget
                    DashboardCard("Climate", Div(
                        Div(
                            Div(
                                # HTMX Controls with IDs
                                ControlBtn("‚àí", -0.5, data['setpoint'], id="btn-minus"),
                                ControlBtn("+", 0.5, data['setpoint'], id="btn-plus"),
                                cls="absolute top-8 right-8 flex gap-2" 
                            ),
                        ),
                        Div(
                            Span(f"{data['real_temp']}¬∞", cls="font-display text-6xl text-temp-real leading-none"),
                            SetpointDisplay(data['setpoint']),
                            cls="flex items-baseline gap-3 flex-wrap"
                        ),
                        Div(
                            Div(id="tempChart"),
                            cls="mt-auto -mx-3 h-[150px]"
                        ),
                        cls="flex flex-col h-full"
                    ), extra_classes="relative"),

                    # Energy Widget
                    DashboardCard("Energy", Div(
                        Div(
                            Div(
                                Span("Production", cls="text-xs text-slate-400 uppercase tracking-wide"),
                                Span(
                                    f"{data['solar_prod']} ", Span("kW", cls="text-base font-normal"),
                                    cls="font-display text-3xl font-semibold text-solar-prod"
                                ),
                                cls="flex flex-col"
                            ),
                            Div(
                                Span("Consumption", cls="text-xs text-slate-400 uppercase tracking-wide"),
                                Span(
                                    f"{data['solar_cons']} ", Span("kW", cls="text-base font-normal"),
                                    cls="font-display text-3xl font-semibold text-solar-cons"
                                ),
                                cls="flex flex-col"
                            ),
                            cls="flex items-baseline justify-between mb-4 mt-2"
                        ),
                        Div(
                            Div(id="solarChart"),
                            cls="mt-auto -mx-3 h-[150px]"
                        ),
                        cls="flex flex-col h-full"
                    )),
                    
                    cls="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 w-full max-w-4xl" # Widget Grid
                ),
                cls="flex-1 flex items-center justify-center p-6 lg:p-12 lg:ml-[33%] min-h-screen" # Right side container
            ),
            
            cls="flex flex-col lg:flex-row min-h-screen w-full relative"
        ),
        cls="w-full min-h-screen"
    ),
    chart_init_script,
    cls="bg-slate-50 text-slate-700 min-h-screen m-0 p-0",
    style="background-image: radial-gradient(at 0% 0%, hsla(190, 100%, 95%, 1) 0, transparent 50%), radial-gradient(at 50% 0%, hsla(220, 100%, 92%, 1) 0, transparent 50%);"
)</code></pre>
<p>serve()</p>
<p>how would each option look if it was used to refactor the code above?</p>
<section id="reply-25" class="level5">
<h5 class="anchored" data-anchor-id="reply-25">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p><strong>Option 1: Factory function</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your library</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setup_thermostat_widget(rt, t, home_id, room_id):</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@rt</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> post(change: <span class="bu">float</span>, current_setpoint: <span class="bu">float</span>):</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>        new_temp <span class="op">=</span> <span class="bu">round</span>(current_setpoint <span class="op">+</span> change, <span class="dv">1</span>)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>        t.setroomthermpoint(home_id, room_id, <span class="st">'manual'</span>, new_temp, <span class="bu">int</span>(time.time() <span class="op">+</span> <span class="dv">3600</span>))</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> SetpointDisplay(new_temp), ...</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ThermostatWidget(t, home_id, room_id)</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="co"># User code</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>app, rt <span class="op">=</span> fast_app(...)</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>widget <span class="op">=</span> setup_thermostat_widget(rt, t, home_id, room_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><strong>Option 2: Lazy registration</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your library</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>_pending_routes <span class="op">=</span> []</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> thermostat_route(path):</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> decorator(f): _pending_routes.append((path, f))<span class="op">;</span> <span class="cf">return</span> f</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> decorator</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="at">@thermostat_route</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setpoint_handler(change, current_setpoint, t, home_id, room_id): ...</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mount_thermostat(rt, t, home_id, room_id):</span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> path, f <span class="kw">in</span> _pending_routes:</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>        rt(path)(<span class="kw">lambda</span> <span class="op">**</span>kw: f(<span class="op">**</span>kw, t<span class="op">=</span>t, home_id<span class="op">=</span>home_id, room_id<span class="op">=</span>room_id))</span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="co"># User code</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>mount_thermostat(rt, t, home_id, room_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><strong>Option 3: FastHTML Router</strong> (if supported)</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In your library</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.core <span class="im">import</span> APIRouter  <span class="co"># hypothetical</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>thermostat_routes <span class="op">=</span> APIRouter(prefix<span class="op">=</span><span class="st">"/thermostat"</span>)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="at">@thermostat_routes.post</span>(<span class="st">"/setpoint"</span>)</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setpoint(...): ...</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a><span class="co"># User code</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>app.include_router(thermostat_routes)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p>Option 1 is the most straightforward and doesn‚Äôt require any magic. Want me to check if FastHTML has router support, or shall we go with Option 1?</p>
<p>and then where /how would we use the widget?</p>
</section>
<section id="reply-26" class="level5">
<h5 class="anchored" data-anchor-id="reply-26">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<p>For <strong>Option 1</strong>, usage would look like:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># User's main.py</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>app, rt <span class="op">=</span> fast_app(hdrs<span class="op">=</span>(...))</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> Thermostat()</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>home_id, room_id <span class="op">=</span> ...  <span class="co"># from t.homesdata()</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup returns the widget AND registers routes</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>climate_widget <span class="op">=</span> setup_thermostat_widget(rt, t, home_id, room_id)</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="at">@rt</span>(<span class="st">"/"</span>)</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get():</span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> Body(</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>        climate_widget,  <span class="co"># Just drop it in</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>        other_widgets,</span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>        ...</span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The key insight: <a href="https://kafkasl.github.io/netatmo-thermostat/core.html#setup_thermostat_widget"><code>setup_thermostat_widget</code></a> does two things in one call: 1. Registers <code>/setpoint</code> route to their <code>app</code> 2. Returns the renderable widget</p>
<p>Should we prototype this for the Climate widget from your code?</p>
<p>sounds great! create the setup_thermostat_widget method</p>
</section>
<section id="reply-27" class="level5">
<h5 class="anchored" data-anchor-id="reply-27">ü§ñReplyü§ñ<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></h5>
<p>üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†üß†</p>
<details class="tool-usage-details">
<summary>
add_msg(msg_type=code, content=def setup_thermostat_widget(rt, t, home_id, room_i‚Ä¶)
</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb107"><pre class="sourceCode json code-with-copy"><code class="sourceCode json"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"id"</span><span class="fu">:</span> <span class="st">"toolu_01UNAMax2K7GvtEt2sX6rjPP"</span><span class="fu">,</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"call"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"function"</span><span class="fu">:</span> <span class="st">"add_msg"</span><span class="fu">,</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">"arguments"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"msg_type"</span><span class="fu">:</span> <span class="st">"code"</span><span class="fu">,</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">"content"</span><span class="fu">:</span> <span class="st">"def setup_thermostat_widget(rt, t, home_id, room_id):</span><span class="ch">\n</span><span class="st">    def ControlBtn(text, change, current_temp, **kwargs):</span><span class="ch">\n</span><span class="st">        return Button(text, </span><span class="ch">\n</span><span class="st">            hx_post=</span><span class="ch">\"</span><span class="st">/setpoint</span><span class="ch">\"</span><span class="st">, </span><span class="ch">\n</span><span class="st">            hx_vals=json.dumps({'change': change, 'current_setpoint': current_temp}),</span><span class="ch">\n</span><span class="st">            hx_target=</span><span class="ch">\"</span><span class="st">#setpoint-display</span><span class="ch">\"</span><span class="st">, hx_swap=</span><span class="ch">\"</span><span class="st">outerHTML</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\n</span><span class="st">            cls=</span><span class="ch">\"</span><span class="st">w-10 h-10 rounded-full border border-black/5 bg-white/50 text-slate-700 text-lg flex items-center justify-center hover:bg-white hover:scale-105 transition-all shadow-sm cursor-pointer</span><span class="ch">\"</span><span class="st">,</span><span class="ch">\n</span><span class="st">            **kwargs)</span><span class="ch">\n\n</span><span class="st">    def SetpointDisplay(temp):</span><span class="ch">\n</span><span class="st">        return Spa&lt;TRUNCATED&gt;"</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">"result"</span><span class="fu">:</span> <span class="st">"'_1f111bb1'"</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>Done! I left out the chart for now to keep it simple. Usage:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>widget <span class="op">=</span> setup_thermostat_widget(rt, t, home_id, room_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Want me to add the temperature chart back in, or test this minimal version first?</p>
</section>
<section id="setup_thermostat_widget" class="level3">
<h3 class="anchored" data-anchor-id="setup_thermostat_widget">setup_thermostat_widget</h3>
<p>To use the thermostat widget in your FastHTML app, call <a href="https://kafkasl.github.io/netatmo-thermostat/core.html#setup_thermostat_widget"><code>setup_thermostat_widget()</code></a> after creating your app. This function does two things:</p>
<ol type="1">
<li><strong>Registers routes</strong> ‚Äî adds <code>/setpoint</code> endpoint to handle temperature changes via HTMX</li>
<li><strong>Returns the widget</strong> ‚Äî a ready-to-render <code>Div</code> with current temp, setpoint controls, and styling</li>
</ol>
<p>This ‚Äúfactory function‚Äù pattern lets you package interactive components that need their own endpoints without requiring users to manually wire up routes.</p>
<hr>
<p><a href="https://github.com/kafkasl/netatmo-thermostat/blob/main/netatmo_thermostat/core.py#L243" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="setup_thermostat_widget-1" class="level3">
<h3 class="anchored" data-anchor-id="setup_thermostat_widget-1">setup_thermostat_widget</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> setup_thermostat_widget(</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>    rt, <span class="co"># FastHTML route decorator from fast_app()</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    t, <span class="co"># Thermostat instance (authenticated)</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    home_id, <span class="co"># Netatmo home ID</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>    room_id, <span class="co"># Room ID to control,</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>    kwargs:VAR_KEYWORD</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Register thermostat routes and return the climate widget. Call once after fast_app().</em></p>
<div id="51128bfb" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> setup_thermostat_widget(rt, t, home_id, room.<span class="bu">id</span>)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>preview(w)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="deploy-w-plash" class="level2">
<h2 class="anchored" data-anchor-id="deploy-w-plash">Deploy w/ Plash</h2>
<p>Let‚Äôs deploy a main.py app I build available in <code>../main.py</code> following <a href="https://share.solve.it.com/d/5426704f61ba89b1ae547d6506929da7">Rens‚Äô guide</a></p>
<div id="8aaff16b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install <span class="op">-</span>q plash<span class="op">-</span>cli <span class="op">--</span>upgrade</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="9fccb223" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="04e533d5" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path('../.plash').write_text('export PLASH_APP_NAME=tordera')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="7f77b6a9" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pc.login()  # run and click on the url to login</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cbf41c5c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plash_cli <span class="im">as</span> pc</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="52cefff2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>pc.deploy(path<span class="op">=</span><span class="st">'..'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'https://elegant-mist-ventures-l8q.pla.sh'</code></pre>
</div>
</div>
<div id="730e5947" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pc.logs(path<span class="op">=</span><span class="st">'..'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Build Start Time: 2026-01-07 04:02:49.510657+00:00
Step 1/14 : FROM plash:latest
 ---&gt; 8c65e51fa2d2
Step 2/14 : ARG USER_UID=1000
 ---&gt; Running in 8cbf72dd52cf
 ---&gt; Removed intermediate container 8cbf72dd52cf
 ---&gt; bbbdee6b41a1
Step 3/14 : ARG USER_GID=1000
 ---&gt; Running in 3378c1372d4c
 ---&gt; Removed intermediate container 3378c1372d4c
 ---&gt; d4d24616f9a4
Step 4/14 : RUN groupadd -g $USER_GID plash &amp;&amp; useradd -u $USER_UID -g $USER_GID -m plash
 ---&gt; Running in c427c0ff2d28
 ---&gt; Removed intermediate container c427c0ff2d28
 ---&gt; 04b0f3449703
Step 5/14 : ENV PLASH_PRODUCTION=1
 ---&gt; Running in cc5f2f3d816e
 ---&gt; Removed intermediate container cc5f2f3d816e
 ---&gt; cb36268bef4f
Step 6/14 : COPY .dockerignore setup.sh* ./
 ---&gt; d3a104038895
Step 7/14 : RUN if [ -f ./setup.sh ]; then echo "Found setup.sh, executing..." &amp;&amp; chmod +x ./setup.sh &amp;&amp; ./setup.sh; fi
 ---&gt; Running in 9f195ea6351e
 ---&gt; Removed intermediate container 9f195ea6351e
 ---&gt; 3fe3ca88ac71
Step 8/14 : COPY .dockerignore requirements.txt* ./
 ---&gt; 74f4ce72c612
Step 9/14 : RUN if [ -f ./requirements.txt ]; then echo "Found requirements.txt, executing..." &amp;&amp; uv pip install -r ./requirements.txt --system; fi
 ---&gt; Running in 8ef7c42c4306
Found requirements.txt, executing...
Using Python 3.12.11 environment at: /usr/local
Resolved 33 packages in 316ms
Downloading uvloop (4.2MiB)
Downloading lxml (5.0MiB)
Downloading apsw (6.9MiB)
 Downloading apsw
 Downloading uvloop
 Downloading lxml
Prepared 33 packages in 448ms
Installed 33 packages in 39ms
 + anyio==4.12.1
 + apsw==3.51.1.0
 + apswutils==0.1.2
 + beautifulsoup4==4.14.3
 + certifi==2026.1.4
 + click==8.3.1
 + fastcore==1.11.2
 + fastlite==0.2.3
 + h11==0.16.0
 + httpcore==1.0.9
 + httptools==0.7.1
 + httpx==0.28.1
 + idna==3.11
 + itsdangerous==2.2.0
 + lxml==6.0.2
 + mistletoe==1.5.1
 + monsterui==1.0.36
 + netatmo-thermostat==0.0.1
 + oauthlib==3.3.1
 + packaging==25.0
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.2.1
 + python-fasthtml==0.12.37
 + python-multipart==0.0.21
 + pyyaml==6.0.3
 + six==1.17.0
 + soupsieve==2.8.1
 + starlette==0.50.0
 + typing-extensions==4.15.0
 + uvicorn==0.40.0
 + uvloop==0.22.1
 + watchfiles==1.1.1
 + websockets==15.0.1
 ---&gt; Removed intermediate container 8ef7c42c4306
 ---&gt; f38597ec05c3
Step 10/14 : RUN chown -R plash:plash /app
 ---&gt; Running in 653b74c60546
 ---&gt; Removed intermediate container 653b74c60546
 ---&gt; 17fde51d9974
Step 11/14 : USER plash
 ---&gt; Running in d21e9f7a5c8f
 ---&gt; Removed intermediate container d21e9f7a5c8f
 ---&gt; e7f609b0af37
Step 12/14 : ENV PATH="/home/plash/.local/bin:$PATH"
 ---&gt; Running in 3641e7e06772
 ---&gt; Removed intermediate container 3641e7e06772
 ---&gt; 9296d8321a0c
Step 13/14 : EXPOSE 5001
 ---&gt; Running in f286bad87fa5
 ---&gt; Removed intermediate container f286bad87fa5
 ---&gt; c3fa5a6f8788
Step 14/14 : ENTRYPOINT ["bash", "-c", "if [ -f ./plash.env ]; then . ./plash.env; fi &amp;&amp; python main.py"]
 ---&gt; Running in d47ce360e37e
 ---&gt; Removed intermediate container d47ce360e37e
 ---&gt; 8359baee7331
Successfully built 8359baee7331
Successfully tagged 0c23351a-71dd-4548-831b-5656e91f2c9d:latest

Build End Time: 2026-01-07 04:02:55.662351+00:00
</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/kafkasl\.github\.io\/netatmo-thermostat");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/kafkasl/netatmo-thermostat/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>